/*! For license information please see main.81c7ce8a.js.LICENSE.txt */
(()=>{var e={730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ee=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ie?Ee?Ee.push(e):Ee=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Ee;if(Ee=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ie||null!==Ee)&&(Ae(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Re=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,It,Et,Tt,kt=!1,Ct=[],xt=null,At=null,Nt=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Dt.forEach(Vt),Pt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return En}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Dn),Rn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,_e(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Er={};function Tr(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Ir[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Ar=Tr("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),c(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}De((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=An;break;case kr:case Cr:case xr:c=vn;break;case Ar:c=Nn;break;case"scroll":c=dn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Jn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Pe(n,s))&&o.unshift(Wr(n,c,a)):i||null!=(c=Pe(n,s))&&o.push(Wr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ii=-1;function Ei(e){return{current:e}}function Ti(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function ki(e,t){Ii++,Si[Ii]=e.current,e.current=t}var Ci={},xi=Ei(Ci),Ai=Ei(!1),Ni=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ai),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,ki(xi,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(xi),ki(xi,e)):Ti(Ai),ki(Ai,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{wt=t,ji=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ei(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Ss(e){var t=vs.current;Ti(vs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ac)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function js(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Pi(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Pi(t)?Ni:xi.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(js(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case S:return(t=Vl(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Gs(r,s,o),c.return=r,r=c)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vl(o,r.mode,c)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ei(Xs),eo=Ei(Xs),to=Ei(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ei(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function xo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(s(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nc)throw Error(s(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Nc.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Gc=r),da(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Oc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Oc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Oc,Rc),Rc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Oc,Rc),Rc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Pi(n)?Ni:xi.current;return s=Di(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Di(t,l=Pi(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ks(t,o,r,l),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ai.current||Ns?("function"===typeof u&&(js(t,n,u,r),c=t.memoizedState),(a=Ns||Bs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Di(t,c=Pi(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ks(t,o,r,c),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(js(t,n,f,r),p=t.memoizedState),(l=Ns||Bs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Ra,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Va(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,ja(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rl(r,e,i,-1))}return gl(),ja(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ol(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ol(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Ha(t),null;case 3:return r=t.stateNode,io(),Ti(Ai),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Ra(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Ss(t.type._context),Ha(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ga(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ga(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Vr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Al.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Sc(d);continue}}null!==p?(p.return=f,Za=p):Sc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=$a;var l=Ja;if($a=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Ic(i):null!==c?(c.return=o,Za=c):Ic(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,$a=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ic(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Ec,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Ac=0,Nc=null,Dc=null,Pc=0,Rc=0,Oc=Ei(0),Lc=0,Mc=null,Fc=0,Uc=0,Vc=0,jc=null,zc=null,Bc=0,qc=1/0,Kc=null,Wc=!1,Gc=null,Hc=null,Qc=!1,Yc=null,$c=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Ac)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Ac)&&0!==Pc?Pc&-Pc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&Ac)&&e===Nc||(e===Nc&&(0===(2&Ac)&&(Uc|=n),4===Lc&&cl(e,Pc)),il(e,r),1===n&&0===Ac&&0===(1&t.mode)&&(qc=Je()+500,Vi&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nc?Pc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Ac)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Ac))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=dt(e,e===Nc?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Ac;Ac|=2;var o=ml();for(Nc===e&&Pc===t||(Kc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Ac=i,null!==Dc?t=0:(Nc=null,Pc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sl(e,zc,Kc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Bc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),t);break}Sl(e,zc,Kc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),r);break}Sl(e,zc,Kc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zc,zc=n,null!==t&&al(t)),e}function al(e){null===zc?zc=e:zc.push.apply(zc,e)}function cl(e,t){for(t&=~Vc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Ac))throw Error(s(327));Il();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sl(e,zc,Kc),il(e,Je()),null}function ul(e,t){var n=Ac;Ac|=1;try{return e(t)}finally{0===(Ac=n)&&(qc=Je()+500,Vi&&Bi())}}function hl(e){null!==Yc&&0===Yc.tag&&0===(6&Ac)&&Il();var t=Ac;Ac|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Ac=t))&&Bi()}}function dl(){Rc=Oc.current,Ti(Oc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dc)for(n=Dc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ti(Ai),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Nc=e,Dc=e=Ol(e.current,null),Pc=Rc=t,Lc=0,Mc=null,Vc=Uc=Fc=0,zc=jc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Dc;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Dc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===jc?jc=[o]:jc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Dc===n&&null!==n&&(Dc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Nc||0===(268435455&Fc)&&0===(268435455&Uc)||cl(Nc,Pc)}function vl(e,t){var n=Ac;Ac|=2;var r=ml();for(Nc===e&&Pc===t||(Kc=null,fl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(_s(),Ac=n,kc.current=r,null!==Dc)throw Error(s(261));return Nc=null,Pc=0,Lc}function yl(){for(;null!==Dc;)bl(Dc)}function wl(){for(;null!==Dc&&!Ye();)bl(Dc)}function bl(e){var t=Ec(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?_l(e):Dc=t,Cc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Rc)))return void(Dc=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dc=n);if(null===e)return Lc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Sl(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{Il()}while(null!==Yc);if(0!==(6&Ac))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nc&&(Dc=Nc=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Nl(tt,(function(){return Il(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Ac;Ac|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),vc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),$e(),Ac=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Yc=e,$c=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=Gc,Gc=null,e;0!==(1&$c)&&0!==e.tag&&Il(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function Il(){if(null!==Yc){var e=bt($c),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,$c=0,0!==(6&Ac))throw Error(s(331));var i=Ac;for(Ac|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tl(c,c.return,S)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Ac=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function El(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(vt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(Pc&n)===n&&(4===Lc||3===Lc&&(130023424&Pc)===Pc&&500>Je()-Bc?fl(e,0):Vc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=As(e,t))&&(vt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Al(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Nl(e,t){return He(e,t)}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Dl(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Ml(n.children,i,o,t);case E:a=8,i|=8;break;case T:return(e=Pl(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Pl(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pl(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case D:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,s,o,a,c){return e=new jl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=zl(n,r,!0,e,0,s,0,a,c)).context=Bl(null),n=e.current,(s=Rs(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ec=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Di(t,xi.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===D)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Rs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Es(t,n),qs(t,r,i),Ws(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wl(o);a.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wl(c);a.call(e)}}var c=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hl((function(){Kl(t,c,n,r)})),c}(n,t,e,i,r);return Wl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Kl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Je()),0===(6&Ac)&&(qc=Je()+500,Bi()))}break;case 13:hl((function(){var t=As(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Hl(e,1)}},St=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rl(t,e,134217728,tl());Hl(e,134217728)}},It=function(e){if(13===e.tag){var t=nl(e),n=As(e,t);if(null!==n)rl(n,e,t,tl());Hl(e,t)}},Et=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ae=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ul]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,R(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,E=!1,T=null,k=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function N(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(E=!1,T=null)}}else E=!1}if("function"===typeof w)I=function(){w(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=N,I=function(){P.postMessage(null)}}else I=function(){v(N,0)};function R(e){T=e,E||(E=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,R(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ji,SDK_VERSION:()=>so,_DEFAULT_ENTRY_NAME:()=>qs,_addComponent:()=>Qs,_addOrOverwriteComponent:()=>Ys,_apps:()=>Ws,_clearComponents:()=>to,_components:()=>Hs,_getProvider:()=>Js,_isFirebaseApp:()=>Zs,_isFirebaseServerApp:()=>eo,_registerComponent:()=>$s,_removeServiceInstance:()=>Xs,_serverApps:()=>Gs,deleteApp:()=>uo,getApp:()=>co,getApps:()=>lo,initializeApp:()=>oo,initializeServerApp:()=>ao,onLog:()=>fo,registerVersion:()=>ho,setLogLevel:()=>po});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(c({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let c=d(i,g),l=b.createHref(i);try{a.pushState(c,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(l)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let s=d(i,g),c=b.createHref(i);a.replaceState(s,"",c),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=D(r);s=A(i[o],e)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,S=3,I=2,E=1,T=10,k=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=I),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?S:""===t?E:T)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:F([i,l.pathname]),pathnameBase:U(F([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=F([i,l.pathnameBase]))}return s}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=O(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:j(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const W=r.createContext(null);const G=r.createContext(null);const H=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const $=r.createContext(null);function J(){return null!=r.useContext(Q)}function X(){return J()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(H).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=le(ae.UseNavigateStable),t=he(ce.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return i}():function(){J()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(H),{matches:s}=r.useContext(Y),{pathname:o}=X(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),c=r.useRef(!1);return Z((()=>{c.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(e,n,i,s){J()||u(!1);let{navigator:o}=r.useContext(H),{matches:a}=r.useContext(Y),c=a[a.length-1],l=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=X();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=oe(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&b?r.createElement(Q.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function ne(){let e=function(){var e;let t=r.useContext($),n=ue(ce.UseRouteError),i=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,d=null,f=null;var p;n&&(o=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||re,l&&(h<0&&0===s?(p="route-fallback",!1||de[p]||(de[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function le(e){let t=r.useContext(W);return t||u(!1),t}function ue(e){let t=r.useContext(G);return t||u(!1),t}function he(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const de={};i.startTransition;function fe(e){u(!1)}function pe(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1,future:l}=e;J()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:c,future:K({v7_relativeSplatPath:!1},l)})),[h,l,a,c]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=s,w=r.useMemo((()=>{let e=P(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:o}}),[h,f,p,g,v,y,o]);return null==w?null:r.createElement(H.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function me(e){let{children:t,location:n}=e;return te(ge(t),n)}new Promise((()=>{}));r.Component;function ge(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ge(e.props.children,s));e.type!==fe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ge(e.props.children,s)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(LA){}new Map;const ve=i.startTransition;a.flushSync,i.useId;function ye(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let c=o.current,[l,u]=r.useState({action:c.action,location:c.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&ve?ve((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>c.listen(d)),[c,d]),r.createElement(pe,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));function _e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Se=function(){return Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Se.apply(this,arguments)};Object.create;function Ie(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Ee=n(324),Te=n.n(Ee),ke="-ms-",Ce="-moz-",xe="-webkit-",Ae="comm",Ne="rule",De="decl",Pe="@import",Re="@keyframes",Oe="@layer",Le=Math.abs,Me=String.fromCharCode,Fe=Object.assign;function Ue(e){return e.trim()}function Ve(e,t){return(e=t.exec(e))?e[0]:e}function je(e,t,n){return e.replace(t,n)}function ze(e,t,n){return e.indexOf(t,n)}function Be(e,t){return 0|e.charCodeAt(t)}function qe(e,t,n){return e.slice(t,n)}function Ke(e){return e.length}function We(e){return e.length}function Ge(e,t){return t.push(e),e}function He(e,t){return e.filter((function(e){return!Ve(e,t)}))}var Qe=1,Ye=1,$e=0,Je=0,Xe=0,Ze="";function et(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Qe,column:Ye,length:o,return:"",siblings:a}}function tt(e,t){return Fe(et("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function nt(e){for(;e.root;)e=tt(e.root,{children:[e]});Ge(e,e.siblings)}function rt(){return Xe=Je>0?Be(Ze,--Je):0,Ye--,10===Xe&&(Ye=1,Qe--),Xe}function it(){return Xe=Je<$e?Be(Ze,Je++):0,Ye++,10===Xe&&(Ye=1,Qe++),Xe}function st(){return Be(Ze,Je)}function ot(){return Je}function at(e,t){return qe(Ze,e,t)}function ct(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lt(e){return Qe=Ye=1,$e=Ke(Ze=e),Je=0,[]}function ut(e){return Ze="",e}function ht(e){return Ue(at(Je-1,pt(91===e?e+2:40===e?e+1:e)))}function dt(e){for(;(Xe=st())&&Xe<33;)it();return ct(e)>2||ct(Xe)>3?"":" "}function ft(e,t){for(;--t&&it()&&!(Xe<48||Xe>102||Xe>57&&Xe<65||Xe>70&&Xe<97););return at(e,ot()+(t<6&&32==st()&&32==it()))}function pt(e){for(;it();)switch(Xe){case e:return Je;case 34:case 39:34!==e&&39!==e&&pt(Xe);break;case 40:41===e&&pt(e);break;case 92:it()}return Je}function mt(e,t){for(;it()&&e+Xe!==57&&(e+Xe!==84||47!==st()););return"/*"+at(t,Je-1)+"*"+Me(47===e?e:it())}function gt(e){for(;!ct(st());)it();return at(e,Je)}function vt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function yt(e,t,n,r){switch(e.type){case Oe:if(e.children.length)break;case Pe:case De:return e.return=e.return||e.value;case Ae:return"";case Re:return e.return=e.value+"{"+vt(e.children,r)+"}";case Ne:if(!Ke(e.value=e.props.join(",")))return""}return Ke(n=vt(e.children,r))?e.return=e.value+"{"+n+"}":""}function wt(e,t,n){switch(function(e,t){return 45^Be(e,0)?(((t<<2^Be(e,0))<<2^Be(e,1))<<2^Be(e,2))<<2^Be(e,3):0}(e,t)){case 5103:return xe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+e+e;case 4789:return Ce+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+e+Ce+e+ke+e+e;case 5936:switch(Be(e,t+11)){case 114:return xe+e+ke+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xe+e+ke+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xe+e+ke+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return xe+e+ke+e+e;case 6165:return xe+e+ke+"flex-"+e+e;case 5187:return xe+e+je(e,/(\w+).+(:[^]+)/,xe+"box-$1$2"+ke+"flex-$1$2")+e;case 5443:return xe+e+ke+"flex-item-"+je(e,/flex-|-self/g,"")+(Ve(e,/flex-|baseline/)?"":ke+"grid-row-"+je(e,/flex-|-self/g,""))+e;case 4675:return xe+e+ke+"flex-line-pack"+je(e,/align-content|flex-|-self/g,"")+e;case 5548:return xe+e+ke+je(e,"shrink","negative")+e;case 5292:return xe+e+ke+je(e,"basis","preferred-size")+e;case 6060:return xe+"box-"+je(e,"-grow","")+xe+e+ke+je(e,"grow","positive")+e;case 4554:return xe+je(e,/([^-])(transform)/g,"$1"+xe+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+e+e;case 4200:if(!Ve(e,/flex-|baseline/))return ke+"grid-column-align"+qe(e,t)+e;break;case 2592:case 3360:return ke+je(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Ve(e.props,/grid-\w+-end/)}))?~ze(e+(n=n[t].value),"span",0)?e:ke+je(e,"-start","")+e+ke+"grid-row-span:"+(~ze(n,"span",0)?Ve(n,/\d+/):+Ve(n,/\d+/)-+Ve(e,/\d+/))+";":ke+je(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Ve(e.props,/grid-\w+-start/)}))?e:ke+je(je(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,xe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ke(e)-1-t>6)switch(Be(e,t+1)){case 109:if(45!==Be(e,t+4))break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+Ce+(108==Be(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ze(e,"stretch",0)?wt(je(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return je(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return ke+n+":"+r+a+(i?ke+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===Be(e,t+6))return je(e,":",":"+xe)+e;break;case 6444:switch(Be(e,45===Be(e,14)?18:11)){case 120:return je(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xe+(45===Be(e,14)?"inline-":"")+"box$3$1"+xe+"$2$3$1"+ke+"$2box$3")+e;case 100:return je(e,":",":"+ke)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return je(e,"scroll-","scroll-snap-")+e}return e}function bt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case De:return void(e.return=wt(e.value,e.length,n));case Re:return vt([tt(e,{value:je(e.value,"@","@"+xe)})],r);case Ne:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Ve(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":nt(tt(e,{props:[je(t,/:(read-\w+)/,":"+Ce+"$1")]})),nt(tt(e,{props:[t]})),Fe(e,{props:He(n,r)});break;case"::placeholder":nt(tt(e,{props:[je(t,/:(plac\w+)/,":"+xe+"input-$1")]})),nt(tt(e,{props:[je(t,/:(plac\w+)/,":"+Ce+"$1")]})),nt(tt(e,{props:[je(t,/:(plac\w+)/,ke+"input-$1")]})),nt(tt(e,{props:[t]})),Fe(e,{props:He(n,r)})}return""}))}}function _t(e){return ut(St("",null,null,null,[""],e=lt(e),0,[0],e))}function St(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,S=r,I=w;g;)switch(p=y,y=it()){case 40:if(108!=p&&58==Be(I,h-1)){-1!=ze(I+=je(ht(y),"&","&\f"),"&\f",Le(l?a[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:I+=ht(y);break;case 9:case 10:case 13:case 32:I+=dt(p);break;case 92:I+=ft(ot()-1,7);continue;case 47:switch(st()){case 42:case 47:Ge(Et(mt(it(),ot()),t,n,c),c);break;default:I+="/"}break;case 123*m:a[l++]=Ke(I)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(I=je(I,/\f/g,"")),f>0&&Ke(I)-h&&Ge(f>32?Tt(I+";",r,n,h-1,c):Tt(je(I," ","")+";",r,n,h-2,c),c);break;case 59:I+=";";default:if(Ge(S=It(I,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===y)if(0===u)St(I,t,S,S,b,s,h,a,_);else switch(99===d&&110===Be(I,3)?100:d){case 100:case 108:case 109:case 115:St(e,S,S,r&&Ge(It(e,S,S,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:St(I,S,S,S,[""],_,0,a,_)}}l=u=f=0,m=v=1,w=I="",h=o;break;case 58:h=1+Ke(I),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==rt())continue;switch(I+=Me(y),y*m){case 38:v=u>0?1:(I+="\f",-1);break;case 44:a[l++]=(Ke(I)-1)*v,v=1;break;case 64:45===st()&&(I+=ht(it())),d=st(),u=h=Ke(w=I+=gt(ot())),y++;break;case 45:45===p&&2==Ke(I)&&(m=0)}}return s}function It(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=We(f),m=0,g=0,v=0;m<r;++m)for(var y=0,w=qe(e,d+1,d=Le(g=o[m])),b=e;y<p;++y)(b=Ue(g>0?f[y]+" "+w:je(w,/&\f/g,f[y])))&&(c[v++]=b);return et(e,t,n,0===i?Ne:a,c,l,u,h)}function Et(e,t,n,r){return et(e,t,n,Ae,Me(Xe),qe(e,2,-2),0,r)}function Tt(e,t,n,r,i){return et(e,t,n,De,qe(e,0,r),qe(e,r+1,-1),r,i)}const kt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var Ct="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",xt="active",At="data-styled-version",Nt="6.1.8",Dt="/*!sc*/\n",Pt="undefined"!=typeof window&&"HTMLElement"in window,Rt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Ot=(new Set,Object.freeze([])),Lt=Object.freeze({});function Mt(e,t,n){return void 0===n&&(n=Lt),e.theme!==n.theme&&e.theme||t||n.theme}var Ft=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ut=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Vt=/(^-|-$)/g;function jt(e){return e.replace(Ut,"-").replace(Vt,"")}var zt=/(a)(d)/gi,Bt=52,qt=function(e){return String.fromCharCode(e+(e>25?39:97))};function Kt(e){var t,n="";for(t=Math.abs(e);t>Bt;t=t/Bt|0)n=qt(t%Bt)+n;return(qt(t%Bt)+n).replace(zt,"$1-$2")}var Wt,Gt=5381,Ht=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Qt=function(e){return Ht(Gt,e)};function Yt(e){return Kt(Qt(e)>>>0)}function $t(e){return e.displayName||e.name||"Component"}function Jt(e){return"string"==typeof e&&!0}var Xt="function"==typeof Symbol&&Symbol.for,Zt=Xt?Symbol.for("react.memo"):60115,en=Xt?Symbol.for("react.forward_ref"):60112,tn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},rn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sn=((Wt={})[en]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Wt[Zt]=rn,Wt);function on(e){return("type"in(t=e)&&t.type.$$typeof)===Zt?rn:"$$typeof"in e?sn[e.$$typeof]:tn;var t}var an=Object.defineProperty,cn=Object.getOwnPropertyNames,ln=Object.getOwnPropertySymbols,un=Object.getOwnPropertyDescriptor,hn=Object.getPrototypeOf,dn=Object.prototype;function fn(e,t,n){if("string"!=typeof t){if(dn){var r=hn(t);r&&r!==dn&&fn(e,r,n)}var i=cn(t);ln&&(i=i.concat(ln(t)));for(var s=on(e),o=on(t),a=0;a<i.length;++a){var c=i[a];if(!(c in nn||n&&n[c]||o&&c in o||s&&c in s)){var l=un(t,c);try{an(e,c,l)}catch(e){}}}}return e}function pn(e){return"function"==typeof e}function mn(e){return"object"==typeof e&&"styledComponentId"in e}function gn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function vn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function yn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function wn(e,t,n){if(void 0===n&&(n=!1),!n&&!yn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=wn(e[r],t[r]);else if(yn(t))for(var r in t)e[r]=wn(e[r],t[r]);return e}function bn(e,t){Object.defineProperty(e,"toString",{value:t})}function _n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Sn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw _n(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Dt);return t},e}(),In=new Map,En=new Map,Tn=1,kn=function(e){if(In.has(e))return In.get(e);for(;En.has(Tn);)Tn++;var t=Tn++;return In.set(e,t),En.set(t,e),t},Cn=function(e,t){Tn=t+1,In.set(e,t),En.set(t,e)},xn="style[".concat(Ct,"][").concat(At,'="').concat(Nt,'"]'),An=new RegExp("^".concat(Ct,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Nn=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},Dn=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Dt),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(An);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(Cn(u,l),Nn(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function Pn(){return n.nc}var Rn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ct,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(Ct,xt),r.setAttribute(At,Nt);var o=Pn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},On=function(){function e(e){this.element=Rn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw _n(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ln=function(){function e(e){this.element=Rn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Mn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Fn=Pt,Un={isServer:!Pt,useCSSOMInjection:!Rt},Vn=function(){function e(e,t,n){void 0===e&&(e=Lt),void 0===t&&(t={});var r=this;this.options=Se(Se({},Un),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Pt&&Fn&&(Fn=!1,function(e){for(var t=document.querySelectorAll(xn),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Ct)!==xt&&(Dn(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),bn(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return En.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(Ct,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(Dt)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return kn(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Se(Se({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Mn(n):t?new On(n):new Ln(n)}(this.options),new Sn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(kn(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(kn(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(kn(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),jn=/&/g,zn=/^\s*\/\/.*$/gm;function Bn(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Bn(e.children,t)),e}))}function qn(e){var t,n,r,i=void 0===e?Lt:e,s=i.options,o=void 0===s?Lt:s,a=i.plugins,c=void 0===a?Ot:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===Ne&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(jn,n).replace(r,l))})),o.prefix&&u.push(bt),u.push(yt);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(zn,""),l=_t(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=Bn(l,o.namespace));var h,d=[];return vt(l,function(e){var t=We(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=c.length?c.reduce((function(e,t){return t.name||_n(15),Ht(e,t.name)}),Gt).toString():"",h}var Kn=new Vn,Wn=qn(),Gn=r.createContext({shouldForwardProp:void 0,styleSheet:Kn,stylis:Wn}),Hn=(Gn.Consumer,r.createContext(void 0));function Qn(){return(0,r.useContext)(Gn)}function Yn(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],s=Qn().styleSheet,o=(0,r.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,r.useMemo)((function(){return qn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)((function(){Te()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return r.createElement(Gn.Provider,{value:c},r.createElement(Hn.Provider,{value:a},e.children))}var $n=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Wn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,bn(this,(function(){throw _n(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Wn),this.name+e.hash},e}(),Jn=function(e){return e>="A"&&e<="Z"};function Xn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Jn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Zn=function(e){return null==e||!1===e||""===e},er=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!Zn(s)&&(Array.isArray(s)&&s.isCss||pn(s)?r.push("".concat(Xn(i),":"),s,";"):yn(s)?r.push.apply(r,Ie(Ie(["".concat(i," {")],er(s),!1),["}"],!1)):r.push("".concat(Xn(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in kt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function tr(e,t,n,r){return Zn(e)?[]:mn(e)?[".".concat(e.styledComponentId)]:pn(e)?!pn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:tr(e(t),t,n,r):e instanceof $n?n?(e.inject(n,r),[e.getName(r)]):[e]:yn(e)?er(e):Array.isArray(e)?Array.prototype.concat.apply(Ot,e.map((function(e){return tr(e,t,n,r)}))):[e.toString()];var i}function nr(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(pn(n)&&!mn(n))return!1}return!0}var rr=Qt(Nt),ir=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&nr(e),this.componentId=t,this.baseHash=Ht(rr,t),this.baseStyle=n,Vn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=gn(r,this.staticRulesId);else{var i=vn(tr(this.rules,e,t,n)),s=Kt(Ht(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=gn(r,s),this.staticRulesId=s}else{for(var a=Ht(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=vn(tr(u,e,t,n));a=Ht(a,h+l),c+=h}}if(c){var d=Kt(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=gn(r,d)}}return r},e}(),sr=r.createContext(void 0);sr.Consumer;var or={};new Set;function ar(e,t,n){var i=mn(e),s=e,o=!Jt(e),a=t.attrs,c=void 0===a?Ot:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":jt(e);or[n]=(or[n]||0)+1;var r="".concat(n,"-").concat(Yt(Nt+n+or[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):l,h=t.displayName,d=void 0===h?function(e){return Jt(e)?"styled.".concat(e):"Styled(".concat($t(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(jt(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=t.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new ir(n,f,i?s.componentStyle:void 0);function w(e,t){return function(e,t,n){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=r.useContext(sr),h=Qn(),d=e.shouldForwardProp||h.shouldForwardProp,f=Mt(t,u,o)||Lt,p=function(e,t,n){for(var r,i=Se(Se({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=pn(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?gn(i[a],o[a]):"style"===a?Se(Se({},i[a]),o[a]):o[a]}return t.className&&(i.className=gn(i.className,t.className)),i}(i,t,f),m=p.as||l,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:d&&!d(v,m)||(g[v]=p[v]));var y=function(e,t){var n=Qn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=gn(a,c);return y&&(w+=" "+y),p.className&&(w+=" "+p.className),g[Jt(m)&&!Ft.has(m)?"class":"className"]=w,g.ref=n,(0,r.createElement)(m,g)}(b,e,t)}w.displayName=d;var b=r.forwardRef(w);return b.attrs=p,b.componentStyle=y,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?gn(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)wn(e,i[r],!0);return e}({},s.defaultProps,e):e}}),bn(b,(function(){return".".concat(b.styledComponentId)})),o&&fn(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function cr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var lr=function(e){return Object.assign(e,{isCss:!0})};function ur(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(pn(e)||yn(e))return lr(tr(cr(Ot,Ie([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?tr(r):lr(tr(cr(r,t)))}function hr(e,t,n){if(void 0===n&&(n=Lt),!t)throw _n(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,ur.apply(void 0,Ie([r],i,!1)))};return r.attrs=function(r){return hr(e,t,Se(Se({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return hr(e,t,Se(Se({},n),r))},r}var dr=function(e){return hr(ar,e)},fr=dr;Ft.forEach((function(e){fr[e]=dr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=nr(e),Vn.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(vn(tr(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Vn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=Pn(),r=vn([n&&'nonce="'.concat(n,'"'),"".concat(Ct,'="true"'),"".concat(At,'="').concat(Nt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw _n(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw _n(2);var n=((t={})[Ct]="",t[At]=Nt,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=Pn();return i&&(n.nonce=i),[r.createElement("style",Se({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Vn({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw _n(2);return r.createElement(Yn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw _n(3)}})(),"__sc-".concat(Ct,"__");var pr,mr,gr,vr,yr,wr=n(579);const br=fr.div(pr||(pr=_e(["\n    display : flex;\n    height: 24px;\n    align-items: center;\n    box-sizing: border-box;\n    // border-bottom: 1px solid #757575;\n    margin-bottom:12px;\n"]))),_r=fr.img(mr||(mr=_e(["\n    width: 24px;\n    height: 24px;\n    margin: 0px 0px;\n    box-sizing: border-box;\n    margin-right: 8px;\n"]))),Sr=fr.div(gr||(gr=_e(["\n    display: flex;\n    flex-direction:column;\n    justify-content:center;\n"]))),Ir=fr.p(vr||(vr=_e(["\n    font-size: 12px;\n    color:#fff;\n    box-sizing: border-box;\n    margin : 0px;\n"])));fr.p(yr||(yr=_e(["\n    font-size: 10px;\n    color : #757575;\n    margin : 0px;\n"])));const Er=function(e){const{post:t}=e;return console.log(t),(0,wr.jsxs)(br,{children:[(0,wr.jsx)(_r,{src:"/./MyImg.png",alt:"icon"}),(0,wr.jsx)(Sr,{children:(0,wr.jsx)(Ir,{children:"serin_727"})})]})};var Tr,kr,Cr,xr,Ar,Nr,Dr,Pr;const Rr=fr.div(Tr||(Tr=_e(["\n    width: 320px;\n    padding: 10px 12px;\n    display: flex;\n    flex-direction: row;\n    align-items: start;\n    justify-content: space-between;\n    border-bottom: 1px solid grey;\n    cursor: pointer;\n"]))),Or=fr.p(kr||(kr=_e(["\n    font-size: 12px;\n    white-space: pre-wrap;\n    width : 174px;\n    line-height: 24px;\n"]))),Lr=fr.button(Cr||(Cr=_e(["\n    width : 20px;\n    height :20px;\n    background-color: #39393B;\n    border: none;\n"]))),Mr=fr.div(xr||(xr=_e(["\n    display : flex;\n    height: 24px;\n    width: 78px;\n    align-items: center;\n    box-sizing: border-box;\n    // border-bottom: 1px solid #757575;\n    // padding-bottom:12px;\n    // margin-bottom:12px;\n"]))),Fr=fr.img(Ar||(Ar=_e(["\n    width: 24px;\n    height: 24px;\n    margin: 0px 0px;\n    box-sizing: border-box;\n    border-radius: 100px;\n    margin-right: 8px;\n"]))),Ur=fr.div(Nr||(Nr=_e(["\n    display: flex;\n    flex-direction:column;\n    justify-content:center;\n    white-space: pre-wrap;\n    width: 40px;\n"]))),Vr=fr.p(Dr||(Dr=_e(["\n    font-size: 12px;\n    color:#fff;\n    box-sizing: border-box;\n    margin : 0px;\n    white-space: pre-wrap;\n"])));fr.p(Pr||(Pr=_e(["\n    font-size: 10px;\n    color : #757575;\n    margin : 0px;\n"])));const jr=function(e){const{comment:t}=e,[n,i]=(0,r.useState)(!1),s=t.userImg?t.userImg:"./MyImg.png",o=t.userId||"rin727";return(0,wr.jsxs)(Rr,{children:[(0,wr.jsxs)(Mr,{children:[(0,wr.jsx)(Fr,{src:"/"+s,alt:"icon"}),(0,wr.jsx)(Ur,{children:(0,wr.jsx)(Vr,{children:o})})]}),(0,wr.jsx)(Or,{children:t.content}),(0,wr.jsx)(Lr,{onClick:function(){i(!n)},children:n?(0,wr.jsx)("img",{src:"/./Heart_fill.png"}):(0,wr.jsx)("img",{src:"/./Heart_un.png"})})]})};var zr;const Br=fr.div(zr||(zr=_e(["\n    display: flex;\n    flex-direction: column-reverse;\n    align-items: flex-start;\n    justify-content: center;\n    margin-top:16px;\n    // &>*{\n    //     :not(:last-child){\n    //         margin-bottom: 0px;\n    //     }\n    // }\n    position:relative;\n    bottom:32px;\n"])));const qr=function(e){const{comments:t,top:n,position:r}=e;return(0,wr.jsx)(Br,{children:t.map(((e,t)=>(0,wr.jsx)(jr,{comment:e,position:r,top:n},e.id)))})};var Kr,Wr;const Gr=fr.button(Kr||(Kr=_e(["\n    padding: 4px 8px;\n    color : #01C859;\n    // line-height: 20px;\n    background-color: ",";\n    border: ",";\n    border-radius:100px;\n    box-sizing: border-box;\n\n    font-weight:700;\n    font-size: 16px;\n    display: flex;\n    align-items: center;\n    position: ",";\n    bottom: ",";\n    right: ",";\n\n    &:hover {\n        background-color: #01C859;\n        color: white;\n        border-color: #01C859;\n    }\n"])),(e=>e.backcolor),(e=>e.border),(e=>e.position),(e=>e.bottom),(e=>e.right));fr.img(Wr||(Wr=_e(["\n    display : flex;\n    width: 24px;\n    height: 24px;\n    margin-left: 4px;\n"])));const Hr=function(e){const{title:t,onClick:n,icon:r,backcolor:i,border:s,position:o,bottom:a,right:c}=e;return(0,wr.jsxs)(Gr,{onClick:n,backcolor:i,border:s,position:o,right:c,bottom:a,children:[t||null,(0,wr.jsx)("img",{src:r})]})};var Qr,Yr;const $r=fr.textarea(Qr||(Qr=_e(["\n// styled.\ub4a4\uc5d0 \uc624\ub294\uac83\uc740 html\ud0dc\uadf8\n    height: ","px;\n    width: 320px;\n    font-size: 16px;\n    line-height: 20px;\n    box-sizing: border-box;\n    padding: 12px;\n    border-radius:12px;\n    border : 2px solid #757575;\n    display: flex;\n    align-items: center;\n    background-color: #48484A;\n    color: #fff;\n\n    &:focus {\n        border-color: ","; /* \ud3ec\ucee4\uc2a4\ub97c \ubc1b\uc558\uc744 \ub54c\uc758 \ud14c\ub450\ub9ac \uc0c9\uc0c1 */\n        outline: none; /* \ud3ec\ucee4\uc2a4 \ud14c\ub450\ub9ac \uc81c\uac70 */\n      }\n"])),(e=>e.height),(e=>e.focuscolor));fr.p(Yr||(Yr=_e(["\n      font-size: 12px;\n      color: #ADADAD;\n      text-align: right;\n"])));const Jr=function(e){const{height:t,value:n,onChange:r,placeholder:i,focuscolor:s}=e;return(0,wr.jsx)($r,{placeholder:i,height:t,value:n,onChange:r,focuscolor:s})};var Xr,Zr,ei,ti,ni,ri;const ii=fr.div(Xr||(Xr=_e(["\n    display: flex;\n    flex-direction: column;\n    width: 360px;\n    height: 84px;\n    box-sizing: border-box;\n    margin-bottom: 20px;\n"]))),si=fr.img(Zr||(Zr=_e(["\n    width: 360px;\n    height : 24px;\n"]))),oi=fr.div(ei||(ei=_e(["\n    height: 60px;\n    display: flex;\n    justify-content: space-between;\n    padding: 0 20px;\n    align-items: center;\n"]))),ai=fr.div(ti||(ti=_e(["\n    width : 24px;\n    height: 24px;\n    border: 0px;\n"]))),ci=fr.p(ni||(ni=_e(["\n    font-size: 20px;\n    color : #fff;\n    font-weight:600;\n"]))),li=fr.button(ri||(ri=_e(["\n    background-color: #39393B;\n    width: 24px;\n    height: 24px;\n    border: none;\n"])));const ui=function(e){const t=ee();return(0,wr.jsxs)(ii,{children:[(0,wr.jsx)(si,{src:"/Android Big Status Bar.png"}),(0,wr.jsxs)(oi,{children:[(0,wr.jsx)(li,{onClick:()=>{t("/")},children:(0,wr.jsx)("img",{src:e.img})}),(0,wr.jsx)(ci,{children:e.title}),(0,wr.jsx)(ai,{})]})]})};var hi,di,fi;const pi=fr.button(hi||(hi=_e(["\n    width: 44px;\n    height: 44px;\n    background-color: transparent;\n    border:none;\n    display: flex;\n    flex-direction:column;\n    align-items: center;\n    justify-content:center;\n    box-sizing: border-box;\n"]))),mi=fr.img(di||(di=_e(["\n    display : flex;\n    width: 24px;\n    height: 24px;\n    margin-bottom: 4px;\n    border: none;\n    box-sizing: border-box;\n"]))),gi=fr.p(fi||(fi=_e(["\n    font-size:12px;\n    color: ",";\n"])),(e=>e.color));const vi=function(e){const{title:t,onClick:n,color:r}=e;return(0,wr.jsxs)(pi,{onClick:n,children:[(0,wr.jsx)(mi,{src:"/"+e.icon}),(0,wr.jsx)(gi,{color:r,children:t})]})};var yi,wi,bi;const _i=fr.button(yi||(yi=_e(["\n    width: 60px;\n    height: 78px;\n    background-color: transparent;\n    border:none;\n    display: flex;\n    flex-direction:column;\n    align-items: center;\n    justify-content:center;\n"]))),Si=fr.div(wi||(wi=_e(["\n    width: 60px;\n    height: 60px;\n    margin-bottom: 4px;\n    background-color: #01C859;\n    border: none;\n    border-radius:100px;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content:center;\n"]))),Ii=fr.p(bi||(bi=_e(["\n    font-size:12px;\n    color: ",";\n"])),(e=>e.color));const Ei=function(e){const{onClick:t,color:n}=e;return(0,wr.jsxs)(_i,{onClick:t,children:[(0,wr.jsx)(Si,{children:(0,wr.jsx)("img",{src:"/"+e.Plus})}),(0,wr.jsx)(Ii,{color:n,children:"\uae00 \uc791\uc131"})]})};var Ti;const ki=fr.div(Ti||(Ti=_e(["\n    width: 100%;\n    height: 52px;\n    padding: 4px 52px;\n    background-color:#222224;\n    display: flex;\n    flex-direction: row;\n    align-items: end;\n    justify-content: space-between;\n"])));const Ci=function(e){const t=ee(),[n,i]=(0,r.useState)(window.location.pathname);return(0,wr.jsxs)(ki,{children:[(0,wr.jsx)(vi,{onClick:()=>{i(window.location.pathname),"/write"==n&&t("/")},title:(0,wr.jsx)("p",{children:"\ud648"}),color:"/write"==n?"#fff":"#01C859",icon:"/write"==n?"./home_un.png":"./home_fill.png"}),(0,wr.jsx)(Ei,{onClick:()=>{i(window.location.pathname),t("/write"==n?"/":"/write")},Plus:"/write"==n?"./cancle.png":"./plus.png",color:"/write"==n?"#01C859":"#fff"}),(0,wr.jsx)(vi,{title:(0,wr.jsx)("p",{children:"\ud504\ub85c\ud544"}),color:"#fff",icon:"./profile.png"})]})};var xi,Ai;const Ni=fr.div(xi||(xi=_e(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color:#222224;\n    position: absolute;\n    bottom:0;\n    border-bottom-left-radius : 20px;\n    border-bottom-right-radius: 20px;\n"]))),Di=fr.img(Ai||(Ai=_e(["\n    width : 360px;\n    height : 48px;\n    box-sizing: border-box;\n"])));const Pi=function(e){return(0,wr.jsxs)(Ni,{children:[(0,wr.jsx)(Ci,{}),(0,wr.jsx)(Di,{src:"/./Android Big Nav Bar.png"})]})},Ri=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Oi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ri(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Li;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Li extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mi=function(e){return function(e){const t=Ri(e);return Oi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Fi=function(e){try{return Oi.decodeString(e,!0)}catch(LA){console.error("base64Decode failed: ",LA)}return null};function Ui(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ui(e[n],t[n]));return e}const Vi=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ji=()=>{try{return Vi()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(LA){return}const t=e&&Fi(e[1]);return t&&JSON.parse(t)})()}catch(LA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(LA))}},zi=()=>{var e;return null===(e=ji())||void 0===e?void 0:e.config};class Bi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ki(){var e;const t=null===(e=ji())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(LA){return!1}}function Wi(){return"object"===typeof self&&self.self===self}function Gi(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Hi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Qi(){const e=qi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Yi(){return!Ki()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $i(){try{return"object"===typeof indexedDB}catch(LA){return!1}}class Ji extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Zi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ji(n,s,t)}}const Zi=/\{\$([^}]+)}/g;function es(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ts(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ns(n)&&ns(s)){if(!ts(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ns(e){return null!==e&&"object"===typeof e}function rs(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function is(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ss(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function os(e,t){const n=new as(e,t);return n.subscribe.bind(n)}class as{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=cs),void 0===r.error&&(r.error=cs),void 0===r.complete&&(r.complete=cs);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(LA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(LA){"undefined"!==typeof console&&console.error&&console.error(LA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function cs(){}function ls(e){return e&&e._delegate?e._delegate:e}class us{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const hs="[DEFAULT]";class ds{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(LA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(LA){if(r)return null;throw LA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch(LA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(LA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hs;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hs;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hs;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fs(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hs;return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function fs(e){return e===hs?void 0:e}class ps{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ds(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ms=[];var gs;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gs||(gs={}));const vs={debug:gs.DEBUG,verbose:gs.VERBOSE,info:gs.INFO,warn:gs.WARN,error:gs.ERROR,silent:gs.SILENT},ys=gs.INFO,ws={[gs.DEBUG]:"log",[gs.VERBOSE]:"log",[gs.INFO]:"info",[gs.WARN]:"warn",[gs.ERROR]:"error"},bs=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ws[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class _s{constructor(e){this.name=e,this._logLevel=ys,this._logHandler=bs,this._userLogHandler=null,ms.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gs))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?vs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gs.DEBUG,...t),this._logHandler(this,gs.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gs.VERBOSE,...t),this._logHandler(this,gs.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gs.INFO,...t),this._logHandler(this,gs.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gs.WARN,...t),this._logHandler(this,gs.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gs.ERROR,...t),this._logHandler(this,gs.ERROR,...t)}}const Ss=(e,t)=>t.some((t=>e instanceof t));let Is,Es;const Ts=new WeakMap,ks=new WeakMap,Cs=new WeakMap,xs=new WeakMap,As=new WeakMap;let Ns={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ks.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ds(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Es||(Es=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Os(this),n),Rs(Ts.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rs(e.apply(Os(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Os(this),t,...r);return Cs.set(s,t.sort?t.sort():[t]),Rs(s)}}function Ps(e){return"function"===typeof e?Ds(e):(e instanceof IDBTransaction&&function(e){if(ks.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ks.set(e,t)}(e),Ss(e,Is||(Is=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ns):e)}function Rs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Rs(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ts.set(t,e)})).catch((()=>{})),As.set(t,e),t}(e);if(xs.has(e))return xs.get(e);const t=Ps(e);return t!==e&&(xs.set(e,t),As.set(t,e)),t}const Os=e=>As.get(e);const Ls=["get","getKey","getAll","getAllKeys","count"],Ms=["put","add","delete","clear"],Fs=new Map;function Us(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Fs.get(t))return Fs.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ms.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ls.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Fs.set(t,s),s}Ns=(e=>({...e,get:(t,n,r)=>Us(t,n)||e.get(t,n,r),has:(t,n)=>!!Us(t,n)||e.has(t,n)}))(Ns);class Vs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const js="@firebase/app",zs="0.10.1",Bs=new _s("@firebase/app"),qs="[DEFAULT]",Ks={[js]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ws=new Map,Gs=new Map,Hs=new Map;function Qs(e,t){try{e.container.addComponent(t)}catch(LA){Bs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),LA)}}function Ys(e,t){e.container.addOrOverwriteComponent(t)}function $s(e){const t=e.name;if(Hs.has(t))return Bs.debug("There were multiple attempts to register component ".concat(t,".")),!1;Hs.set(t,e);for(const n of Ws.values())Qs(n,e);for(const n of Gs.values())Qs(n,e);return!0}function Js(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qs;Js(e,t).clearInstance(n)}function Zs(e){return void 0!==e.options}function eo(e){return void 0!==e.settings}function to(){Hs.clear()}const no=new Xi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ro{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new us("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}class io extends ro{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ho(js,zs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){uo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw no.create("server-app-deleted")}}const so="10.11.0";function oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:qs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw no.create("bad-app-name",{appName:String(i)});if(n||(n=zi()),!n)throw no.create("no-options");const s=Ws.get(i);if(s){if(ts(n,s.options)&&ts(r,s.config))return s;throw no.create("duplicate-app",{appName:i})}const o=new ps(i);for(const c of Hs.values())o.addComponent(c);const a=new ro(n,r,o);return Ws.set(i,a),a}function ao(e,t){if(Wi())throw no.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Zs(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw no.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Gs.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new ps(i);for(const l of Hs.values())a.addComponent(l);const c=new io(n,t,i,a);return Gs.set(i,c),c}function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qs;const t=Ws.get(e);if(!t&&e===qs&&zi())return oo();if(!t)throw no.create("no-app",{appName:e});return t}function lo(){return Array.from(Ws.values())}async function uo(e){let t=!1;const n=e.name;if(Ws.has(n))t=!0,Ws.delete(n);else if(Gs.has(n)){e.decRefCount()<=0&&(Gs.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ho(e,t,n){var r;let i=null!==(r=Ks[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bs.warn(e.join(" "))}$s(new us("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function fo(e,t){if(null!==e&&"function"!==typeof e)throw no.create("invalid-log-argument");!function(e,t){for(const n of ms){let r=null;t&&t.level&&(r=vs[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:gs[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function po(e){var t;t=e,ms.forEach((e=>{e.setLogLevel(t)}))}const mo="firebase-heartbeat-database",go=1,vo="firebase-heartbeat-store";let yo=null;function wo(){return yo||(yo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Rs(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Rs(o.result),e.oldVersion,e.newVersion,Rs(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(mo,go,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(vo)}catch(LA){console.warn(LA)}}}).catch((e=>{throw no.create("idb-open",{originalErrorMessage:e.message})}))),yo}async function bo(e,t){try{const n=(await wo()).transaction(vo,"readwrite"),r=n.objectStore(vo);await r.put(t,_o(e)),await n.done}catch(LA){if(LA instanceof Ji)Bs.warn(LA.message);else{const t=no.create("idb-set",{originalErrorMessage:null===LA||void 0===LA?void 0:LA.message});Bs.warn(t.message)}}}function _o(e){return"".concat(e.name,"!").concat(e.options.appId)}class So{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Eo(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Io();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Io(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),To(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),To(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Mi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Io(){return(new Date).toISOString().substring(0,10)}class Eo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!$i()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await wo()).transaction(vo),n=await t.objectStore(vo).get(_o(e));return await t.done,n}catch(LA){if(LA instanceof Ji)Bs.warn(LA.message);else{const t=no.create("idb-get",{originalErrorMessage:null===LA||void 0===LA?void 0:LA.message});Bs.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function To(e){return Mi(JSON.stringify({version:2,heartbeats:e})).length}var ko;ko="",$s(new us("platform-logger",(e=>new Vs(e)),"PRIVATE")),$s(new us("heartbeat",(e=>new So(e)),"PRIVATE")),ho(js,zs,ko),ho(js,zs,"esm2017"),ho("fire-js","");class Co{constructor(e,t){this._delegate=e,this.firebase=t,Qs(e,new us("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),uo(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qs;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qs;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Qs(this._delegate,e)}_addOrOverwriteComponent(e){Ys(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xo=new Xi("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ao=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=oo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(es(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:ho,setLogLevel:po,onLog:fo,apps:null,SDK_VERSION:so,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if($s(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw xo.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ui(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!es(n,e=e||qs))throw xo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Co);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ui(n,e)},createSubscribe:os,ErrorFactory:Xi,deepExtend:Ui}),n}(),No=new _s("@firebase/app-compat");if(Wi()&&void 0!==self.firebase){No.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&No.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Do=Ao;!function(e){ho("@firebase/app-compat","0.2.31",e)}();Do.registerVersion("firebase","10.11.0","app-compat");function Po(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ro={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Oo="EMAIL_SIGNIN",Lo="PASSWORD_RESET",Mo="RECOVER_EMAIL",Fo="REVERT_SECOND_FACTOR_ADDITION",Uo="VERIFY_AND_CHANGE_EMAIL",Vo="VERIFY_EMAIL";function jo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Bo=jo,qo=new Xi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ko=new _s("@firebase/auth");function Wo(e){if(Ko.logLevel<=gs.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ko.error("Auth (".concat(so,"): ").concat(e),...n)}}function Go(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Jo(e,...n)}function Ho(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jo(e,...n)}function Qo(e,t,n){const r=Object.assign(Object.assign({},Bo()),{[t]:n});return new Xi("auth","Firebase",r).create(t,{appName:e.name})}function Yo(e){return Qo(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $o(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Go(e,"argument-error"),Qo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Jo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qo.create(e,...n)}function Xo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Jo(t,...r)}}function Zo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wo(t),new Error(t)}function ea(e,t){e||Zo(t)}function ta(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function na(){return"http:"===ra()||"https:"===ra()}function ra(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ia{constructor(e,t){this.shortDelay=e,this.longDelay=t,ea(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qi())||Hi()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(na()||Gi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function sa(e,t){ea(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class oa{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aa={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ca=new ia(3e4,6e4);function la(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ua(e,t,n,r){return ha(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=rs(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),oa.fetch()(fa(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ha(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},aa),t);try{const t=new ma(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ga(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ga(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ga(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ga(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qo(e,a,o);Go(e,a)}}catch(LA){if(LA instanceof Ji)throw LA;Go(e,"network-request-failed",{message:String(LA)})}}async function da(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ua(e,t,n,r,i);return"mfaPendingCredential"in s&&Go(e,"multi-factor-auth-required",{_serverResponse:s}),s}function fa(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?sa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function pa(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ma{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ho(this.auth,"network-request-failed"))),ca.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ga(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ho(e,t,r);return i.customData._tokenResponse=n,i}function va(e){return void 0!==e&&void 0!==e.getResponse}function ya(e){return void 0!==e&&void 0!==e.enterprise}class wa{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pa(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ba(e,t){return ua(e,"GET","/v2/recaptchaConfig",la(e,t))}async function _a(e,t){return ua(e,"POST","/v1/accounts:lookup",t)}function Sa(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(LA){}}function Ia(e){return 1e3*Number(e)}function Ea(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Wo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Fi(n);return e?JSON.parse(e):(Wo("Failed to decode base64 JWT payload"),null)}catch(LA){return Wo("Caught error parsing JWT payload as JSON",null===LA||void 0===LA?void 0:LA.toString()),null}}function Ta(e){const t=Ea(e);return Xo(t,"internal-error"),Xo("undefined"!==typeof t.exp,"internal-error"),Xo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ka(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(LA){throw LA instanceof Ji&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(LA)&&e.auth.currentUser===e&&await e.auth.signOut(),LA}}class Ca{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(LA){return void((null===LA||void 0===LA?void 0:LA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class xa{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sa(this.lastLoginAt),this.creationTime=Sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Aa(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ka(e,_a(n,{idToken:r}));Xo(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Na(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xa(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Na(e){return e.map((e=>{var{providerId:t}=e,n=Po(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xo(e.idToken,"internal-error"),Xo("undefined"!==typeof e.idToken,"internal-error"),Xo("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ta(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xo(0!==e.length,"internal-error");const t=Ta(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Xo(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ha(e,{},(async()=>{const n=rs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=fa(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",oa.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Da;return n&&(Xo("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xo("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xo("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Zo("not implemented")}}function Pa(e,t){Xo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ra{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Po(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xa(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ka(this,this.stsTokenManager.getToken(this.auth,e));return Xo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ls(e),r=await n.getIdToken(t),i=Ea(r);Xo(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sa(Ia(i.auth_time)),issuedAtTime:Sa(Ia(i.iat)),expirationTime:Sa(Ia(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ls(e);await Aa(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ra(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Aa(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eo(this.auth.app))return Promise.reject(Yo(this.auth));const e=await this.getIdToken();return await ka(this,async function(e,t){return ua(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;Xo(y&&S,e,"internal-error");const I=Da.fromJSON(this.name,S);Xo("string"===typeof y,e,"internal-error"),Pa(u,e.name),Pa(h,e.name),Xo("boolean"===typeof w,e,"internal-error"),Xo("boolean"===typeof b,e,"internal-error"),Pa(d,e.name),Pa(f,e.name),Pa(p,e.name),Pa(m,e.name),Pa(g,e.name),Pa(v,e.name);const E=new Ra({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Da;r.updateFromServerResponse(t);const i=new Ra({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Aa(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Xo(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Na(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Da;o.updateFromIdToken(n);const a=new Ra({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Oa=new Map;function La(e){ea(e instanceof Function,"Expected a class definition");let t=Oa.get(e);return t?(ea(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Oa.set(e,t),t)}class Ma{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ma.type="NONE";const Fa=Ma;function Ua(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Va{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ua(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ua("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ra._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Va(La(Fa),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||La(Fa);const s=Ua(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Ra._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new Va(i,e,n)):new Va(i,e,n)}}function ja(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ka(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(za(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ga(t))return"Blackberry";if(Ha(t))return"Webos";if(Ba(t))return"Safari";if((t.includes("chrome/")||qa(t))&&!t.includes("edge/"))return"Chrome";if(Wa(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/firefox\//i.test(e)}function Ba(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/crios\//i.test(e)}function Ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/iemobile/i.test(e)}function Wa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/android/i.test(e)}function Ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/blackberry/i.test(e)}function Ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/webos/i.test(e)}function Qa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return Qa(e)||Wa(e)||Ha(e)||Ga(e)||/windows phone/i.test(e)||Ka(e)}function $a(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ja(qi());break;case"Worker":t="".concat(ja(qi()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(so,"/").concat(r)}class Ja{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(LA){r(LA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(LA){t.reverse();for(const n of t)try{n()}catch(Ot){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===LA||void 0===LA?void 0:LA.message})}}}class Xa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Za{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tc(this),this.idTokenSubscription=new tc(this),this.beforeStateQueue=new Ja(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=La(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(LA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await _a(this,{idToken:e}),n=await Ra._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(eo(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(LA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(LA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(LA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Aa(e)}catch(LA){if((null===LA||void 0===LA?void 0:LA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(eo(this.app))return Promise.reject(Yo(this));const t=e?ls(e):null;return t&&Xo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return eo(this.app)?Promise.reject(Yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return eo(this.app)?Promise.reject(Yo(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(La(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ua(e,"GET","/v2/passwordPolicy",la(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Xa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ua(e,"POST","/v2/accounts:revokeToken",la(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&La(e)||this._popupRedirectResolver;Xo(t,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[La(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xo(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$a(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ko.logLevel<=gs.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ko.warn("Auth (".concat(so,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ec(e){return ls(e)}class tc{constructor(e){this.auth=e,this.observer=null,this.addObserver=os((e=>this.observer=e))}get next(){return Xo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let nc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rc(e){return nc.loadJS(e)}function ic(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class sc{constructor(e){this.type="recaptcha-enterprise",this.auth=ec(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ya(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ba(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new wa(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ya(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=nc.recaptchaEnterpriseScript;0!==t.length&&(t+=i),rc(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function oc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new sc(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ac(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await oc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await oc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function cc(e,t,n){const r=ec(e);Xo(r._canInitEmulator,r,"emulator-config-failed"),Xo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=lc(t),{host:o,port:a}=function(e){const t=lc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:uc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:uc(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function lc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class hc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zo("not implemented")}_getIdTokenResponse(e){return Zo("not implemented")}_linkToIdToken(e,t){return Zo("not implemented")}_getReauthenticationResolver(e){return Zo("not implemented")}}async function dc(e,t){return ua(e,"POST","/v1/accounts:resetPassword",la(e,t))}async function fc(e,t){return ua(e,"POST","/v1/accounts:signUp",t)}async function pc(e,t){return da(e,"POST","/v1/accounts:signInWithPassword",la(e,t))}async function mc(e,t){return ua(e,"POST","/v1/accounts:sendOobCode",la(e,t))}async function gc(e,t){return mc(e,t)}async function vc(e,t){return mc(e,t)}class yc extends hc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new yc(e,t,"password")}static _fromEmailAndCode(e,t){return new yc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ac(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",pc);case"emailLink":return async function(e,t){return da(e,"POST","/v1/accounts:signInWithEmailLink",la(e,t))}(e,{email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ac(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fc);case"emailLink":return async function(e,t){return da(e,"POST","/v1/accounts:signInWithEmailLink",la(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wc(e,t){return da(e,"POST","/v1/accounts:signInWithIdp",la(e,t))}class bc extends hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Go("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Po(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new bc(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return wc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,wc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rs(t)}return e}}const _c={USER_NOT_FOUND:"user-not-found"};class Sc extends hc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Sc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Sc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return da(e,"POST","/v1/accounts:signInWithPhoneNumber",la(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await da(e,"POST","/v1/accounts:signInWithPhoneNumber",la(e,t));if(n.temporaryProof)throw ga(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return da(e,"POST","/v1/accounts:signInWithPhoneNumber",la(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_c)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Sc({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ic{constructor(e){var t,n,r,i,s,o;const a=is(ss(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Xo(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=is(ss(e)).link,n=t?is(ss(t)).deep_link_id:null,r=is(ss(e)).deep_link_id;return(r?is(ss(r)).link:null)||r||n||t||e}(e);try{return new Ic(t)}catch(n){return null}}}class Ec{constructor(){this.providerId=Ec.PROVIDER_ID}static credential(e,t){return yc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ic.parseLink(t);return Xo(n,"argument-error"),yc._fromEmailAndCode(e,n.code,n.tenantId)}}Ec.PROVIDER_ID="password",Ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kc extends Tc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cc extends kc{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Xo("providerId"in t&&"signInMethod"in t,"argument-error"),bc._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Xo(e.idToken||e.accessToken,"argument-error"),bc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Cc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(LA){return null}}}class xc extends kc{constructor(){super("facebook.com")}static credential(e){return bc._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xc.credentialFromTaggedObject(e)}static credentialFromError(e){return xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xc.credential(t.oauthAccessToken)}catch(n){return null}}}xc.FACEBOOK_SIGN_IN_METHOD="facebook.com",xc.PROVIDER_ID="facebook.com";class Ac extends kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bc._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ac.credential(n,r)}catch(i){return null}}}Ac.GOOGLE_SIGN_IN_METHOD="google.com",Ac.PROVIDER_ID="google.com";class Nc extends kc{constructor(){super("github.com")}static credential(e){return bc._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nc.credential(t.oauthAccessToken)}catch(n){return null}}}Nc.GITHUB_SIGN_IN_METHOD="github.com",Nc.PROVIDER_ID="github.com";class Dc extends hc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return wc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,wc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wc(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Dc(n,i):null}static _create(e,t){return new Dc(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pc extends Tc{constructor(e){Xo(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Pc.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Pc.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Dc.fromJSON(e);return Xo(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Dc._create(r,n)}catch(LA){return null}}}class Rc extends kc{constructor(){super("twitter.com")}static credential(e,t){return bc._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Rc.credential(n,r)}catch(i){return null}}}async function Oc(e,t){return da(e,"POST","/v1/accounts:signUp",la(e,t))}Rc.TWITTER_SIGN_IN_METHOD="twitter.com",Rc.PROVIDER_ID="twitter.com";class Lc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ra._fromIdTokenResponse(e,n,r),s=Mc(n);return new Lc({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Mc(n);return new Lc({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Mc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Fc extends Ji{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Fc.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Fc(e,t,n,r)}}function Uc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Fc._fromErrorAndOperation(e,n,t,r);throw n}))}function Vc(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function jc(e,t){const n=ls(e);await Bc(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return ua(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Vc(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function zc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ka(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Lc._forOperation(e,"link",r)}async function Bc(e,t,n){await Aa(t);const r=!1===e?"provider-already-linked":"no-such-provider";Xo(Vc(t.providerData).has(n)===e,t.auth,r)}async function qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(eo(r.app))return Promise.reject(Yo(r));const i="reauthenticate";try{const s=await ka(e,Uc(r,i,t,e),n);Xo(s.idToken,r,"internal-error");const o=Ea(s.idToken);Xo(o,r,"internal-error");const{sub:a}=o;return Xo(e.uid===a,r,"user-mismatch"),Lc._forOperation(e,i,s)}catch(LA){throw(null===LA||void 0===LA?void 0:LA.code)==="auth/".concat("user-not-found")&&Go(r,"user-mismatch"),LA}}async function Kc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(eo(e.app))return Promise.reject(Yo(e));const r="signIn",i=await Uc(e,r,t),s=await Lc._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Wc(e,t){return Kc(ec(e),t)}async function Gc(e,t){const n=ls(e);return await Bc(!1,n,t.providerId),zc(n,t)}async function Hc(e,t){return qc(ls(e),t)}async function Qc(e,t){if(eo(e.app))return Promise.reject(Yo(e));const n=ec(e),r=await async function(e,t){return da(e,"POST","/v1/accounts:signInWithCustomToken",la(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Lc._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Yc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?$c._fromServerResponse(e,t):"totpInfo"in t?Jc._fromServerResponse(e,t):Go(e,"internal-error")}}class $c extends Yc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new $c(t)}}class Jc extends Yc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Jc(t)}}function Xc(e,t,n){var r;Xo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Zc(e){const t=ec(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function el(e,t){await async function(e,t){return ua(e,"POST","/v1/accounts:update",la(e,t))}(ls(e),{oobCode:t})}async function tl(e,t){const n=ls(e),r=await dc(n,{oobCode:t}),i=r.requestType;switch(Xo(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Xo(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Xo(r.mfaInfo,n,"internal-error");default:Xo(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Yc._fromServerResponse(ec(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function nl(e,t){const n={identifier:t,continueUri:na()?ta():"http://localhost"},{signinMethods:r}=await async function(e,t){return ua(e,"POST","/v1/accounts:createAuthUri",la(e,t))}(ls(e),n);return r||[]}async function rl(e,t){const n=ls(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Xc(n.auth,r,t);const{email:i}=await async function(e,t){return mc(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function il(e,t,n){const r=ls(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Xc(r.auth,i,n);const{email:s}=await async function(e,t){return mc(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function sl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ls(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await ka(i,async function(e,t){return ua(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function ol(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ka(e,async function(e,t){return ua(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class al{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class cl extends al{constructor(e,t,n,r){super(e,t,n),this.username=r}}class ll extends al{constructor(e,t){super(e,"facebook.com",t)}}class ul extends cl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class hl extends al{constructor(e,t){super(e,"google.com",t)}}class dl extends cl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function fl(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ea(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new al(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new ll(s,i);case"github.com":return new ul(s,i);case"google.com":return new hl(s,i);case"twitter.com":return new dl(s,i,e.screenName||null);case"custom":case"anonymous":return new al(s,null);default:return new al(s,r,i)}}(n)}class pl{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new pl("enroll",e,t)}static _fromMfaPendingCredential(e){return new pl("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return pl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return pl._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ml{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ec(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Yc._fromServerResponse(n,e)));Xo(r.mfaPendingCredential,n,"internal-error");const s=pl._fromMfaPendingCredential(r.mfaPendingCredential);return new ml(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Lc._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Xo(t.user,n,"internal-error"),Lc._forOperation(t.user,t.operationType,o);default:Go(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class gl{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Yc._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new gl(e)}async getSession(){return pl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ka(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ka(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},ua(r,"POST","/v2/accounts/mfaEnrollment:withdraw",la(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(LA){throw LA}var r,i}}const vl=new WeakMap;const yl="__sak";class wl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yl,"1"),this.storage.removeItem(yl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bl extends wl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=qi();return Ba(e)||Qa(e)}()&&function(){try{return!(!window||window===window.top)}catch(LA){return!1}}(),this.fallbackToPolling=Ya(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Qi()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bl.type="LOCAL";const _l=bl;class Sl extends wl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sl.type="SESSION";const Il=Sl;class El{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new El(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Tl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}El.receivers=[];class kl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Tl("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Cl(){return window}function xl(){return"undefined"!==typeof Cl().WorkerGlobalScope&&"function"===typeof Cl().importScripts}const Al="firebaseLocalStorageDb",Nl="firebaseLocalStorage",Dl="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Rl(e,t){return e.transaction([Nl],t?"readwrite":"readonly").objectStore(Nl)}function Ol(){const e=indexedDB.open(Al,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Nl,{keyPath:Dl})}catch(LA){n(LA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Nl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Al);return new Pl(e).toPromise()}(),t(await Ol()))}))}))}async function Ll(e,t,n){const r=Rl(e,!0).put({[Dl]:t,value:n});return new Pl(r).toPromise()}function Ml(e,t){const n=Rl(e,!0).delete(t);return new Pl(n).toPromise()}class Fl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ol()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(LA){if(t++>3)throw LA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=El._getInstance(xl()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new kl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ol();return await Ll(e,yl,"1"),await Ml(e,yl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ll(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Rl(e,!1).get(t),r=await new Pl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ml(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Rl(e,!1).getAll();return new Pl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fl.type="LOCAL";const Ul=Fl;const Vl=1e12;class jl{constructor(e){this.auth=e,this.counter=Vl,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new zl(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Vl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Vl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Vl;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class zl{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Xo(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(LA){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(LA){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bl=ic("rcb"),ql=new ia(3e4,6e4);class Kl{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Cl().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&va(Cl().grecaptcha)?Promise.resolve(Cl().grecaptcha):new Promise(((n,r)=>{const i=Cl().setTimeout((()=>{r(Ho(e,"network-request-failed"))}),ql.get());Cl()[Bl]=()=>{Cl().clearTimeout(i),delete Cl()[Bl];const s=Cl().grecaptcha;if(!s||!va(s))return void r(Ho(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};rc("".concat(nc.recaptchaV2Script,"?").concat(rs({onload:Bl,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ho(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Cl().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wl{async load(e){return new jl(e)}clearedOneInstance(){}}const Gl="recaptcha",Hl={theme:"light",type:"image"};class Ql{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Hl);this.parameters=n,this.type=Gl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ec(e),this.isInvisible="invisible"===this.parameters.size,Xo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Xo(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wl:new Kl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(LA){return Promise.reject(LA)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Xo(!this.parameters.sitekey,this.auth,"argument-error"),Xo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Cl()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Xo(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Xo(na()&&!xl(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ua(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Xo(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Xo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yl{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Sc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function $l(e,t,n){var r;const i=await n.verify();try{let s;if(Xo("string"===typeof i,e,"argument-error"),Xo(n.type===Gl,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ua(e,"POST","/v2/accounts/mfaEnrollment:start",la(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xo("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xo(n,e,"missing-multi-factor-info");const o=await function(e,t){return ua(e,"POST","/v2/accounts/mfaSignIn:start",la(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ua(e,"POST","/v1/accounts:sendVerificationCode",la(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Jl{constructor(e){this.providerId=Jl.PROVIDER_ID,this.auth=ec(e)}verifyPhoneNumber(e,t){return $l(this.auth,e,ls(t))}static credential(e,t){return Sc._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jl.credentialFromTaggedObject(t)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Sc._fromTokenResponse(n,r):null}}function Xl(e,t){return t?La(t):(Xo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jl.PROVIDER_ID="phone",Jl.PHONE_SIGN_IN_METHOD="phone";class Zl extends hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eu(e){return Kc(e.auth,new Zl(e),e.bypassAuthState)}function tu(e){const{auth:t,user:n}=e;return Xo(n,t,"internal-error"),qc(n,new Zl(e),e.bypassAuthState)}async function nu(e){const{auth:t,user:n}=e;return Xo(n,t,"internal-error"),zc(n,new Zl(e),e.bypassAuthState)}class ru{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(LA){this.reject(LA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(LA){this.reject(LA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eu;case"linkViaPopup":case"linkViaRedirect":return nu;case"reauthViaPopup":case"reauthViaRedirect":return tu;default:Go(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iu=new ia(2e3,1e4);class su extends ru{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,su.currentPopupAction&&su.currentPopupAction.cancel(),su.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xo(e,this.auth,"internal-error"),e}async onExecution(){ea(1===this.filter.length,"Popup operations only handle one event");const e=Tl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ho(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,su.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ho(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,iu.get())};e()}}su.currentPopupAction=null;const ou="pendingRedirect",au=new Map;class cu extends ru{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=au.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=du(t),r=hu(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(LA){e=()=>Promise.reject(LA)}au.set(this.auth._key(),e)}return this.bypassAuthState||au.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function lu(e,t){return hu(e)._set(du(t),"true")}function uu(e,t){au.set(e._key(),t)}function hu(e){return La(e._redirectPersistence)}function du(e){return Ua(ou,e.config.apiKey,e.name)}function fu(e,t,n){return async function(e,t,n){if(eo(e.app))return Promise.reject(Yo(e));const r=ec(e);$o(e,t,Tc),await r._initializationPromise;const i=Xl(r,n);return await lu(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function pu(e,t,n){return async function(e,t,n){const r=ls(e);if($o(r.auth,t,Tc),eo(r.auth.app))return Promise.reject(Yo(r.auth));await r.auth._initializationPromise;const i=Xl(r.auth,n);await lu(i,r.auth);const s=await vu(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function mu(e,t,n){return async function(e,t,n){const r=ls(e);$o(r.auth,t,Tc),await r.auth._initializationPromise;const i=Xl(r.auth,n);await Bc(!1,r,t.providerId),await lu(i,r.auth);const s=await vu(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(eo(e.app))return Promise.reject(Yo(e));const r=ec(e),i=Xl(r,t),s=new cu(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function vu(e){const t=Tl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class yu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!bu(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ho(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wu(e))}saveEventToCache(e){this.cachedEventUids.add(wu(e)),this.lastProcessedEventTime=Date.now()}}function wu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function bu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function _u(e){return ua(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iu=/^https?/;function Eu(e){const t=ta(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Iu.test(n))return!1;if(Su.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Tu=new ia(3e4,6e4);function ku(){const e=Cl().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Cu(e){return new Promise(((t,n)=>{var r,i,s;function o(){ku(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ku(),n(Ho(e,"network-request-failed"))},timeout:Tu.get()})}if(null===(i=null===(r=Cl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Cl().gapi)||void 0===s?void 0:s.load)){const t=ic("iframefcb");return Cl()[t]=()=>{gapi.load?o():n(Ho(e,"network-request-failed"))},rc("".concat(nc.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw xu=null,e}))}let xu=null;const Au=new ia(5e3,15e3),Nu="__/auth/iframe",Du="emulator/auth/iframe",Pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ru=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ou(e){const t=e.config;Xo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sa(t,Du):"https://".concat(e.config.authDomain,"/").concat(Nu),r={apiKey:t.apiKey,appName:e.name,v:so},i=Ru.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(rs(r).slice(1))}async function Lu(e){const t=await function(e){return xu=xu||Cu(e),xu}(e),n=Cl().gapi;return Xo(n,e,"internal-error"),t.open({where:document.body,url:Ou(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pu,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ho(e,"network-request-failed"),s=Cl().setTimeout((()=>{r(i)}),Au.get());function o(){Cl().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Mu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(LA){}}}function Uu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Mu),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qi().toLowerCase();n&&(a=qa(l)?"_blank":n),za(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Qa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Fu(null);const h=window.open(t||"",a,u);Xo(h,e,"popup-blocked");try{h.focus()}catch(LA){}return new Fu(h)}const Vu="__/auth/handler",ju="emulator/auth/handler",zu=encodeURIComponent("fac");async function Bu(e,t,n,r,i,s){Xo(e.config.authDomain,e,"auth-domain-config-required"),Xo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:so,eventId:i};if(t instanceof Tc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof kc){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(zu,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Vu);return sa(t,ju)}(e),"?").concat(rs(a).slice(1)).concat(l)}const qu="webStorageSupport";const Ku=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Il,this._completeRedirectFn=gu,this._overrideRedirectResult=uu}async _openPopup(e,t,n,r){var i;ea(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Uu(e,await Bu(e,t,n,ta(),r),Tl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Cl().location.href=e}(await Bu(e,t,n,ta(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ea(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Lu(e),n=new yu(e);return t.register("authEvent",(t=>{Xo(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qu,{type:qu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[qu];void 0!==i&&t(!!i),Go(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await _u(e);for(const r of t)try{if(Eu(r))return}catch(n){}Go(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ya()||Ba()||Qa()}};class Wu{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Zo("unexpected MultiFactorSessionType")}}}class Gu extends Wu{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gu(e)}_finalizeEnroll(e,t,n){return function(e,t){return ua(e,"POST","/v2/accounts/mfaEnrollment:finalize",la(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return ua(e,"POST","/v2/accounts/mfaSignIn:finalize",la(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Hu{constructor(){}static assertion(e){return Gu._fromCredential(e)}}Hu.FACTOR_ID="phone";var Qu="@firebase/auth",Yu="1.7.1";class $u{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ji())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Ju;function Xu(){return window}!function(e){nc=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ho("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ju="Browser",$s(new us("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Xo(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:Ju,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$a(Ju)},l=new Za(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(La);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),$s(new us("auth-internal",(e=>(e=>new $u(e))(ec(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ho(Qu,Yu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ju)),ho(Qu,Yu,"esm2017");async function Zu(e,t,n){var r;const{BuildInfo:i}=Xu();ea(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(ea(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Qa()?o.ibi=i.packageName:Wa()?o.apn=i.packageName:Go(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Bu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function eh(e){const{cordova:t}=Xu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const th=20;class nh extends yu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function rh(e){const t=await oh()._get(ah(e));return t&&await oh()._remove(ah(e)),t}function ih(e,t){var n,r;const i=function(e){const t=ch(e),n=t.link?decodeURIComponent(t.link):void 0,r=ch(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ch(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=ch(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(LA){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ho(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function sh(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<th;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function oh(){return La(_l)}function ah(e){return Ua("authEvent",e.config.apiKey,e.name)}function ch(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return is(n.join("?"))}const lh=class{constructor(){this._redirectPersistence=Il,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gu,this._overrideRedirectResult=uu}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new nh(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Go(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=Xu();Xo("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xo("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xo("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xo("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xo("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),au.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:sh(),postBody:null,tenantId:e.tenantId,error:Ho(e,"no-auth-event")}}(e,n,r);await function(e,t){return oh()._set(ah(e),t)}(e,s);const o=await Zu(e,s,t);return async function(e,t,n){const{cordova:r}=Xu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Ho(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Wa()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await eh(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Xu(),n={};Qa()?n.iosBundleId=t.packageName:Wa()?n.androidPackageName=t.packageName:Go(e,"operation-not-supported-in-this-environment"),await _u(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Xu(),s=setTimeout((async()=>{await rh(e),t.onEvent(uh())}),500),o=async n=>{clearTimeout(s);const r=await rh(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=ih(r,n.url)),t.onEvent(i||uh())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Xu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(LA){console.error(LA)}}}};function uh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ho("no-auth-event")}}function hh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function dh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return!("file:"!==hh()&&"ionic:"!==hh()&&"capacitor:"!==hh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function fh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return Qi()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi();return/Edge\/\d+/.test(e)}(e)}function ph(){try{const e=self.localStorage,t=Tl();if(e)return e.setItem(t,"1"),e.removeItem(t),!fh()||$i()}catch(LA){return mh()&&$i()}return!1}function mh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function gh(){return("http:"===hh()||"https:"===hh()||Gi()||dh())&&!(Hi()||Ki())&&ph()&&!mh()}function vh(){return dh()&&"undefined"!==typeof document}const yh={LOCAL:"local",NONE:"none",SESSION:"session"},wh=Xo,bh="persistence";async function _h(e){await e._initializationPromise;const t=Sh(),n=Ua(bh,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Sh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(LA){return null}}const Ih=Xo;class Eh{constructor(){this.browserResolver=La(Ku),this.cordovaResolver=La(lh),this.underlyingResolver=null,this._redirectPersistence=Il,this._completeRedirectFn=gu,this._overrideRedirectResult=uu}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return vh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ih(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!vh()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Th(e){return e.unwrap()}function kh(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Nh(e,function(e,t){var n;const r=ls(e),i=t;return Xo(t.customData.operationType,r,"argument-error"),Xo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ml._fromError(r,i)}(e,t))}else if(r){const e=Ch(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ch(e){const{_tokenResponse:t}=e instanceof Ji?e.customData:e;if(!t)return null;if(!(e instanceof Ji)&&"temporaryProof"in t&&"phoneNumber"in t)return Jl.credentialFromResult(e);const n=t.providerId;if(!n||n===Ro.PASSWORD)return null;let r;switch(n){case Ro.GOOGLE:r=Ac;break;case Ro.FACEBOOK:r=xc;break;case Ro.GITHUB:r=Nc;break;case Ro.TWITTER:r=Rc;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Dc._create(n,o):bc._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Cc(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ji?r.credentialFromError(e):r.credentialFromResult(e)}function xh(e,t){return t.catch((t=>{throw t instanceof Ji&&kh(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ch(r)),additionalUserInfo:fl(e),user:Dh.getOrCreate(n)};var r}))}async function Ah(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>xh(e,n.confirm(t))}}class Nh{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return xh(Th(this.auth),this.resolver.resolveSignIn(e))}}class Dh{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=ls(e);return vl.has(t)||vl.set(t,gl._fromUser(t)),vl.get(t)}(e)}static getOrCreate(e){return Dh.USER_MAP.has(e)||Dh.USER_MAP.set(e,new Dh(e)),Dh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return xh(this.auth,Gc(this._delegate,e))}async linkWithPhoneNumber(e,t){return Ah(this.auth,async function(e,t,n){const r=ls(e);await Bc(!1,r,"phone");const i=await $l(r.auth,t,ls(n));return new Yl(i,(e=>Gc(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return xh(this.auth,async function(e,t,n){const r=ls(e);$o(r.auth,t,Tc);const i=Xl(r.auth,n);return new su(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Eh))}async linkWithRedirect(e){return await _h(ec(this.auth)),mu(this._delegate,e,Eh)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return xh(this.auth,Hc(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Ah(this.auth,async function(e,t,n){const r=ls(e);if(eo(r.auth.app))return Promise.reject(Yo(r.auth));const i=await $l(r.auth,t,ls(n));return new Yl(i,(e=>Hc(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return xh(this.auth,async function(e,t,n){const r=ls(e);if(eo(r.auth.app))return Promise.reject(Ho(r.auth,"operation-not-supported-in-this-environment"));$o(r.auth,t,Tc);const i=Xl(r.auth,n);return new su(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Eh))}async reauthenticateWithRedirect(e){return await _h(ec(this.auth)),pu(this._delegate,e,Eh)}sendEmailVerification(e){return rl(this._delegate,e)}async unlink(e){return await jc(this._delegate,e),this}updateEmail(e){return function(e,t){const n=ls(e);return eo(n.auth.app)?Promise.reject(Yo(n.auth)):ol(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ol(ls(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=ls(e);if(eo(n.auth.app))return Promise.reject(Yo(n.auth));await zc(n,t)}(this._delegate,e)}updateProfile(e){return sl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return il(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Dh.USER_MAP=new WeakMap;const Ph=Xo;class Rh{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ph(n,"invalid-api-key",{appName:e.name}),Ph(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Eh:void 0;this._delegate=t.initialize({options:{persistence:Lh(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(zo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Dh.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){cc(this._delegate,e,t)}applyActionCode(e){return el(this._delegate,e)}checkActionCode(e){return tl(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await dc(ls(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Zc(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return xh(this._delegate,async function(e,t,n){if(eo(e.app))return Promise.reject(Yo(e));const r=ec(e),i=ac(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oc),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Zc(e),t})),o=await Lc._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return nl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ic.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ph(gh(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await ec(e)._initializationPromise,gu(e,t,!1)}(this._delegate,Eh);return e?xh(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){ec(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Oh(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Oh(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=ec(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Xo(t.handleCodeInApp,r,"argument-error"),t&&Xc(r,e,t)}(i,n),await ac(r,i,"getOobCode",vc)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=ec(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Xc(r,i,n),await ac(r,i,"getOobCode",gc)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){wh(Object.values(yh).includes(t),e,"invalid-persistence-type"),Hi()?wh(t!==yh.SESSION,e,"unsupported-persistence-type"):Ki()?wh(t===yh.NONE,e,"unsupported-persistence-type"):mh()?wh(t===yh.NONE||t===yh.LOCAL&&$i(),e,"unsupported-persistence-type"):wh(t===yh.NONE||ph(),e,"unsupported-persistence-type")}(this._delegate,e),e){case yh.SESSION:t=Il;break;case yh.LOCAL:t=await La(Ul)._isAvailable()?Ul:_l;break;case yh.NONE:t=Fa;break;default:return Go("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return xh(this._delegate,async function(e){var t;if(eo(e.app))return Promise.reject(Yo(e));const n=ec(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Lc({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Oc(n,{returnSecureToken:!0}),i=await Lc._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return xh(this._delegate,Wc(this._delegate,e))}signInWithCustomToken(e){return xh(this._delegate,Qc(this._delegate,e))}signInWithEmailAndPassword(e,t){return xh(this._delegate,function(e,t,n){return eo(e.app)?Promise.reject(Yo(e)):Wc(ls(e),Ec.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Zc(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return xh(this._delegate,async function(e,t,n){if(eo(e.app))return Promise.reject(Yo(e));const r=ls(e),i=Ec.credentialWithLink(t,n||ta());return Xo(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Wc(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ah(this._delegate,async function(e,t,n){if(eo(e.app))return Promise.reject(Yo(e));const r=ec(e),i=await $l(r,t,ls(n));return new Yl(i,(e=>Wc(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ph(gh(),this._delegate,"operation-not-supported-in-this-environment"),xh(this._delegate,async function(e,t,n){if(eo(e.app))return Promise.reject(Ho(e,"operation-not-supported-in-this-environment"));const r=ec(e);$o(e,t,Tc);const i=Xl(r,n);return new su(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Eh))}async signInWithRedirect(e){return Ph(gh(),this._delegate,"operation-not-supported-in-this-environment"),await _h(this._delegate),fu(this._delegate,e,Eh)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await tl(ls(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Oh(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Dh.getOrCreate(e)),error:t,complete:n}}function Lh(e,t){const n=function(e,t){const n=Sh();if(!n)return[];const r=Ua(bh,e,t);switch(n.getItem(r)){case yh.NONE:return[Fa];case yh.LOCAL:return[Ul,Il];case yh.SESSION:return[Il];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ul)||n.push(Ul),"undefined"!==typeof window)for(const r of[_l,Il])n.includes(r)||n.push(r);return n.includes(Fa)||n.push(Fa),n}Rh.Persistence=yh;class Mh{constructor(){this.providerId="phone",this._delegate=new Jl(Th(Do.auth()))}static credential(e,t){return Jl.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Mh.PHONE_SIGN_IN_METHOD=Jl.PHONE_SIGN_IN_METHOD,Mh.PROVIDER_ID=Jl.PROVIDER_ID;const Fh=Xo;class Uh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Do.app();var r;Fh(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ql(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Vh;(Vh=Do).INTERNAL.registerComponent(new us("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Rh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Oo,PASSWORD_RESET:Lo,RECOVER_EMAIL:Mo,REVERT_SECOND_FACTOR_ADDITION:Fo,VERIFY_AND_CHANGE_EMAIL:Uo,VERIFY_EMAIL:Vo}},EmailAuthProvider:Ec,FacebookAuthProvider:xc,GithubAuthProvider:Nc,GoogleAuthProvider:Ac,OAuthProvider:Cc,SAMLAuthProvider:Pc,PhoneAuthProvider:Mh,PhoneMultiFactorGenerator:Hu,RecaptchaVerifier:Uh,TwitterAuthProvider:Rc,Auth:Rh,AuthCredential:hc,Error:Ji}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Vh.registerVersion("@firebase/auth-compat","0.5.6");var jh,zh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bh={},qh=qh||{},Kh=zh||self;function Wh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hh="closure_uid_"+(1e9*Math.random()>>>0),Qh=0;function Yh(e,t,n){return e.call.apply(e.bind,arguments)}function $h(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jh(e,t,n){return(Jh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yh:$h).apply(null,arguments)}function Xh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ed(){this.s=this.s,this.o=this.o}ed.prototype.s=!1,ed.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Hh)&&e[Hh]||(e[Hh]=++Qh))},ed.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const td=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function nd(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function rd(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Wh(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function id(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}id.prototype.h=function(){this.defaultPrevented=!0};var sd=function(){if(!Kh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Kh.addEventListener("test",e,t),Kh.removeEventListener("test",e,t)}catch(n){}return e}();function od(e){return/^[\s\xa0]*$/.test(e)}function ad(){var e=Kh.navigator;return e&&(e=e.userAgent)?e:""}function cd(e){return-1!=ad().indexOf(e)}function ld(e){return ld[" "](e),e}ld[" "]=function(){};var ud,hd,dd=cd("Opera"),fd=cd("Trident")||cd("MSIE"),pd=cd("Edge"),md=pd||fd,gd=cd("Gecko")&&!(-1!=ad().toLowerCase().indexOf("webkit")&&!cd("Edge"))&&!(cd("Trident")||cd("MSIE"))&&!cd("Edge"),vd=-1!=ad().toLowerCase().indexOf("webkit")&&!cd("Edge");function yd(){var e=Kh.document;return e?e.documentMode:void 0}e:{var wd="",bd=function(){var e=ad();return gd?/rv:([^\);]+)(\)|;)/.exec(e):pd?/Edge\/([\d\.]+)/.exec(e):fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vd?/WebKit\/(\S+)/.exec(e):dd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(bd&&(wd=bd?bd[1]:""),fd){var _d=yd();if(null!=_d&&_d>parseFloat(wd)){ud=String(_d);break e}}ud=wd}if(Kh.document&&fd){var Sd=yd();hd=Sd||(parseInt(ud,10)||void 0)}else hd=void 0;var Id=hd;function Ed(e,t){if(id.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gd){e:{try{ld(t.nodeName);var i=!0;break e}catch(Ct){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Td[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ed.$.h.call(this)}}Zh(Ed,id);var Td={2:"touch",3:"pen",4:"mouse"};Ed.prototype.h=function(){Ed.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var kd="closure_listenable_"+(1e6*Math.random()|0),Cd=0;function xd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Cd,this.fa=this.ia=!1}function Ad(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Nd(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Dd(e){const t={};for(const n in e)t[n]=e[n];return t}const Pd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rd(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Pd.length;t++)n=Pd[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Od(e){this.src=e,this.g={},this.h=0}function Ld(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=td(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ad(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Md(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Od.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Md(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new xd(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Fd="closure_lm_"+(1e6*Math.random()|0),Ud={};function Vd(e,t,n,r,i){if(r&&r.once)return zd(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Vd(e,t[s],n,r,i);return null}return n=Qd(n),e&&e[kd]?e.O(t,n,Gh(r)?!!r.capture:!!r,i):jd(e,t,n,!1,r,i)}function jd(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Gh(i)?!!i.capture:!!i,a=Gd(e);if(a||(e[Fd]=a=new Od(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Wd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)sd||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Kd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zd(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)zd(e,t[s],n,r,i);return null}return n=Qd(n),e&&e[kd]?e.P(t,n,Gh(r)?!!r.capture:!!r,i):jd(e,t,n,!0,r,i)}function Bd(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Bd(e,t[s],n,r,i);else r=Gh(r)?!!r.capture:!!r,n=Qd(n),e&&e[kd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Md(s=e.g[t],n,r,i))&&(Ad(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Gd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Md(t,n,r,i)),(n=-1<e?t[e]:null)&&qd(n))}function qd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[kd])Ld(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gd(t))?(Ld(n,e),0==n.h&&(n.src=null,t[Fd]=null)):Ad(e)}}}function Kd(e){return e in Ud?Ud[e]:Ud[e]="on"+e}function Wd(e,t){if(e.fa)e=!0;else{t=new Ed(t,this);var n=e.listener,r=e.la||e.src;e.ia&&qd(e),e=n.call(r,t)}return e}function Gd(e){return(e=e[Fd])instanceof Od?e:null}var Hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qd(e){return"function"===typeof e?e:(e[Hd]||(e[Hd]=function(t){return e.handleEvent(t)}),e[Hd])}function Yd(){ed.call(this),this.i=new Od(this),this.S=this,this.J=null}function $d(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new id(t,e);else if(t instanceof id)t.target=t.target||e;else{var i=t;Rd(t=new id(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Jd(o,r,!0,t)&&i}if(i=Jd(o=t.g=e,r,!0,t)&&i,i=Jd(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Jd(o=t.g=n[s],r,!1,t)&&i}function Jd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ld(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Zh(Yd,ed),Yd.prototype[kd]=!0,Yd.prototype.removeEventListener=function(e,t,n,r){Bd(this,e,t,n,r)},Yd.prototype.N=function(){if(Yd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ad(n[r]);delete t.g[e],t.h--}}this.J=null},Yd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Yd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xd=Kh.JSON.stringify;function Zd(){var e=af;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ef=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new tf),(e=>e.reset()));class tf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nf(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function rf(e){Kh.setTimeout((()=>{throw e}),0)}let sf,of=!1,af=new class{constructor(){this.h=this.g=null}add(e,t){const n=ef.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},cf=()=>{const e=Kh.Promise.resolve(void 0);sf=()=>{e.then(lf)}};var lf=()=>{for(var e;e=Zd();){try{e.h.call(e.g)}catch(n){rf(n)}var t=ef;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}of=!1};function uf(e,t){Yd.call(this),this.h=e||1,this.g=t||Kh,this.j=Jh(this.qb,this),this.l=Date.now()}function hf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function df(e,t,n){if("function"===typeof e)n&&(e=Jh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Kh.setTimeout(e,t||0)}function ff(e){e.g=df((()=>{e.g=null,e.i&&(e.i=!1,ff(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Zh(uf,Yd),(jh=uf.prototype).ga=!1,jh.T=null,jh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$d(this,"tick"),this.ga&&(hf(this),this.start()))}},jh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jh.N=function(){uf.$.N.call(this),hf(this),delete this.g};class pf extends ed{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ff(this)}N(){super.N(),this.g&&(Kh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mf(e){ed.call(this),this.h=e,this.g={}}Zh(mf,ed);var gf=[];function vf(e,t,n,r){Array.isArray(n)||(n&&(gf[0]=n.toString()),n=gf);for(var i=0;i<n.length;i++){var s=Vd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function yf(e){Nd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&qd(e)}),e),e.g={}}function wf(){this.g=!0}function bf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Xd(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}mf.prototype.N=function(){mf.$.N.call(this),yf(this)},mf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Ea=function(){this.g=!1},wf.prototype.info=function(){};var _f={},Sf=null;function If(){return Sf=Sf||new Yd}function Ef(e){id.call(this,_f.Ta,e)}function Tf(e){const t=If();$d(t,new Ef(t))}function kf(e,t){id.call(this,_f.STAT_EVENT,e),this.stat=t}function Cf(e){const t=If();$d(t,new kf(t,e))}function xf(e,t){id.call(this,_f.Ua,e),this.size=t}function Af(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Kh.setTimeout((function(){e()}),t)}_f.Ta="serverreachability",Zh(Ef,id),_f.STAT_EVENT="statevent",Zh(kf,id),_f.Ua="timingevent",Zh(xf,id);var Nf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Df={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pf(){}function Rf(e){return e.h||(e.h=e.i())}function Of(){}Pf.prototype.h=null;var Lf,Mf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ff(){id.call(this,"d")}function Uf(){id.call(this,"c")}function Vf(){}function jf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new mf(this),this.P=Bf,e=md?125:void 0,this.V=new uf(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zf}function zf(){this.i=null,this.g="",this.h=!1}Zh(Ff,id),Zh(Uf,id),Zh(Vf,Pf),Vf.prototype.g=function(){return new XMLHttpRequest},Vf.prototype.i=function(){return{}},Lf=new Vf;var Bf=45e3,qf={},Kf={};function Wf(e,t,n){e.L=1,e.A=up(sp(t)),e.u=n,e.S=!0,Gf(e,null)}function Gf(e,t){e.G=Date.now(),$f(e),e.B=sp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ip(n.i,"t",r),e.o=0,n=e.l.J,e.h=new zf,e.g=Em(e.l,n?t:null,!e.u),0<e.O&&(e.M=new pf(Jh(e.Pa,e,e.g),e.O)),vf(e.U,e.g,"readystatechange",e.nb),t=e.I?Dd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Tf(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Hf(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Qf(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Yf(e,n),r==Kf){4==t&&(e.s=4,Cf(14),i=!1),bf(e.j,e.m,null,"[Incomplete Response]");break}if(r==qf){e.s=4,Cf(15),bf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}bf(e.j,e.m,r,null),tp(e,r)}Hf(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Cf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),gm(t),t.M=!0,Cf(11))):(bf(e.j,e.m,n,"[Invalid Chunked Response]"),ep(e),Zf(e))}function Yf(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Kf:(n=Number(t.substring(n,r)),isNaN(n)?qf:(r+=1)+n>t.length?Kf:(t=t.slice(r,r+n),e.o=r+n,t))}function $f(e){e.Y=Date.now()+e.P,Jf(e,e.P)}function Jf(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Af(Jh(e.lb,e),t)}function Xf(e){e.C&&(Kh.clearTimeout(e.C),e.C=null)}function Zf(e){0==e.l.H||e.J||wm(e.l,e)}function ep(e){Xf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hf(e.V),yf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function tp(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Np(n.i,e)))if(!e.K&&Np(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(xt){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ym(n),cm(n)}mm(n),Cf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Af(Jh(n.ib,n),6e3));if(1>=Ap(n.i)&&n.oa){try{n.oa()}catch(xt){}n.oa=void 0}}else _m(n,11)}else if((e.K||n.g==e)&&ym(n),!od(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Dp(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,lp(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Im(r,r.J?r.pa:null,r.Y),o.K){Pp(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Xf(a),$f(a)),r.g=o}else pm(r);0<n.j.length&&um(n)}else"stop"!=l[0]&&"close"!=l[0]||_m(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?_m(n,7):am(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Tf()}catch(xt){}}function np(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(jh=jf.prototype).setTimeout=function(e){this.P=e},jh.nb=function(e){e=e.target;const t=this.M;t&&3==tm(e)?t.l():this.Pa(e)},jh.Pa=function(e){try{if(e==this.g)e:{const u=tm(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||md||this.g&&(this.h.h||this.g.ja()||nm(this.g)))){this.J||4!=u||7==t||Tf(),Xf(this);var n=this.g.da();this.ca=n;t:if(Hf(this)){var r=nm(this.g);e="";var i=r.length,s=4==tm(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ep(this),Zf(this);var o="";break t}this.h.i=new Kh.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!od(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Cf(12),ep(this),Zf(this);break e}bf(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tp(this,n)}this.S?(Qf(this,u,o),md&&this.i&&3==u&&(vf(this.U,this.V,"tick",this.mb),this.V.start())):(bf(this.j,this.m,o,null),tp(this,o)),4==u&&ep(this),this.i&&!this.J&&(4==u?wm(this.l,this):(this.i=!1,$f(this)))}else(function(e){const t={};e=(e.g&&2<=tm(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(od(e[r]))continue;var n=nf(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Cf(12)):(this.s=0,Cf(13)),ep(this),Zf(this)}}}catch(u){}},jh.mb=function(){if(this.g){var e=tm(this.g),t=this.g.ja();this.o<t.length&&(Xf(this),Qf(this,e,t),this.i&&4!=e&&$f(this))}},jh.cancel=function(){this.J=!0,ep(this)},jh.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Tf(),Cf(17)),ep(this),this.s=2,Zf(this)):Jf(this,this.Y-e)};var rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ip(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ip){this.h=e.h,op(this,e.j),this.s=e.s,this.g=e.g,ap(this,e.m),this.l=e.l;var t=e.i,n=new wp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),cp(this,n),this.o=e.o}else e&&(t=String(e).match(rp))?(this.h=!1,op(this,t[1]||"",!0),this.s=hp(t[2]||""),this.g=hp(t[3]||"",!0),ap(this,t[4]),this.l=hp(t[5]||"",!0),cp(this,t[6]||"",!0),this.o=hp(t[7]||"")):(this.h=!1,this.i=new wp(null,this.h))}function sp(e){return new ip(e)}function op(e,t,n){e.j=n?hp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ap(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cp(e,t,n){t instanceof wp?(e.i=t,function(e,t){t&&!e.j&&(bp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_p(this,t),Ip(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dp(t,vp)),e.i=new wp(t,e.h))}function lp(e,t,n){e.i.set(t,n)}function up(e){return lp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,fp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ip.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dp(t,pp,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(dp(t,pp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dp(n,"/"==n.charAt(0)?gp:mp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",dp(n,yp)),e.join("")};var pp=/[#\/\?@]/g,mp=/[#\?:]/g,gp=/[#\?]/g,vp=/[#\?@]/g,yp=/#/g;function wp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _p(e,t){bp(e),t=Ep(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Sp(e,t){return bp(e),t=Ep(e,t),e.g.has(t)}function Ip(e,t,n){_p(e,t),0<n.length&&(e.i=null,e.g.set(Ep(e,t),nd(n)),e.h+=n.length)}function Ep(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jh=wp.prototype).add=function(e,t){bp(this),this.i=null,e=Ep(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jh.forEach=function(e,t){bp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},jh.ta=function(){bp(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},jh.Z=function(e){bp(this);let t=[];if("string"===typeof e)Sp(this,e)&&(t=t.concat(this.g.get(Ep(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},jh.set=function(e,t){return bp(this),this.i=null,Sp(this,e=Ep(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},jh.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Tp=class{constructor(e,t){this.g=e,this.map=t}};function kp(e){this.l=e||Cp,Kh.PerformanceNavigationTiming?e=0<(e=Kh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Kh.g&&Kh.g.Ka&&Kh.g.Ka()&&Kh.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cp=10;function xp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ap(e){return e.h?1:e.g?e.g.size:0}function Np(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Dp(e,t){e.g?e.g.add(t):e.h=t}function Pp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rp(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return nd(e.i)}kp.prototype.cancel=function(){if(this.i=Rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Op,Lp=class{stringify(e){return Kh.JSON.stringify(e,void 0)}parse(e){return Kh.JSON.parse(e,void 0)}};function Mp(){this.g=new Lp}function Fp(e,t,n){const r=n||"";try{np(e,(function(e,n){let i=e;Gh(e)&&(i=Xd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(LA){throw t.push(r+"type="+encodeURIComponent("_badmap")),LA}}function Up(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Ct){}}function Vp(e){this.l=e.ec||null,this.j=e.ob||!1}function jp(e,t){Yd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=zp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zh(Vp,Pf),Vp.prototype.g=function(){return new jp(this.l,this.j)},Vp.prototype.i=(Op={},function(){return Op}),Zh(jp,Yd);var zp=0;function Bp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function qp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Kp(e)}function Kp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jh=jp.prototype).open=function(e,t){if(this.readyState!=zp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Kp(this)},jh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Kh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},jh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qp(this)),this.readyState=zp},jh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kp(this)),this.g&&(this.readyState=3,Kp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Kh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},jh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qp(this):Kp(this),3==this.readyState&&Bp(this)}},jh.Za=function(e){this.g&&(this.response=this.responseText=e,qp(this))},jh.Ya=function(e){this.g&&(this.response=e,qp(this))},jh.ka=function(){this.g&&qp(this)},jh.setRequestHeader=function(e,t){this.v.append(e,t)},jh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jh.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Wp=Kh.JSON.parse;function Gp(e){Yd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hp,this.L=this.M=!1}Zh(Gp,Yd);var Hp="",Qp=/^https?$/i,Yp=["POST","PUT"];function $p(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Jp(e),Zp(e)}function Jp(e){e.F||(e.F=!0,$d(e,"complete"),$d(e,"error"))}function Xp(e){if(e.h&&"undefined"!=typeof qh&&(!e.C[1]||4!=tm(e)||2!=e.da()))if(e.v&&4==tm(e))df(e.La,0,e);else if($d(e,"readystatechange"),4==tm(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(rp)[1]||null;!i&&Kh.self&&Kh.self.location&&(i=Kh.self.location.protocol.slice(0,-1)),r=!Qp.test(i?i.toLowerCase():"")}n=r}if(n)$d(e,"complete"),$d(e,"success");else{e.m=6;try{var s=2<tm(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Jp(e)}}finally{Zp(e)}}}function Zp(e,t){if(e.g){em(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||$d(e,"ready");try{n.onreadystatechange=r}catch(LA){}}}function em(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Kh.clearTimeout(e.A),e.A=null)}function tm(e){return e.g?e.g.readyState:0}function nm(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Hp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rm(e){let t="";return Nd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function im(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rm(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):lp(e,t,n))}function sm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function om(e){this.Ga=0,this.j=[],this.l=new wf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sm("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sm("baseRetryDelayMs",5e3,e),this.hb=sm("retryDelaySeedMs",1e4,e),this.eb=sm("forwardChannelMaxRetries",2,e),this.xa=sm("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new kp(e&&e.concurrentRequestLimit),this.Ja=new Mp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function am(e){if(lm(e),3==e.H){var t=e.W++,n=sp(e.I);if(lp(n,"SID",e.K),lp(n,"RID",t),lp(n,"TYPE","terminate"),dm(e,n),(t=new jf(e,e.l,t)).L=2,t.A=up(sp(n)),n=!1,Kh.navigator&&Kh.navigator.sendBeacon)try{n=Kh.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Kh.Image&&((new Image).src=t.A,n=!0),n||(t.g=Em(t.l,null),t.g.ha(t.A)),t.G=Date.now(),$f(t)}Sm(e)}function cm(e){e.g&&(gm(e),e.g.cancel(),e.g=null)}function lm(e){cm(e),e.u&&(Kh.clearTimeout(e.u),e.u=null),ym(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Kh.clearTimeout(e.m),e.m=null)}function um(e){if(!xp(e.i)&&!e.m){e.m=!0;var t=e.Na;sf||cf(),of||(sf(),of=!0),af.add(t,e),e.C=0}}function hm(e,t){var n;n=t?t.m:e.W++;const r=sp(e.I);lp(r,"SID",e.K),lp(r,"RID",n),lp(r,"AID",e.V),dm(e,r),e.o&&e.s&&im(r,e.o,e.s),n=new jf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=fm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Dp(e.i,n),Wf(n,r,t)}function dm(e,t){e.na&&Nd(e.na,(function(e,n){lp(t,n,e)})),e.h&&np({},(function(e,n){lp(t,n,e)}))}function fm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jh(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Fp(a,e,"req"+n+"_")}catch(Jt){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function pm(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sf||cf(),of||(sf(),of=!0),af.add(t,e),e.A=0}}function mm(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Af(Jh(e.Ma,e),bm(e,e.A)),e.A++,!0)}function gm(e){null!=e.B&&(Kh.clearTimeout(e.B),e.B=null)}function vm(e){e.g=new jf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sp(e.wa);lp(t,"RID","rpc"),lp(t,"SID",e.K),lp(t,"AID",e.V),lp(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&lp(t,"TO",e.qa),lp(t,"TYPE","xmlhttp"),dm(e,t),e.o&&e.s&&im(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=up(sp(t)),n.u=null,n.S=!0,Gf(n,e)}function ym(e){null!=e.v&&(Kh.clearTimeout(e.v),e.v=null)}function wm(e,t){var n=null;if(e.g==t){ym(e),gm(e),e.g=null;var r=2}else{if(!Np(e.i,t))return;n=t.F,Pp(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;$d(r=If(),new xf(r,n)),um(e)}else pm(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ap(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Af(Jh(e.Na,e,t),bm(e,e.C)),e.C++,!0))}(e,t)||2==r&&mm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_m(e,5);break;case 4:_m(e,10);break;case 3:_m(e,6);break;default:_m(e,2)}}function bm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function _m(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Jh(e.pb,e);n||(n=new ip("//www.google.com/images/cleardot.gif"),Kh.location&&"http"==Kh.location.protocol||op(n,"https"),up(n)),function(e,t){const n=new wf;if(Kh.Image){const r=new Image;r.onload=Xh(Up,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xh(Up,n,r,"TestLoadImage: error",!1,t),r.onabort=Xh(Up,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xh(Up,n,r,"TestLoadImage: timeout",!1,t),Kh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cf(2);e.H=0,e.h&&e.h.za(t),Sm(e),lm(e)}function Sm(e){if(e.H=0,e.ma=[],e.h){const t=Rp(e.i);0==t.length&&0==e.j.length||(rd(e.ma,t),rd(e.ma,e.j),e.i.i.length=0,nd(e.j),e.j.length=0),e.h.ya()}}function Im(e,t,n){var r=n instanceof ip?sp(n):new ip(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ap(r,r.m);else{var i=Kh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ip(null);r&&op(s,r),t&&(s.g=t),i&&ap(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&lp(r,n,t),lp(r,"VER",e.ra),dm(e,r),r}function Em(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Gp(new Vp({ob:n})):new Gp(e.va)).Oa(e.J),t}function Tm(){}function km(){if(fd&&!(10<=Number(Id)))throw Error("Environmental error: no available transport.")}function Cm(e,t){Yd.call(this),this.g=new om(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!od(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!od(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nm(this)}function xm(e){Ff.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Am(){Uf.call(this),this.status=1}function Nm(e){this.g=e}function Dm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Rm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(jh=Gp.prototype).Oa=function(e){this.M=e},jh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lf.g(),this.C=this.u?Rf(this.u):Rf(Lf),this.g.onreadystatechange=Jh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Ct){return void $p(this,Ct)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Kh.FormData&&e instanceof Kh.FormData,!(0<=td(Yp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{em(this),0<this.B&&((this.L=function(e){return fd&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jh(this.ua,this)):this.A=df(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Ct){$p(this,Ct)}},jh.ua=function(){"undefined"!=typeof qh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$d(this,"timeout"),this.abort(8))},jh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$d(this,"complete"),$d(this,"abort"),Zp(this))},jh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zp(this,!0)),Gp.$.N.call(this)},jh.La=function(){this.s||(this.G||this.v||this.l?Xp(this):this.kb())},jh.kb=function(){Xp(this)},jh.isActive=function(){return!!this.g},jh.da=function(){try{return 2<tm(this)?this.g.status:-1}catch(Op){return-1}},jh.ja=function(){try{return this.g?this.g.responseText:""}catch(Op){return""}},jh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Wp(t)}},jh.Ia=function(){return this.m},jh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(jh=om.prototype).ra=8,jh.H=1,jh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new jf(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Dd(s),Rd(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=fm(this,i,t),lp(n=sp(this.I),"RID",e),lp(n,"CVER",22),this.F&&lp(n,"X-HTTP-Session-Id",this.F),dm(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(rm(s)))+"&"+t:this.o&&im(n,this.o,s)),Dp(this.i,i),this.bb&&lp(n,"TYPE","init"),this.P?(lp(n,"$req",t),lp(n,"SID","null"),i.aa=!0,Wf(i,n,null)):Wf(i,n,t),this.H=2}}else 3==this.H&&(e?hm(this,e):0==this.j.length||xp(this.i)||hm(this))},jh.Ma=function(){if(this.u=null,vm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Af(Jh(this.jb,this),e)}},jh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cf(10),cm(this),vm(this))},jh.ib=function(){null!=this.v&&(this.v=null,cm(this),mm(this),Cf(19))},jh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Cf(2)):(this.l.info("Failed to ping google.com"),Cf(1))},jh.isActive=function(){return!!this.h&&this.h.isActive(this)},(jh=Tm.prototype).Ba=function(){},jh.Aa=function(){},jh.za=function(){},jh.ya=function(){},jh.isActive=function(){return!0},jh.Va=function(){},km.prototype.g=function(e,t){return new Cm(e,t)},Zh(Cm,Yd),Cm.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Cf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Im(e,null,e.Y),um(e)},Cm.prototype.close=function(){am(this.g)},Cm.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Xd(e),e=n);t.j.push(new Tp(t.fb++,e)),3==t.H&&um(t)},Cm.prototype.N=function(){this.g.h=null,delete this.j,am(this.g),delete this.g,Cm.$.N.call(this)},Zh(xm,Ff),Zh(Am,Uf),Zh(Nm,Tm),Nm.prototype.Ba=function(){$d(this.g,"a")},Nm.prototype.Aa=function(e){$d(this.g,new xm(e))},Nm.prototype.za=function(e){$d(this.g,new Am)},Nm.prototype.ya=function(){$d(this.g,"b")},Zh(Dm,(function(){this.blockSize=-1})),Dm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Dm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Pm(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Pm(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Pm(this,r),i=0;break}}this.h=i,this.i+=t},Dm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Om={};function Lm(e){return-128<=e&&128>e?function(e,t){var n=Om;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Rm([0|e],0>e?-1:0)})):new Rm([0|e],0>e?-1:0)}function Mm(e){if(isNaN(e)||!isFinite(e))return Um;if(0>e)return qm(Mm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Fm;return new Rm(t,0)}var Fm=4294967296,Um=Lm(0),Vm=Lm(1),jm=Lm(16777216);function zm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Bm(e){return-1==e.h}function qm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Rm(n,~e.h).add(Vm)}function Km(e,t){return e.add(qm(t))}function Wm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Gm(e,t){this.g=e,this.h=t}function Hm(e,t){if(zm(t))throw Error("division by zero");if(zm(e))return new Gm(Um,Um);if(Bm(e))return t=Hm(qm(e),t),new Gm(qm(t.g),qm(t.h));if(Bm(t))return t=Hm(e,qm(t)),new Gm(qm(t.g),t.h);if(30<e.g.length){if(Bm(e)||Bm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Vm,r=t;0>=r.X(e);)n=Qm(n),r=Qm(r);var i=Ym(n,1),s=Ym(r,1);for(r=Ym(r,2),n=Ym(n,2);!zm(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Ym(r,1),n=Ym(n,1)}return t=Km(e,i.R(t)),new Gm(i,t)}for(i=Um;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Mm(n)).R(t);Bm(o)||0<o.X(e);)o=(s=Mm(n-=r)).R(t);zm(s)&&(s=Vm),i=i.add(s),e=Km(e,o)}return new Gm(i,e)}function Qm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Rm(n,e.h)}function Ym(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Rm(i,e.h)}(jh=Rm.prototype).ea=function(){if(Bm(this))return-qm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Fm+r)*t,t*=Fm}return e},jh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zm(this))return"0";if(Bm(this))return"-"+qm(this).toString(e);for(var t=Mm(Math.pow(e,6)),n=this,r="";;){var i=Hm(n,t).g,s=((0<(n=Km(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zm(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},jh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},jh.X=function(e){return Bm(e=Km(this,e))?-1:zm(e)?0:1},jh.abs=function(){return Bm(this)?qm(this):this},jh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Rm(n,-2147483648&n[n.length-1]?-1:0)},jh.R=function(e){if(zm(this)||zm(e))return Um;if(Bm(this))return Bm(e)?qm(this).R(qm(e)):qm(qm(this).R(e));if(Bm(e))return qm(this.R(qm(e)));if(0>this.X(jm)&&0>e.X(jm))return Mm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Wm(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Wm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Wm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Wm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Rm(n,0)},jh.gb=function(e){return Hm(this,e).h},jh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Rm(n,this.h&e.h)},jh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Rm(n,this.h|e.h)},jh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Rm(n,this.h^e.h)},km.prototype.createWebChannel=km.prototype.g,Cm.prototype.send=Cm.prototype.u,Cm.prototype.open=Cm.prototype.m,Cm.prototype.close=Cm.prototype.close,Nf.NO_ERROR=0,Nf.TIMEOUT=8,Nf.HTTP_ERROR=6,Df.COMPLETE="complete",Of.EventType=Mf,Mf.OPEN="a",Mf.CLOSE="b",Mf.ERROR="c",Mf.MESSAGE="d",Yd.prototype.listen=Yd.prototype.O,Gp.prototype.listenOnce=Gp.prototype.P,Gp.prototype.getLastError=Gp.prototype.Sa,Gp.prototype.getLastErrorCode=Gp.prototype.Ia,Gp.prototype.getStatus=Gp.prototype.da,Gp.prototype.getResponseJson=Gp.prototype.Wa,Gp.prototype.getResponseText=Gp.prototype.ja,Gp.prototype.send=Gp.prototype.ha,Gp.prototype.setWithCredentials=Gp.prototype.Oa,Dm.prototype.digest=Dm.prototype.l,Dm.prototype.reset=Dm.prototype.reset,Dm.prototype.update=Dm.prototype.j,Rm.prototype.add=Rm.prototype.add,Rm.prototype.multiply=Rm.prototype.R,Rm.prototype.modulo=Rm.prototype.gb,Rm.prototype.compare=Rm.prototype.X,Rm.prototype.toNumber=Rm.prototype.ea,Rm.prototype.toString=Rm.prototype.toString,Rm.prototype.getBits=Rm.prototype.D,Rm.fromNumber=Mm,Rm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return qm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Mm(Math.pow(n,8)),i=Um,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Mm(Math.pow(n,o)),i=i.R(o).add(Mm(a))):i=(i=i.R(r)).add(Mm(a))}return i};var $m=Bh.createWebChannelTransport=function(){return new km},Jm=Bh.getStatEventTarget=function(){return If()},Xm=Bh.ErrorCode=Nf,Zm=Bh.EventType=Df,eg=Bh.Event=_f,tg=Bh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ng=(Bh.FetchXmlHttpFactory=Vp,Bh.WebChannel=Of),rg=Bh.XhrIo=Gp,ig=Bh.Md5=Dm,sg=Bh.Integer=Rm;const og="@firebase/firestore";class ag{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ag.UNAUTHENTICATED=new ag(null),ag.GOOGLE_CREDENTIALS=new ag("google-credentials-uid"),ag.FIRST_PARTY=new ag("first-party-uid"),ag.MOCK_USER=new ag("mock-user");let cg="10.11.0";const lg=new _s("@firebase/firestore");function ug(){return lg.logLevel}function hg(e){if(lg.logLevel<=gs.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(pg);lg.debug("Firestore (".concat(cg,"): ").concat(e),...i)}}function dg(e){if(lg.logLevel<=gs.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(pg);lg.error("Firestore (".concat(cg,"): ").concat(e),...i)}}function fg(e){if(lg.logLevel<=gs.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(pg);lg.warn("Firestore (".concat(cg,"): ").concat(e),...i)}}function pg(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(cg,") INTERNAL ASSERTION FAILED: ")+e;throw dg(t),new Error(t)}function gg(e,t){e||mg()}function vg(e,t){return e}const yg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wg extends Ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bg{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _g{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Sg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ag.UNAUTHENTICATED)))}shutdown(){}}class Ig{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Eg{constructor(e){this.t=e,this.currentUser=ag.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new bg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bg,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{hg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(hg("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bg)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(hg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(gg("string"==typeof t.accessToken),new _g(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gg(null===e||"string"==typeof e),new ag(e)}}class Tg{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ag.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kg{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Tg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ag.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xg{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&hg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,hg("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{hg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):hg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(gg("string"==typeof e.token),this.R=e.token,new Cg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ag(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ag(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Dg(e,t){return e<t?-1:e>t?1:0}function Pg(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Rg(e){return e+"\0"}class Og{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wg(yg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wg(yg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wg(yg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wg(yg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Og.fromMillis(Date.now())}static fromDate(e){return Og.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Og(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dg(this.nanoseconds,e.nanoseconds):Dg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lg{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lg(e)}static min(){return new Lg(new Og(0,0))}static max(){return new Lg(new Og(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mg{constructor(e,t,n){void 0===t?t=0:t>e.length&&mg(),void 0===n?n=e.length-t:n>e.length-t&&mg(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mg?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fg extends Mg{construct(e,t,n){return new Fg(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new wg(yg.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Fg(e)}static emptyPath(){return new Fg([])}}const Ug=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vg extends Mg{construct(e,t,n){return new Vg(e,t,n)}static isValidIdentifier(e){return Ug.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vg.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new wg(yg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new wg(yg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new wg(yg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new wg(yg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vg(t)}static emptyPath(){return new Vg([])}}class jg{constructor(e){this.path=e}static fromPath(e){return new jg(Fg.fromString(e))}static fromName(e){return new jg(Fg.fromString(e).popFirst(5))}static empty(){return new jg(Fg.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fg.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fg.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jg(new Fg(e.slice()))}}class zg{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Bg(e){return e.fields.find((e=>2===e.kind))}function qg(e){return e.fields.filter((e=>2!==e.kind))}zg.UNKNOWN_ID=-1;class Kg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wg(0,Qg.min())}}function Gg(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Lg.fromTimestamp(1e9===r?new Og(n+1,0):new Og(n,r));return new Qg(i,jg.empty(),t)}function Hg(e){return new Qg(e.readTime,e.key,-1)}class Qg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Qg(Lg.min(),jg.empty(),-1)}static max(){return new Qg(Lg.max(),jg.empty(),-1)}}function Yg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=jg.comparator(e.documentKey,t.documentKey),0!==n?n:Dg(e.largestBatchId,t.largestBatchId))}const $g="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Xg(e){if(e.code!==yg.FAILED_PRECONDITION||e.message!==$g)throw e;hg("LocalStore","Unexpectedly lost primary lease")}class Zg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Zg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Zg?t:Zg.resolve(t)}catch(e){return Zg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Zg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Zg.reject(t)}static resolve(e){return new Zg(((t,n)=>{t(e)}))}static reject(e){return new Zg(((t,n)=>{n(e)}))}static waitFor(e){return new Zg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Zg.resolve(!1);for(const n of e)t=t.next((e=>e?Zg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Zg(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Zg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ev{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new bg,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new rv(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=cv(t.target.error);this.V.reject(new rv(e,n))}}static open(e,t,n,r){try{return new ev(t,e.transaction(r,n))}catch(e){throw new rv(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(hg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sv(t)}}class tv{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===tv.S(qi())&&dg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return hg("SimpleDb","Removing database:",e),ov(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!$i())return!1;if(tv.C())return!0;const e=qi(),t=tv.S(e),n=0<t&&t<10,r=tv.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(hg("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new rv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new wg(yg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new wg(yg.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new rv(e,r))},r.onupgradeneeded=e=>{hg("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{hg("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=ev.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Zg.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(hg("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class nv{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ov(this.k.delete())}}class rv extends wg{constructor(e,t){super(yg.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function iv(e){return"IndexedDbTransactionError"===e.name}class sv{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(hg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ov(n)}add(e){return hg("SimpleDb","ADD",this.store.name,e,e),ov(this.store.add(e))}get(e){return ov(this.store.get(e)).next((t=>(void 0===t&&(t=null),hg("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return hg("SimpleDb","DELETE",this.store.name,e),ov(this.store.delete(e))}count(){return hg("SimpleDb","COUNT",this.store.name),ov(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Zg(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Zg(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){hg("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Zg(((n,r)=>{t.onerror=e=>{const t=cv(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Zg(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new nv(i),o=t(i.primaryKey,i.value,s);if(o instanceof Zg){const e=o.catch((e=>(s.done(),Zg.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Zg.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ov(e){return new Zg(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=cv(e.target.error);n(t)}}))}let av=!1;function cv(e){const t=tv.S(qi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new wg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return av||(av=!0,setTimeout((()=>{throw e}),0)),e}}return e}class lv{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){hg("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{hg("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){iv(e)?hg("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Xg(e)}await this.ee(6e4)}))}}class uv{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Zg.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return hg("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(hg("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Hg(t);Yg(r,n)>0&&(n=r)})),new Qg(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class hv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function dv(e){return null==e}function fv(e){return 0===e&&1/e==-1/0}function pv(e){return"number"==typeof e&&Number.isInteger(e)&&!fv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function mv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=vv(t)),t=gv(e.get(n),t);return vv(t)}function gv(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function vv(e){return e+"\x01\x01"}function yv(e){const t=e.length;if(gg(t>=2),2===t)return gg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Fg.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&mg(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:mg()}s=t+2}return new Fg(r)}hv._e=-1;const wv=["userId","batchId"];function bv(e,t){return[e,mv(t)]}function _v(e,t,n){return[e,mv(t),n]}const Sv={},Iv=["prefixPath","collectionGroup","readTime","documentId"],Ev=["prefixPath","collectionGroup","documentId"],Tv=["collectionGroup","readTime","prefixPath","documentId"],kv=["canonicalId","targetId"],Cv=["targetId","path"],xv=["path","targetId"],Av=["collectionId","parent"],Nv=["indexId","uid"],Dv=["uid","sequenceNumber"],Pv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rv=["indexId","uid","orderedDocumentKey"],Ov=["userId","collectionPath","documentId"],Lv=["userId","collectionPath","largestBatchId"],Mv=["userId","collectionGroup","largestBatchId"],Fv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Uv=[...Fv,"documentOverlays"],Vv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jv=Vv,zv=[...jv,"indexConfiguration","indexState","indexEntries"],Bv=zv;class qv extends Jg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Kv(e,t){const n=vg(e);return tv.M(n.ae,t)}function Wv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Hv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Qv{constructor(e,t){this.comparator=e,this.root=t||$v.EMPTY}insert(e,t){return new Qv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$v.BLACK,null,null))}remove(e){return new Qv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$v.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yv(this.root,e,this.comparator,!0)}}class Yv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $v{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:$v.RED,this.left=null!=r?r:$v.EMPTY,this.right=null!=i?i:$v.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new $v(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $v.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return $v.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$v.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$v.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mg();if(this.right.isRed())throw mg();const e=this.left.check();if(e!==this.right.check())throw mg();return e+(this.isRed()?0:1)}}$v.EMPTY=null,$v.RED=!0,$v.BLACK=!1,$v.EMPTY=new class{constructor(){this.size=0}get key(){throw mg()}get value(){throw mg()}get color(){throw mg()}get left(){throw mg()}get right(){throw mg()}copy(e,t,n,r,i){return this}insert(e,t,n){return new $v(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jv{constructor(e){this.comparator=e,this.data=new Qv(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Jv))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jv(this.comparator);return t.data=e,t}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zv(e){return e.hasNext()?e.getNext():void 0}class ey{constructor(e){this.fields=e,e.sort(Vg.comparator)}static empty(){return new ey([])}unionWith(e){let t=new Jv(Vg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ey(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pg(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ty extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ny{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ty("Invalid base64 string: "+e):e}}(e);return new ny(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ny(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ny.EMPTY_BYTE_STRING=new ny("");const ry=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iy(e){if(gg(!!e),"string"==typeof e){let t=0;const n=ry.exec(e);if(gg(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sy(e.seconds),nanos:sy(e.nanos)}}function sy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function oy(e){return"string"==typeof e?ny.fromBase64String(e):ny.fromUint8Array(e)}function ay(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function cy(e){const t=e.mapValue.fields.__previous_value__;return ay(t)?cy(t):t}function ly(e){const t=iy(e.mapValue.fields.__local_write_time__.timestampValue);return new Og(t.seconds,t.nanos)}class uy{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class hy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hy("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hy&&e.projectId===this.projectId&&e.database===this.database}}const dy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fy={nullValue:"NULL_VALUE"};function py(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ay(e)?4:xy(e)?9007199254740991:10:mg()}function my(e,t){if(e===t)return!0;const n=py(e);if(n!==py(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ly(e).isEqual(ly(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=iy(e.timestampValue),r=iy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return oy(e.bytesValue).isEqual(oy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sy(e.geoPointValue.latitude)===sy(t.geoPointValue.latitude)&&sy(e.geoPointValue.longitude)===sy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sy(e.integerValue)===sy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=sy(e.doubleValue),r=sy(t.doubleValue);return n===r?fv(n)===fv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pg(e.arrayValue.values||[],t.arrayValue.values||[],my);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Wv(n)!==Wv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!my(n[i],r[i])))return!1;return!0}(e,t);default:return mg()}}function gy(e,t){return void 0!==(e.values||[]).find((e=>my(e,t)))}function vy(e,t){if(e===t)return 0;const n=py(e),r=py(t);if(n!==r)return Dg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=sy(e.integerValue||e.doubleValue),r=sy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yy(e.timestampValue,t.timestampValue);case 4:return yy(ly(e),ly(t));case 5:return Dg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=oy(e),r=oy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Dg(n[i],r[i]);if(0!==e)return e}return Dg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Dg(sy(e.latitude),sy(t.latitude));return 0!==n?n:Dg(sy(e.longitude),sy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=vy(n[i],r[i]);if(e)return e}return Dg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===dy.mapValue&&t===dy.mapValue)return 0;if(e===dy.mapValue)return 1;if(t===dy.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Dg(r[o],s[o]);if(0!==e)return e;const t=vy(n[r[o]],i[s[o]]);if(0!==t)return t}return Dg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw mg()}}function yy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Dg(e,t);const n=iy(e),r=iy(t),i=Dg(n.seconds,r.seconds);return 0!==i?i:Dg(n.nanos,r.nanos)}function wy(e){return by(e)}function by(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=iy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return oy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return jg.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=by(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(by(e.fields[i]));return n+"}"}(e.mapValue):mg()}function _y(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Sy(e){return!!e&&"integerValue"in e}function Iy(e){return!!e&&"arrayValue"in e}function Ey(e){return!!e&&"nullValue"in e}function Ty(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ky(e){return!!e&&"mapValue"in e}function Cy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Gv(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Cy(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cy(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ay(e){return"nullValue"in e?fy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?_y(hy.empty(),jg.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:mg()}function Ny(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?_y(hy.empty(),jg.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?dy:mg()}function Dy(e,t){const n=vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Py(e,t){const n=vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Ry{constructor(e){this.value=e}static empty(){return new Ry({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ky(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cy(t)}setAll(e){let t=Vg.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Cy(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ky(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return my(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ky(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gv(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ry(Cy(this.value))}}function Oy(e){const t=[];return Gv(e.fields,((e,n)=>{const r=new Vg([e]);if(ky(n)){const e=Oy(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ey(t)}class Ly{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ly(e,0,Lg.min(),Lg.min(),Lg.min(),Ry.empty(),0)}static newFoundDocument(e,t,n,r){return new Ly(e,1,t,Lg.min(),n,r,0)}static newNoDocument(e,t){return new Ly(e,2,t,Lg.min(),Lg.min(),Ry.empty(),0)}static newUnknownDocument(e,t){return new Ly(e,3,t,Lg.min(),Lg.min(),Ry.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ry.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ry.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ly&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ly(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class My{constructor(e,t){this.position=e,this.inclusive=t}}function Fy(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?jg.comparator(jg.fromName(o.referenceValue),n.key):vy(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Uy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!my(e.position[n],t.position[n]))return!1;return!0}class Vy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function jy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class zy{}class By extends zy{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Xy(e,t,n):"array-contains"===t?new nw(e,n):"in"===t?new rw(e,n):"not-in"===t?new iw(e,n):"array-contains-any"===t?new sw(e,n):new By(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Zy(e,n):new ew(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vy(t,this.value)):null!==t&&py(this.value)===py(t)&&this.matchesComparison(vy(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mg()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qy extends zy{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new qy(e,t)}matches(e){return Ky(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ky(e){return"and"===e.op}function Wy(e){return"or"===e.op}function Gy(e){return Hy(e)&&Ky(e)}function Hy(e){for(const t of e.filters)if(t instanceof qy)return!1;return!0}function Qy(e){if(e instanceof By)return e.field.canonicalString()+e.op.toString()+wy(e.value);if(Gy(e))return e.filters.map((e=>Qy(e))).join(",");{const t=e.filters.map((e=>Qy(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Yy(e,t){return e instanceof By?function(e,t){return t instanceof By&&e.op===t.op&&e.field.isEqual(t.field)&&my(e.value,t.value)}(e,t):e instanceof qy?function(e,t){return t instanceof qy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Yy(n,t.filters[r])),!0)}(e,t):void mg()}function $y(e,t){const n=e.filters.concat(t);return qy.create(n,e.op)}function Jy(e){return e instanceof By?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(wy(e.value))}(e):e instanceof qy?function(e){return e.op.toString()+" {"+e.getFilters().map(Jy).join(" ,")+"}"}(e):"Filter"}class Xy extends By{constructor(e,t,n){super(e,t,n),this.key=jg.fromName(n.referenceValue)}matches(e){const t=jg.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zy extends By{constructor(e,t){super(e,"in",t),this.keys=tw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ew extends By{constructor(e,t){super(e,"not-in",t),this.keys=tw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>jg.fromName(e.referenceValue)))}class nw extends By{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Iy(t)&&gy(t.arrayValue,this.value)}}class rw extends By{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gy(this.value.arrayValue,t)}}class iw extends By{constructor(e,t){super(e,"not-in",t)}matches(e){if(gy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gy(this.value.arrayValue,t)}}class sw extends By{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Iy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>gy(this.value.arrayValue,e)))}}class ow{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function aw(e){return new ow(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function cw(e){const t=vg(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Qy(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),dv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>wy(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>wy(e))).join(",")),t.ce=e}return t.ce}function lw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uy(e.startAt,t.startAt)&&Uy(e.endAt,t.endAt)}function uw(e){return jg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function hw(e,t){return e.filters.filter((e=>e instanceof By&&e.field.isEqual(t)))}function dw(e,t,n){let r=fy,i=!0;for(const s of hw(e,t)){let e=fy,t=!0;switch(s.op){case"<":case"<=":e=Ay(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=fy}Dy({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Dy({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function fw(e,t,n){let r=dy,i=!0;for(const s of hw(e,t)){let e=dy,t=!0;switch(s.op){case">=":case">":e=Ny(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=dy}Py({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Py({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class pw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function mw(e,t,n,r,i,s,o,a){return new pw(e,t,n,r,i,s,o,a)}function gw(e){return new pw(e)}function vw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yw(e){return null!==e.collectionGroup}function ww(e){const t=vg(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Jv(Vg.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Vy(r,n))})),e.has(Vg.keyField().canonicalString())||t.le.push(new Vy(Vg.keyField(),n))}return t.le}function bw(e){const t=vg(e);return t.he||(t.he=_w(t,ww(e))),t.he}function _w(e,t){if("F"===e.limitType)return aw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Vy(e.field,t)}));const n=e.endAt?new My(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new My(e.startAt.position,e.startAt.inclusive):null;return aw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sw(e,t){const n=e.filters.concat([t]);return new pw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Iw(e,t,n){return new pw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ew(e,t){return lw(bw(e),bw(t))&&e.limitType===t.limitType}function Tw(e){return"".concat(cw(bw(e)),"|lt:").concat(e.limitType)}function kw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Jy(e))).join(", "),"]")),dv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>wy(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>wy(e))).join(",")),"Target(".concat(t,")")}(bw(e)),"; limitType=").concat(e.limitType,")")}function Cw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):jg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ww(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Fy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ww(e),t))&&!(e.endAt&&!function(e,t,n){const r=Fy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ww(e),t))}(e,t)}function xw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Aw(e){return(t,n)=>{let r=!1;for(const i of ww(e)){const e=Nw(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Nw(e,t,n){const r=e.field.isKeyField()?jg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vy(r,i):mg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return mg()}}class Dw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gv(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}const Pw=new Qv(jg.comparator);function Rw(){return Pw}const Ow=new Qv(jg.comparator);function Lw(){let e=Ow;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Mw(e){let t=Ow;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Fw(){return Vw()}function Uw(){return Vw()}function Vw(){return new Dw((e=>e.toString()),((e,t)=>e.isEqual(t)))}const jw=new Qv(jg.comparator),zw=new Jv(jg.comparator);function Bw(){let e=zw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const qw=new Jv(Dg);function Kw(){return qw}function Ww(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fv(t)?"-0":t}}function Gw(e){return{integerValue:""+e}}function Hw(e,t){return pv(t)?Gw(t):Ww(e,t)}class Qw{constructor(){this._=void 0}}function Yw(e,t,n){return e instanceof Xw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ay(t)&&(t=cy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zw?eb(e,t):e instanceof tb?nb(e,t):function(e,t){const n=Jw(e,t),r=ib(n)+ib(e.Ie);return Sy(n)&&Sy(e.Ie)?Gw(r):Ww(e.serializer,r)}(e,t)}function $w(e,t,n){return e instanceof Zw?eb(e,t):e instanceof tb?nb(e,t):n}function Jw(e,t){return e instanceof rb?function(e){return Sy(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xw extends Qw{}class Zw extends Qw{constructor(e){super(),this.elements=e}}function eb(e,t){const n=sb(t);for(const r of e.elements)n.some((e=>my(e,r)))||n.push(r);return{arrayValue:{values:n}}}class tb extends Qw{constructor(e){super(),this.elements=e}}function nb(e,t){let n=sb(t);for(const r of e.elements)n=n.filter((e=>!my(e,r)));return{arrayValue:{values:n}}}class rb extends Qw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ib(e){return sy(e.integerValue||e.doubleValue)}function sb(e){return Iy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ob{constructor(e,t){this.field=e,this.transform=t}}class ab{constructor(e,t){this.version=e,this.transformResults=t}}class cb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cb}static exists(e){return new cb(void 0,e)}static updateTime(e){return new cb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ub{}function hb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _b(e.key,cb.none()):new gb(e.key,e.data,cb.none());{const n=e.data,r=Ry.empty();let i=new Jv(Vg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new vb(e.key,r,new ey(i.toArray()),cb.none())}}function db(e,t,n){e instanceof gb?function(e,t,n){const r=e.value.clone(),i=wb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vb?function(e,t,n){if(!lb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=wb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function fb(e,t,n,r){return e instanceof gb?function(e,t,n,r){if(!lb(e.precondition,t))return n;const i=e.value.clone(),s=bb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vb?function(e,t,n,r){if(!lb(e.precondition,t))return n;const i=bb(e.fieldTransforms,r,t),s=t.data;return s.setAll(yb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return lb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function pb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Jw(r.transform,e||null);null!=i&&(null===n&&(n=Ry.empty()),n.set(r.field,i))}return n||null}function mb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Pg(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zw&&t instanceof Zw||e instanceof tb&&t instanceof tb?Pg(e.elements,t.elements,my):e instanceof rb&&t instanceof rb?my(e.Ie,t.Ie):e instanceof Xw&&t instanceof Xw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gb extends ub{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vb extends ub{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function wb(e,t,n){const r=new Map;gg(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,$w(o,a,n[i]))}return r}function bb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Yw(e,s,t))}return r}class _b extends ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sb extends ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ib{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&db(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=fb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=fb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Uw();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=hb(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Lg.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bw())}isEqual(e){return this.batchId===e.batchId&&Pg(this.mutations,e.mutations,((e,t)=>mb(e,t)))&&Pg(this.baseMutations,e.baseMutations,((e,t)=>mb(e,t)))}}class Eb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){gg(e.mutations.length===n.length);let r=jw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Eb(e,t,n,r)}}class Tb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class kb{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cb,xb;function Ab(e){switch(e){default:return mg();case yg.CANCELLED:case yg.UNKNOWN:case yg.DEADLINE_EXCEEDED:case yg.RESOURCE_EXHAUSTED:case yg.INTERNAL:case yg.UNAVAILABLE:case yg.UNAUTHENTICATED:return!1;case yg.INVALID_ARGUMENT:case yg.NOT_FOUND:case yg.ALREADY_EXISTS:case yg.PERMISSION_DENIED:case yg.FAILED_PRECONDITION:case yg.ABORTED:case yg.OUT_OF_RANGE:case yg.UNIMPLEMENTED:case yg.DATA_LOSS:return!0}}function Nb(e){if(void 0===e)return dg("GRPC error has no .code"),yg.UNKNOWN;switch(e){case Cb.OK:return yg.OK;case Cb.CANCELLED:return yg.CANCELLED;case Cb.UNKNOWN:return yg.UNKNOWN;case Cb.DEADLINE_EXCEEDED:return yg.DEADLINE_EXCEEDED;case Cb.RESOURCE_EXHAUSTED:return yg.RESOURCE_EXHAUSTED;case Cb.INTERNAL:return yg.INTERNAL;case Cb.UNAVAILABLE:return yg.UNAVAILABLE;case Cb.UNAUTHENTICATED:return yg.UNAUTHENTICATED;case Cb.INVALID_ARGUMENT:return yg.INVALID_ARGUMENT;case Cb.NOT_FOUND:return yg.NOT_FOUND;case Cb.ALREADY_EXISTS:return yg.ALREADY_EXISTS;case Cb.PERMISSION_DENIED:return yg.PERMISSION_DENIED;case Cb.FAILED_PRECONDITION:return yg.FAILED_PRECONDITION;case Cb.ABORTED:return yg.ABORTED;case Cb.OUT_OF_RANGE:return yg.OUT_OF_RANGE;case Cb.UNIMPLEMENTED:return yg.UNIMPLEMENTED;case Cb.DATA_LOSS:return yg.DATA_LOSS;default:return mg()}}(xb=Cb||(Cb={}))[xb.OK=0]="OK",xb[xb.CANCELLED=1]="CANCELLED",xb[xb.UNKNOWN=2]="UNKNOWN",xb[xb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xb[xb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xb[xb.NOT_FOUND=5]="NOT_FOUND",xb[xb.ALREADY_EXISTS=6]="ALREADY_EXISTS",xb[xb.PERMISSION_DENIED=7]="PERMISSION_DENIED",xb[xb.UNAUTHENTICATED=16]="UNAUTHENTICATED",xb[xb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xb[xb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xb[xb.ABORTED=10]="ABORTED",xb[xb.OUT_OF_RANGE=11]="OUT_OF_RANGE",xb[xb.UNIMPLEMENTED=12]="UNIMPLEMENTED",xb[xb.INTERNAL=13]="INTERNAL",xb[xb.UNAVAILABLE=14]="UNAVAILABLE",xb[xb.DATA_LOSS=15]="DATA_LOSS";let Db=null;function Pb(){return new TextEncoder}const Rb=new sg([4294967295,4294967295],0);function Ob(e){const t=Pb().encode(e),n=new ig;return n.update(t),new Uint8Array(n.digest())}function Lb(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new sg([n,r],0),new sg([i,s],0)]}class Mb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Fb("Invalid padding: ".concat(t));if(n<0)throw new Fb("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Fb("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Fb("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=sg.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(sg.fromNumber(n)));return 1===r.compare(Rb)&&(r=new sg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Ob(e),[n,r]=Lb(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Mb(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Ob(e),[n,r]=Lb(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Fb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ub{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Vb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ub(Lg.min(),r,new Qv(Dg),Rw(),Bw())}}class Vb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Vb(n,t,Bw(),Bw(),Bw())}}class jb{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class zb{constructor(e,t){this.targetId=e,this.fe=t}}class Bb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ny.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class qb{constructor(){this.ge=0,this.pe=Gb(),this.ye=ny.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Bw(),t=Bw(),n=Bw();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:mg()}})),new Vb(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Gb()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,gg(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Kb{constructor(e){this.Be=e,this.ke=new Map,this.qe=Rw(),this.Qe=Wb(),this.Ke=new Qv(Dg)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:mg()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(uw(i))if(0===n){const e=new jg(i.path);this.We(t,e,Ly.newNoDocument(e,Lg.min()))}else gg(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Db||Db.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=oy(n).toUint8Array()}catch(e){if(e instanceof ty)return fg("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Mb(s,r,i)}catch(e){return fg(e instanceof Fb?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&uw(i.target)){const t=new jg(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Ly.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Bw();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Ub(e,t,this.Ke,this.qe,n);return this.qe=Rw(),this.Qe=Wb(),this.Ke=new Qv(Dg),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new qb,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Jv(Dg),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||hg("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new qb),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Wb(){return new Qv(jg.comparator)}function Gb(){return new Qv(jg.comparator)}const Hb={asc:"ASCENDING",desc:"DESCENDING"},Qb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yb={and:"AND",or:"OR"};class $b{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jb(e,t){return e.useProto3Json||dv(t)?t:{value:t}}function Xb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function e_(e,t){return Xb(e,t.toTimestamp())}function t_(e){return gg(!!e),Lg.fromTimestamp(function(e){const t=iy(e);return new Og(t.seconds,t.nanos)}(e))}function n_(e,t){return r_(e,t).canonicalString()}function r_(e,t){const n=function(e){return new Fg(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function i_(e){const t=Fg.fromString(e);return gg(k_(t)),t}function s_(e,t){return n_(e.databaseId,t.path)}function o_(e,t){const n=i_(t);if(n.get(1)!==e.databaseId.projectId)throw new wg(yg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wg(yg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new jg(u_(n))}function a_(e,t){return n_(e.databaseId,t)}function c_(e){const t=i_(e);return 4===t.length?Fg.emptyPath():u_(t)}function l_(e){return new Fg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function u_(e){return gg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function h_(e,t,n){return{name:s_(e,t),fields:n.value.mapValue.fields}}function d_(e,t,n){const r=o_(e,t.name),i=t_(t.updateTime),s=t.createTime?t_(t.createTime):Lg.min(),o=new Ry({mapValue:{fields:t.fields}}),a=Ly.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function f_(e,t){let n;if(t instanceof gb)n={update:h_(e,t.key,t.value)};else if(t instanceof _b)n={delete:s_(e,t.key)};else if(t instanceof vb)n={update:h_(e,t.key,t.data),updateMask:T_(t.fieldMask)};else{if(!(t instanceof Sb))return mg();n={verify:s_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Xw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rb)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw mg()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:e_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:mg()}(e,t.precondition)),n}function p_(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?cb.updateTime(t_(e.updateTime)):void 0!==e.exists?cb.exists(e.exists):cb.none()}(t.currentDocument):cb.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)gg("REQUEST_TIME"===t.setToServerValue),n=new Xw;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Zw(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new tb(e)}else"increment"in t?n=new rb(e,t.increment):mg();const r=Vg.fromServerFormat(t.fieldPath);return new ob(r,n)}(e,t))):[];if(t.update){t.update.name;const i=o_(e,t.update.name),s=new Ry({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ey(t.map((e=>Vg.fromServerFormat(e))))}(t.updateMask);return new vb(i,s,e,n,r)}return new gb(i,s,n,r)}if(t.delete){const r=o_(e,t.delete);return new _b(r,n)}if(t.verify){const r=o_(e,t.verify);return new Sb(r,n)}return mg()}function m_(e,t){return{documents:[a_(e,t.path)]}}function g_(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=a_(e,i);const s=function(e){if(0!==e.length)return E_(qy.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:S_(e.field),direction:w_(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Jb(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function v_(e){let t=c_(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gg(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=y_(e);return t instanceof qy&&Gy(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Vy(I_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,dv(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new My(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new My(n,t)}(n.endAt)),mw(t,i,o,s,a,"F",c,l)}function y_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=I_(e.unaryFilter.field);return By.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=I_(e.unaryFilter.field);return By.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=I_(e.unaryFilter.field);return By.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=I_(e.unaryFilter.field);return By.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mg()}}(e):void 0!==e.fieldFilter?function(e){return By.create(I_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mg()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qy.create(e.compositeFilter.filters.map((e=>y_(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return mg()}}(e.compositeFilter.op))}(e):mg()}function w_(e){return Hb[e]}function b_(e){return Qb[e]}function __(e){return Yb[e]}function S_(e){return{fieldPath:e.canonicalString()}}function I_(e){return Vg.fromServerFormat(e.fieldPath)}function E_(e){return e instanceof By?function(e){if("=="===e.op){if(Ty(e.value))return{unaryFilter:{field:S_(e.field),op:"IS_NAN"}};if(Ey(e.value))return{unaryFilter:{field:S_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ty(e.value))return{unaryFilter:{field:S_(e.field),op:"IS_NOT_NAN"}};if(Ey(e.value))return{unaryFilter:{field:S_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:S_(e.field),op:b_(e.op),value:e.value}}}(e):e instanceof qy?function(e){const t=e.getFilters().map((e=>E_(e)));return 1===t.length?t[0]:{compositeFilter:{op:__(e.op),filters:t}}}(e):mg()}function T_(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function k_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class C_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lg.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lg.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ny.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new C_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new C_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new C_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new C_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class x_{constructor(e){this.ct=e}}function A_(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:N_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:s_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xb(e,t.version.toTimestamp()),createTime:Xb(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:D_(t.version)};else{if(!t.isUnknownDocument())return mg();r.unknownDocument={path:n.path.toArray(),version:D_(t.version)}}return r}function N_(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function D_(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function P_(e){const t=new Og(e.seconds,e.nanoseconds);return Lg.fromTimestamp(t)}function R_(e,t){const n=(t.baseMutations||[]).map((t=>p_(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>p_(e.ct,t))),i=Og.fromMillis(t.localWriteTimeMs);return new Ib(t.batchId,i,n,r)}function O_(e){const t=P_(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?P_(e.lastLimboFreeSnapshotVersion):Lg.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return gg(1===e.documents.length),bw(gw(c_(e.documents[0])))}(e.query):function(e){return bw(v_(e))}(e.query),new C_(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ny.fromBase64String(e.resumeToken))}function L_(e,t){const n=D_(t.snapshotVersion),r=D_(t.lastLimboFreeSnapshotVersion);let i;i=uw(t.target)?m_(e.ct,t.target):g_(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:cw(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function M_(e){const t=v_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Iw(t,t.limit,"L"):t}function F_(e,t){return new Tb(t.largestBatchId,p_(e.ct,t.overlayMutation))}function U_(e,t){const n=t.path.lastSegment();return[e,mv(t.path.popLast()),n]}function V_(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:D_(r.readTime),documentKey:mv(r.documentKey.path),largestBatchId:r.largestBatchId}}class j_{getBundleMetadata(e,t){return z_(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:P_(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return z_(e).put(function(e){return{bundleId:e.id,createTime:D_(t_(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return B_(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:M_(e.bundledQuery),readTime:P_(e.readTime)}}(e)}))}saveNamedQuery(e,t){return B_(e).put(function(e){return{name:e.name,readTime:D_(t_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function z_(e){return Kv(e,"bundles")}function B_(e){return Kv(e,"namedQueries")}class q_{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new q_(e,n)}getOverlay(e,t){return K_(e).get(U_(this.userId,t)).next((e=>e?F_(this.serializer,e):null))}getOverlays(e,t){const n=Fw();return Zg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Tb(t,i);r.push(this.ht(e,s))})),Zg.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(mv(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(K_(e).H("collectionPathOverlayIndex",r))})),Zg.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Fw(),i=mv(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return K_(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=F_(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Fw();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return K_(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=F_(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return K_(e).put(function(e,t,n){const[r,i,s]=U_(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:f_(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function K_(e){return Kv(e,"documentOverlays")}class W_{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(sy(e.integerValue));else if("doubleValue"in e){const n=sy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),fv(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=iy(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(oy(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?xy(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):mg()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),jg.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function G_(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function H_(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=G_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}W_.bt=new W_;class Q_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=H_(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=H_(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Y_{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class $_{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class J_{constructor(){this.Gt=new Q_,this.zt=new Y_(this.Gt),this.jt=new $_(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class X_{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new X_(this.indexId,this.documentKey,this.arrayValue,n)}}function Z_(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=eS(e.arrayValue,t.arrayValue),0!==n?n:(n=eS(e.directionalValue,t.directionalValue),0!==n?n:jg.comparator(e.documentKey,t.documentKey)))}function eS(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class tS{constructor(e){this.Yt=new Jv(((e,t)=>Vg.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(gg(e.collectionGroup===this.collectionId),this.en)return!1;const t=Bg(e);if(void 0!==t&&!this.nn(t))return!1;const n=qg(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Jv(Vg.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Kg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Kg(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Kg(n.field,"asc"===n.dir?0:1)));return new zg(zg.UNKNOWN_ID,this.collectionId,t,Wg.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function nS(e){var t,n;if(gg(e instanceof By||e instanceof qy),e instanceof By){if(e instanceof rw){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>By.create(e.field,"==",t))))||[];return qy.create(r,"or")}return e}const r=e.filters.map((e=>nS(e)));return qy.create(r,e.op)}function rS(e){if(0===e.getFilters().length)return[];const t=aS(nS(e));return gg(oS(t)),iS(t)||sS(t)?[t]:t.getFilters()}function iS(e){return e instanceof By}function sS(e){return e instanceof qy&&Gy(e)}function oS(e){return iS(e)||sS(e)||function(e){if(e instanceof qy&&Wy(e)){for(const t of e.getFilters())if(!iS(t)&&!sS(t))return!1;return!0}return!1}(e)}function aS(e){if(gg(e instanceof By||e instanceof qy),e instanceof By)return e;if(1===e.filters.length)return aS(e.filters[0]);const t=e.filters.map((e=>aS(e)));let n=qy.create(t,e.op);return n=uS(n),oS(n)?n:(gg(n instanceof qy),gg(Ky(n)),gg(n.filters.length>1),n.filters.reduce(((e,t)=>cS(e,t))))}function cS(e,t){let n;return gg(e instanceof By||e instanceof qy),gg(t instanceof By||t instanceof qy),n=e instanceof By?t instanceof By?function(e,t){return qy.create([e,t],"and")}(e,t):lS(e,t):t instanceof By?lS(t,e):function(e,t){if(gg(e.filters.length>0&&t.filters.length>0),Ky(e)&&Ky(t))return $y(e,t.getFilters());const n=Wy(e)?e:t,r=Wy(e)?t:e,i=n.filters.map((e=>cS(e,r)));return qy.create(i,"or")}(e,t),uS(n)}function lS(e,t){if(Ky(t))return $y(t,e.getFilters());{const n=t.filters.map((t=>cS(e,t)));return qy.create(n,"or")}}function uS(e){if(gg(e instanceof By||e instanceof qy),e instanceof By)return e;const t=e.getFilters();if(1===t.length)return uS(t[0]);if(Hy(e))return e;const n=t.map((e=>uS(e))),r=[];return n.forEach((t=>{t instanceof By?r.push(t):t instanceof qy&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:qy.create(r,e.op)}class hS{constructor(){this._n=new dS}addToCollectionParentIndex(e,t){return this._n.add(t),Zg.resolve()}getCollectionParents(e,t){return Zg.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Zg.resolve()}deleteFieldIndex(e,t){return Zg.resolve()}deleteAllFieldIndexes(e){return Zg.resolve()}createTargetIndexes(e,t){return Zg.resolve()}getDocumentsMatchingTarget(e,t){return Zg.resolve(null)}getIndexType(e,t){return Zg.resolve(0)}getFieldIndexes(e,t){return Zg.resolve([])}getNextCollectionGroupToUpdate(e){return Zg.resolve(null)}getMinOffset(e,t){return Zg.resolve(Qg.min())}getMinOffsetFromCollectionGroup(e,t){return Zg.resolve(Qg.min())}updateCollectionGroup(e,t,n){return Zg.resolve()}updateIndexEntries(e,t){return Zg.resolve()}}class dS{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jv(Fg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Jv(Fg.comparator)).toArray()}}const fS=new Uint8Array(0);class pS{constructor(e,t){this.databaseId=t,this.an=new dS,this.un=new Dw((e=>cw(e)),((e,t)=>lw(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:mv(r)};return mS(e).put(i)}return Zg.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Rg(t),""],!1,!0);return mS(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(yv(r.parent))}return n}))}addFieldIndex(e,t){const n=vS(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=yS(e);return i.next((e=>{n.put(V_(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=vS(e),r=yS(e),i=gS(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=vS(e),n=gS(e),r=yS(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Zg.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new tS(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=gS(e);let r=!0;const i=new Map;return Zg.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Bw();const r=[];return Zg.forEach(i,((i,s)=>{hg("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(cw(t)));const o=function(e,t){const n=Bg(t);if(void 0===n)return null;for(const r of hw(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of qg(t))for(const t of hw(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of qg(t)){const t=0===i.kind?dw(e,i.fieldPath,e.startAt):fw(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new My(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of qg(t)){const t=0===i.kind?fw(e,i.fieldPath,e.endAt):dw(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new My(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return Zg.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=jg.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Zg.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:rS(qy.create(e.filters,"and")).map((t=>aw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):fS,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new X_(e,jg.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new X_(e,jg.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new tS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Zg.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Jv(Vg.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new J_;for(const r of qg(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);W_.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new J_;return W_.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new J_;return W_.bt.Pt(_y(this.databaseId,t),n.Ht(function(e){const t=qg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new J_);let i=0;for(const s of qg(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Iy(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);W_.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new J_;n.seed(e.Wt()),W_.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof By&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=vS(e),r=yS(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Zg.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Wg(t.sequenceNumber,new Qg(P_(t.readTime),new jg(yv(t.documentKey)),t.largestBatchId)):Wg.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Kg(Vg.fromServerFormat(t),n)}));return new zg(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Dg(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=vS(e),i=yS(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Zg.forEach(t,(t=>i.put(V_(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Zg.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Zg.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Zg.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Zg.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return gS(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return gS(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=gS(e);let i=new Jv(Z_);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new X_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Jv(Z_);const r=this.An(t,e);if(null==r)return n;const i=Bg(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Iy(s))for(const i of s.arrayValue.values||[])n=n.add(new X_(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new X_(t.indexId,e.key,fS,r));return n}wn(e,t,n,r,i){hg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Zv(s),c=Zv(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Zv(o)):t?(i(a),a=Zv(s)):(a=Zv(s),c=Zv(o))}}(r,i,Z_,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Zg.waitFor(s)}gn(e){let t=1;return yS(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Z_(e,t))).filter(((e,t,n)=>!t||0!==Z_(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Z_(s,e),i=Z_(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,fS,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,fS,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Z_(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wS)}getMinOffset(e,t){return Zg.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||mg())))).next(wS)}}function mS(e){return Kv(e,"collectionParents")}function gS(e){return Kv(e,"indexEntries")}function vS(e){return Kv(e,"indexConfiguration")}function yS(e){return Kv(e,"indexState")}function wS(e){gg(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Yg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Qg(t.readTime,t.documentKey,n)}const bS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _S{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new _S(e,_S.DEFAULT_COLLECTION_PERCENTILE,_S.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SS(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{gg(1===a)})));const l=[];for(const u of n.mutations){const e=_v(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return Zg.waitFor(s).next((()=>l))}function IS(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw mg();t=e.noDocument}return JSON.stringify(t).length}_S.DEFAULT_COLLECTION_PERCENTILE=10,_S.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_S.DEFAULT=new _S(41943040,_S.DEFAULT_COLLECTION_PERCENTILE,_S.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_S.DISABLED=new _S(-1,0,0);class ES{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){gg(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ES(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kS(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=CS(e),s=kS(e);return s.add({}).next((o=>{gg("number"==typeof o);const a=new Ib(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>f_(e.ct,t))),i=n.mutations.map((t=>f_(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new Jv(((e,t)=>Dg(e.canonicalString(),t.canonicalString())));for(const e of r){const t=_v(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Sv))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Zg.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return kS(e).get(t).next((e=>e?(gg(e.userId===this.userId),R_(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Zg.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return kS(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(gg(t.batchId>=n),i=R_(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return kS(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kS(e).W("userMutationsIndex",t).next((e=>e.map((e=>R_(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=bv(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return CS(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=yv(a);if(o===this.userId&&t.path.isEqual(l))return kS(e).get(c).next((e=>{if(!e)throw mg();gg(e.userId===this.userId),i.push(R_(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jv(Dg);const r=[];return t.forEach((t=>{const i=bv(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=CS(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=yv(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),Zg.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=bv(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Jv(Dg);return CS(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=yv(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(kS(e).get(t).next((e=>{if(null===e)throw mg();gg(e.userId===this.userId),n.push(R_(this.serializer,e))})))})),Zg.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return SS(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Zg.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Zg.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return CS(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=yv(e[1]);r.push(t)}else n.done()})).next((()=>{gg(0===r.length)}))}))}containsKey(e,t){return TS(e,this.userId,t)}xn(e){return xS(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function TS(e,t,n){const r=bv(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return CS(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function kS(e){return Kv(e,"mutations")}function CS(e){return Kv(e,"documentMutations")}function xS(e){return Kv(e,"mutationQueues")}class AS{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new AS(0)}static Ln(){return new AS(-1)}}class NS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new AS(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Lg.fromTimestamp(new Og(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>DS(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(gg(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return DS(e).Y(((s,o)=>{const a=O_(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Zg.waitFor(i))).next((()=>r))}forEachTarget(e,t){return DS(e).Y(((e,n)=>{const r=O_(n);t(r)}))}Bn(e){return PS(e).get("targetGlobalKey").next((e=>(gg(null!==e),e)))}kn(e,t){return PS(e).put("targetGlobalKey",t)}qn(e,t){return DS(e).put(L_(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=cw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return DS(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=O_(n);lw(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=RS(e);return t.forEach((t=>{const s=mv(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Zg.waitFor(r)}removeMatchingKeys(e,t,n){const r=RS(e);return Zg.forEach(t,(t=>{const i=mv(t.path);return Zg.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=RS(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=RS(e);let i=Bw();return r.Y({range:n,J:!0},((e,t,n)=>{const r=yv(e[1]),s=new jg(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=mv(t.path),r=IDBKeyRange.bound([n],[Rg(n)],!1,!0);let i=0;return RS(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return DS(e).get(t).next((e=>e?O_(e):null))}}function DS(e){return Kv(e,"targets")}function PS(e){return Kv(e,"targetGlobal")}function RS(e){return Kv(e,"targetDocuments")}function OS(e,t){let[n,r]=e,[i,s]=t;const o=Dg(n,i);return 0===o?Dg(r,s):o}class LS{constructor(e){this.Kn=e,this.buffer=new Jv(OS),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();OS(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MS{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){hg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){iv(e)?hg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Xg(e)}await this.zn(3e5)}))}}class FS{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Zg.resolve(hv._e);const n=new LS(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(hg("LruGarbageCollector","Garbage collection skipped; disabled"),Zg.resolve(bS)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(hg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),bS):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(hg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),ug()<=gs.DEBUG&&hg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),Zg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function US(e,t){return new FS(e,t)}class VS{constructor(e,t){this.db=e,this.garbageCollector=US(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return jS(e,n)}removeReference(e,t,n){return jS(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return jS(e,t)}er(e,t){return function(e,t){let n=!1;return xS(e).Z((r=>TS(e,r,t).next((e=>(e&&(n=!0),Zg.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Lg.min()),RS(e).delete(function(e){return[0,mv(e.path)]}(s)))))}));r.push(t)}})).next((()=>Zg.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return jS(e,t)}Xn(e,t){const n=RS(e);let r,i=hv._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==hv._e&&t(new jg(yv(r)),i),i=c,r=a):i=hv._e})).next((()=>{i!==hv._e&&t(new jg(yv(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jS(e,t){return RS(e).put(function(e,t){return{targetId:0,path:mv(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class zS{constructor(){this.changes=new Dw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ly.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Zg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BS{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return GS(e).put(n)}removeEntry(e,t,n){return GS(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],N_(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Ly.newInvalidDocument(t);return GS(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(HS(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Ly.newInvalidDocument(t)};return GS(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(HS(t))},((e,r)=>{n={document:this.nr(t,r),size:IS(r)}})).next((()=>n))}getEntries(e,t){let n=Rw();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Rw(),r=new Qv(jg.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,IS(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Zg.resolve();let r=new Jv(YS);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(HS(r.first()),HS(r.last())),s=r.getIterator();let o=s.getNext();return GS(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=jg.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&YS(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(HS(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),N_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return GS(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Rw();for(const i of e){const e=this.nr(jg.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Cw(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Rw();const s=QS(t,n),o=QS(t,Qg.max());return GS(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(jg.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new KS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return WS(e).get("remoteDocumentGlobalKey").next((e=>(gg(!!e),e)))}tr(e,t){return WS(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=d_(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=jg.fromSegments(t.noDocument.path),r=P_(t.noDocument.readTime);n=Ly.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return mg();{const e=jg.fromSegments(t.unknownDocument.path),r=P_(t.unknownDocument.version);n=Ly.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Og(e[0],e[1]);return Lg.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Lg.min()))return e}return Ly.newInvalidDocument(e)}}function qS(e){return new BS(e)}class KS extends zS{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Dw((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Jv(((e,t)=>Dg(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=A_(this.ar.serializer,s);r=r.add(i.path.popLast());const c=IS(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=A_(this.ar.serializer,s.convertToNoDocument(Lg.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Zg.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function WS(e){return Kv(e,"remoteDocumentGlobal")}function GS(e){return Kv(e,"remoteDocumentsV14")}function HS(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function QS(e,t){const n=t.documentKey.path.toArray();return[e,N_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YS(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Dg(n[s],r[s]),i)return i;return i=Dg(n.length,r.length),i||(i=Dg(n[n.length-2],r[r.length-2]),i||Dg(n[n.length-1],r[r.length-1]))}class $S{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JS{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&fb(n.mutation,e,ey.empty(),Og.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Bw()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bw();const r=Fw();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Lw();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Fw();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Bw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Rw();const s=Vw(),o=Vw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof vb)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),fb(o.mutation,t,o.mutation.getFieldMask(),Og.now())):s.set(t.key,ey.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new $S(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Vw();let r=new Qv(((e,t)=>e-t)),i=Bw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ey.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Bw()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Uw();c.forEach((e=>{if(!i.has(e)){const r=hb(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Zg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return jg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Zg.resolve(Fw());let o=-1,a=i;return s.next((t=>Zg.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Zg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Bw()))).next((e=>({batchId:o,changes:Mw(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new jg(t)).next((e=>{let t=Lw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Lw();return this.indexManager.getCollectionParents(e,i).next((o=>Zg.forEach(o,(o=>{const a=function(e,t){return new pw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ly.newInvalidDocument(r)))}));let n=Lw();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&fb(s.mutation,r,ey.empty(),Og.now()),Cw(t,r)&&(n=n.insert(e,r))})),n}))}}class XS{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Zg.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:t_(e.createTime)}}(t)),Zg.resolve()}getNamedQuery(e,t){return Zg.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:M_(e.bundledQuery),readTime:t_(e.readTime)}}(t)),Zg.resolve()}}class ZS{constructor(){this.overlays=new Qv(jg.comparator),this.hr=new Map}getOverlay(e,t){return Zg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fw();return Zg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Zg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Zg.resolve()}getOverlaysForCollection(e,t,n){const r=Fw(),i=t.length+1,s=new jg(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Zg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Qv(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Fw(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Fw(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Zg.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Tb(t,n));let i=this.hr.get(t);void 0===i&&(i=Bw(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class eI{constructor(){this.Pr=new Jv(tI.Ir),this.Tr=new Jv(tI.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new tI(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new tI(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new jg(new Fg([])),n=new tI(t,e),r=new tI(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new jg(new Fg([])),n=new tI(t,e),r=new tI(t,e+1);let i=Bw();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new tI(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tI{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return jg.comparator(e.key,t.key)||Dg(e.pr,t.pr)}static Er(e,t){return Dg(e.pr,t.pr)||jg.comparator(e.key,t.key)}}class nI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Jv(tI.Ir)}checkEmpty(e){return Zg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ib(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new tI(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Zg.resolve(s)}lookupMutationBatch(e,t){return Zg.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Zg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Zg.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Zg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tI(t,0),r=new tI(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Zg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jv(Dg);return t.forEach((e=>{const t=new tI(e,0),r=new tI(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Zg.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;jg.isDocumentKey(i)||(i=i.child(""));const s=new tI(new jg(i),0);let o=new Jv(Dg);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Zg.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){gg(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Zg.forEach(t.mutations,(r=>{const i=new tI(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new tI(t,0),r=this.wr.firstAfterOrEqual(n);return Zg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Zg.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rI{constructor(e){this.vr=e,this.docs=new Qv(jg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Zg.resolve(n?n.document.mutableCopy():Ly.newInvalidDocument(t))}getEntries(e,t){let n=Rw();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ly.newInvalidDocument(e))})),Zg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Rw();const s=t.path,o=new jg(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Yg(Hg(o),n)<=0||(r.has(o.key)||Cw(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Zg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){mg()}Fr(e,t){return Zg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new iI(this)}getSize(e){return Zg.resolve(this.size)}}class iI extends zS{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Zg.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class sI{constructor(e){this.persistence=e,this.Mr=new Dw((e=>cw(e)),lw),this.lastRemoteSnapshotVersion=Lg.min(),this.highestTargetId=0,this.Or=0,this.Nr=new eI,this.targetCount=0,this.Lr=AS.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Zg.resolve()}getLastRemoteSnapshotVersion(e){return Zg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Zg.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Zg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Zg.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new AS(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Zg.resolve()}updateTargetData(e,t){return this.qn(t),Zg.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Zg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Zg.waitFor(i).next((()=>r))}getTargetCount(e){return Zg.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Zg.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Zg.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Zg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Zg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Zg.resolve(n)}containsKey(e,t){return Zg.resolve(this.Nr.containsKey(t))}}class oI{constructor(e,t){this.Br={},this.overlays={},this.kr=new hv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new sI(this),this.indexManager=new hS,this.remoteDocumentCache=function(e){return new rI(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new x_(t),this.$r=new XS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new nI(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){hg("MemoryPersistence","Starting transaction:",e);const r=new aI(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Zg.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class aI extends Jg{constructor(e){super(),this.currentSequenceNumber=e}}class cI{constructor(e){this.persistence=e,this.zr=new eI,this.jr=null}static Hr(e){return new cI(e)}get Jr(){if(this.jr)return this.jr;throw mg()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Zg.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Zg.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Zg.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zg.forEach(this.Jr,(n=>{const r=jg.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Lg.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Zg.or([()=>Zg.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class lI{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ev("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wv,{unique:!0}),e.createObjectStore("documentMutations")}(e),uI(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Zg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),uI(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lg.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wv,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Zg.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Ov});t.createIndex("collectionPathOverlayIndex",Lv,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Mv,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Iv});t.createIndex("documentKeyIndex",Ev),t.createIndex("collectionGroupIndex",Tv)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Nv}).createIndex("sequenceNumberIndex",Dv,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Pv}).createIndex("documentKeyIndex",Rv,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=IS(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Zg.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Zg.forEach(n,(n=>{gg(n.userId===t.userId);const r=R_(this.serializer,n);return SS(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Fg(n),o=function(e){return[0,mv(e)]}(s);r.push(t.get(o).next((n=>n?Zg.resolve():(n=>t.put({targetId:0,path:mv(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Zg.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Av});const n=t.store("collectionParents"),r=new dS,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:mv(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Fg(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=yv(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=O_(n),i=L_(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new jg(Fg.fromString(e.document.name).popFirst(5)):e.noDocument?jg.fromSegments(e.noDocument.path):e.unknownDocument?jg.fromSegments(e.unknownDocument.path):mg()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Zg.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=qS(this.serializer),i=new oI(cI.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Bw();R_(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Zg.forEach(n,((e,n)=>{const s=new ag(n),o=q_.lt(this.serializer,s),a=i.getIndexManager(s),c=ES.lt(s,this.serializer,a,i.referenceDelegate);return new JS(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new qv(t,hv._e),e).next()}))}))}}function uI(e){e.createObjectStore("targetDocuments",{keyPath:Cv}).createIndex("documentTargetsIndex",xv,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kv,{unique:!0}),e.createObjectStore("targetGlobal")}const hI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dI{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!dI.D())throw new wg(yg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VS(this,r),this.Ti=t+"main",this.serializer=new x_(a),this.Ei=new tv(this.Ti,this.ui,new lI(this.serializer)),this.Qr=new NS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qS(this.serializer),this.$r=new j_,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&dg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wg(yg.FAILED_PRECONDITION,hI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new hv(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(iv(e))return hg("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return hg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return fI(e).get("owner").next((e=>Zg.resolve(this.Si(e))))}bi(e){return pI(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Kv(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Zg.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Zg.resolve(!0):fI(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new wg(yg.FAILED_PRECONDITION,hI);return!1}}return!(!this.networkEnabled||!this.inForeground)||pI(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&hg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new qv(e,hv._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>pI(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return ES.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pS(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return q_.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){hg("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Bv:15===e?zv:14===e?jv:13===e?Vv:12===e?Uv:11===e?Fv:void mg()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new qv(r,this.kr?this.kr.next():hv._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw dg("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new wg(yg.FAILED_PRECONDITION,$g);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return fI(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new wg(yg.FAILED_PRECONDITION,hI)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fI(e).put("owner",t)}static D(){return tv.D()}yi(e){const t=fI(e);return t.get("owner").next((e=>this.Si(e)?(hg("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Zg.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(dg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Yi()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return hg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return dg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(LA){dg("Failed to set zombie client id.",LA)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(LA){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function fI(e){return Kv(e,"owner")}function pI(e){return Kv(e,"clientMetadata")}function mI(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class gI{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Bw(),r=Bw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new gI(e,t.fromCache,n,r)}}class vI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yI{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Yi()?8:tv.v(qi())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new vI;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ug()<=gs.DEBUG&&hg("QueryEngine","SDK will not create cache indexes for query:",kw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Zg.resolve()):(ug()<=gs.DEBUG&&hg("QueryEngine","Query:",kw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ug()<=gs.DEBUG&&hg("QueryEngine","The SDK decides to create cache indexes for query:",kw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bw(t))):Zg.resolve())}ji(e,t){if(vw(t))return Zg.resolve(null);let n=bw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Iw(t,null,"F"),n=bw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Bw(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Iw(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return vw(t)||r.isEqual(Lg.min())?Zg.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Zg.resolve(null):(ug()<=gs.DEBUG&&hg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kw(t)),this.es(e,s,t,Gg(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Jv(Aw(e));return t.forEach(((t,r)=>{Cw(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ug()<=gs.DEBUG&&hg("QueryEngine","Using full collection scan to execute query:",kw(t)),this.zi.getDocumentsMatchingQuery(e,t,Qg.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class wI{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Qv(Dg),this.rs=new Dw((e=>cw(e)),lw),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JS(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function bI(e,t,n,r){return new wI(e,t,n,r)}async function _I(e,t){const n=vg(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Bw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function SI(e){const t=vg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function II(e,t,n){let r=Bw(),i=Bw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Rw();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Lg.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):hg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function EI(e,t){const n=vg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function TI(e,t){const n=vg(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Zg.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new C_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function kI(e,t,n){const r=vg(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!iv(e))throw e;hg("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function CI(e,t,n){const r=vg(e);let i=Lg.min(),s=Bw();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=vg(e),i=r.rs.get(n);return void 0!==i?Zg.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,bw(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Lg.min(),n?s:Bw()))).next((e=>(NI(r,xw(t),e),{documents:e,hs:s})))))}function xI(e,t){const n=vg(e),r=vg(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function AI(e,t){const n=vg(e),r=n.ss.get(t)||Lg.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Gg(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(NI(n,t,e),e)))}function NI(e,t,n){let r=e.ss.get(t)||Lg.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function DI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bw();const r=await TI(e,bw(M_(t.bundledQuery))),i=vg(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=t_(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(ny.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function PI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function RI(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function OI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class LI{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new wg(r.error.code,r.error.message))),s?new LI(e,t,r.state,i):(dg("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MI{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new wg(n.error.code,n.error.message))),i?new MI(e,n.state,r):(dg("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Kw();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=pv(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new FI(e,i):(dg("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class UI{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UI(t.clientId,t.onlineState):(dg("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class VI{constructor(){this.activeTargetIds=Kw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jI{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Qv(Dg),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=PI(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new VI),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(PI(this.persistenceKey,n));if(e){const t=FI.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(OI(this.persistenceKey,e));if(n){const r=MI.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(OI(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return hg("SharedClientState","READ",e,t),t}setItem(e,t){hg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){hg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(hg("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void dg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=hv._e;if(null!=e)try{const n=JSON.parse(e);gg("number"==typeof n),t=n}catch(e){dg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==hv._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new LI(this.currentUser,e,t,n),i=RI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=RI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=OI(this.persistenceKey,e),i=new MI(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return FI.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return LI.Es(new ag(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return MI.Es(r,t)}xs(e){return UI.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);hg("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Kw();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class zI{constructor(){this.no=new VI,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new VI,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BI{io(e){}shutdown(){}}class qI{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){hg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){hg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let KI=null;function WI(){return null===KI?KI=268435456+Math.round(2147483648*Math.random()):KI++,"0x"+KI.toString(16)}const GI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HI{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const QI="WebChannelConnection";class YI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=WI(),o=this.bo(e,t.toUriEncodedString());hg("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(hg("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw fg("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=GI[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=WI();return new Promise(((s,o)=>{const a=new rg;a.setWithCredentials(!0),a.listenOnce(Zm.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Xm.NO_ERROR:const t=a.getResponseJson();hg(QI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Xm.TIMEOUT:hg(QI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new wg(yg.DEADLINE_EXCEEDED,"Request time out"));break;case Xm.HTTP_ERROR:const n=a.getStatus();if(hg(QI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(yg).indexOf(t)>=0?t:yg.UNKNOWN}(t.status);o(new wg(e,t.message))}else o(new wg(yg.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new wg(yg.UNAVAILABLE,"Connection failed."));break;default:mg()}}finally{hg(QI,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);hg(QI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=WI(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$m(),o=Jm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");hg(QI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new HI({lo:t=>{d?hg(QI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(hg(QI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),hg(QI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ng.EventType.OPEN,(()=>{d||hg(QI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,ng.EventType.CLOSE,(()=>{d||(d=!0,hg(QI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,ng.EventType.ERROR,(t=>{d||(d=!0,fg(QI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new wg(yg.UNAVAILABLE,"The operation could not be completed")))})),p(u,ng.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];gg(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){hg(QI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Cb[e];if(void 0!==t)return Nb(t)}(t),i=o.message;void 0===n&&(n=yg.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new wg(n,i)),u.close()}else hg(QI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,eg.STAT_EVENT,(t=>{t.stat===tg.PROXY?hg(QI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===tg.NOPROXY&&hg(QI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function $I(){return"undefined"!=typeof window?window:null}function JI(){return"undefined"!=typeof document?document:null}function XI(e){return new $b(e,!0)}class ZI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&hg("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class eE{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ZI(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===yg.RESOURCE_EXHAUSTED?(dg(t.toString()),dg("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===yg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new wg(yg.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return hg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(hg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tE extends eE{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:mg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(gg(void 0===t||"string"==typeof t),ny.fromBase64String(t||"")):(gg(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ny.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?yg.UNKNOWN:Nb(e.code);return new wg(t,e.message||"")}(o);n=new Bb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=o_(e,r.document.name),s=t_(r.document.updateTime),o=r.document.createTime?t_(r.document.createTime):Lg.min(),a=new Ry({mapValue:{fields:r.document.fields}}),c=Ly.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new jb(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=o_(e,r.document),s=r.readTime?t_(r.readTime):Lg.min(),o=Ly.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jb([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=o_(e,r.document),s=r.removedTargetIds||[];n=new jb([],s,i,null)}else{if(!("filter"in t))return mg();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new kb(r,i),o=e.targetId;n=new zb(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Lg.min():t.readTime?t_(t.readTime):Lg.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=l_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=uw(r)?{documents:m_(e,r)}:{query:g_(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Zb(e,t.resumeToken);const r=Jb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Lg.min())>0){n.readTime=Xb(e,t.snapshotVersion.toTimestamp());const r=Jb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mg()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=l_(this.serializer),t.removeTarget=e,this.t_(t)}}class nE extends eE{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(gg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(gg(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?t_(e.updateTime):t_(t);return n.isEqual(Lg.min())&&(n=t_(t)),new ab(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=t_(e.commitTime);return this.listener.T_(n,t)}return gg(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=l_(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>f_(this.serializer,e)))};this.t_(t)}}class rE extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new wg(yg.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,r_(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wg(yg.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,r_(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===yg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wg(yg.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class iE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(dg(t),this.g_=!1):hg("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class sE{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{pE(this)&&(hg("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=vg(e);t.v_.add(4),await aE(t),t.x_.set("Unknown"),t.v_.delete(4),await oE(t)}(this))}))})),this.x_=new iE(n,r)}}async function oE(e){if(pE(e))for(const t of e.F_)await t(!0)}async function aE(e){for(const t of e.F_)await t(!1)}function cE(e,t){const n=vg(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),fE(n)?dE(n):PE(n).Jo()&&uE(n,t))}function lE(e,t){const n=vg(e),r=PE(n);n.C_.delete(t),r.Jo()&&hE(n,t),0===n.C_.size&&(r.Jo()?r.Xo():pE(n)&&n.x_.set("Unknown"))}function uE(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}PE(e).c_(t)}function hE(e,t){e.O_.Oe(t),PE(e).l_(t)}function dE(e){e.O_=new Kb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),PE(e).start(),e.x_.p_()}function fE(e){return pE(e)&&!PE(e).Ho()&&e.C_.size>0}function pE(e){return 0===vg(e).v_.size}function mE(e){e.O_=void 0}async function gE(e){e.C_.forEach(((t,n)=>{uE(e,t)}))}async function vE(e,t){mE(e),fE(e)?(e.x_.S_(t),dE(e)):e.x_.set("Unknown")}async function yE(e,t,n){if(e.x_.set("Online"),t instanceof Bb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){hg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wE(e,n)}else if(t instanceof jb?e.O_.$e(t):t instanceof zb?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Lg.min()))try{const t=await SI(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(ny.EMPTY_BYTE_STRING,r.snapshotVersion)),hE(e,t);const i=new C_(r.target,t,n,r.sequenceNumber);uE(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){hg("RemoteStore","Failed to raise snapshot:",t),await wE(e,t)}}async function wE(e,t,n){if(!iv(t))throw t;e.v_.add(1),await aE(e),e.x_.set("Offline"),n||(n=()=>SI(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{hg("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await oE(e)}))}function bE(e,t){return t().catch((n=>wE(e,n,t)))}async function _E(e){const t=vg(e),n=RE(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;SE(t);)try{const e=await EI(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,IE(t,e)}catch(e){await wE(t,e)}EE(t)&&TE(t)}function SE(e){return pE(e)&&e.D_.length<10}function IE(e,t){e.D_.push(t);const n=RE(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function EE(e){return pE(e)&&!RE(e).Ho()&&e.D_.length>0}function TE(e){RE(e).start()}async function kE(e){RE(e).d_()}async function CE(e){const t=RE(e);for(const n of e.D_)t.I_(n.mutations)}async function xE(e,t,n){const r=e.D_.shift(),i=Eb.from(r,t,n);await bE(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await _E(e)}async function AE(e,t){t&&RE(e).P_&&await async function(e,t){if(function(e){return Ab(e)&&e!==yg.ABORTED}(t.code)){const n=e.D_.shift();RE(e).Zo(),await bE(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await _E(e)}}(e,t),EE(e)&&TE(e)}async function NE(e,t){const n=vg(e);n.asyncQueue.verifyOperationInProgress(),hg("RemoteStore","RemoteStore received new credentials");const r=pE(n);n.v_.add(3),await aE(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await oE(n)}async function DE(e,t){const n=vg(e);t?(n.v_.delete(2),await oE(n)):t||(n.v_.add(2),await aE(n),n.x_.set("Unknown"))}function PE(e){return e.N_||(e.N_=function(e,t,n){const r=vg(e);return r.R_(),new tE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:gE.bind(null,e),To:vE.bind(null,e),u_:yE.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),fE(e)?dE(e):e.x_.set("Unknown")):(await e.N_.stop(),mE(e))}))),e.N_}function RE(e){return e.L_||(e.L_=function(e,t,n){const r=vg(e);return r.R_(),new nE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:kE.bind(null,e),To:AE.bind(null,e),E_:CE.bind(null,e),T_:xE.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await _E(e)):(await e.L_.stop(),e.D_.length>0&&(hg("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class OE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new OE(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wg(yg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function LE(e,t){if(dg("AsyncQueue","".concat(t,": ").concat(e)),iv(e))return new wg(yg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ME{constructor(e){this.comparator=e?(t,n)=>e(t,n)||jg.comparator(t.key,n.key):(e,t)=>jg.comparator(e.key,t.key),this.keyedMap=Lw(),this.sortedSet=new Qv(this.comparator)}static emptySet(e){return new ME(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ME))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ME;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class FE{constructor(){this.B_=new Qv(jg.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):mg():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class UE{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new UE(e,t,ME.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class VE{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class jE{constructor(){this.queries=new Dw((e=>Tw(e)),Ew),this.onlineState="Unknown",this.W_=new Set}}async function zE(e,t){const n=vg(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new VE,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=LE(e,"Initialization of query '".concat(kw(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&WE(n)}async function BE(e,t){const n=vg(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qE(e,t){const n=vg(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&WE(n)}function KE(e,t,n){const r=vg(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function WE(e){e.W_.forEach((e=>{e.next()}))}var GE,HE;(HE=GE||(GE={})).j_="default",HE.Cache="cache";class QE{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new UE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=UE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==GE.Cache}}class YE{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class $E{constructor(e){this.serializer=e}Ps(e){return o_(this.serializer,e)}Is(e){return e.metadata.exists?d_(this.serializer,e.document,!1):Ly.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return t_(e)}}class JE{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XE(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=Fg.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new $E(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Bw()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=vg(e);let s=Bw(),o=Rw();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await TI(i,function(e){return bw(gw(Fg.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>II(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new $E(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await DI(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function XE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ZE{constructor(e){this.key=e}}class eT{constructor(e){this.key=e}}class tT{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Bw(),this.mutatedKeys=Bw(),this.ha=Aw(e),this.Pa=new ME(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new FE,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Cw(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||c&&this.ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mg()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new UE(this.query,e.Pa,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new FE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Bw(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new eT(e))})),this.la.forEach((n=>{e.has(n)||t.push(new ZE(n))})),t}fa(e){this.ua=e.hs,this.la=Bw();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return UE.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class nT{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rT{constructor(e){this.key=e,this.pa=!1}}class iT{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Dw((e=>Tw(e)),Ew),this.Sa=new Map,this.ba=new Set,this.Da=new Qv(jg.comparator),this.Ca=new Map,this.va=new eI,this.Fa={},this.Ma=new Map,this.xa=AS.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function sT(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=OT(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await aT(r,t,n,!0),i}async function oT(e,t){const n=OT(e);await aT(n,t,!0,!1)}async function aT(e,t,n,r){const i=await TI(e.localStore,bw(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await cT(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&cE(e.remoteStore,i),a}async function cT(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await CI(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return bT(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await CI(e.localStore,t,!0),o=new tT(t,s.hs),a=o.Ta(s.documents),c=Vb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);bT(e,n,l.Va);const u=new nT(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function lT(e,t,n){const r=vg(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!Ew(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kI(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lE(r.remoteStore,i.targetId),yT(r,i.targetId)})).catch(Xg)):(yT(r,i.targetId),await kI(r.localStore,i.targetId,!0))}async function uT(e,t){const n=vg(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lE(n.remoteStore,r.targetId))}async function hT(e,t){const n=vg(e);try{const e=await function(e,t){const n=vg(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(ny.EMPTY_BYTE_STRING,Lg.min()).withLastLimboFreeSnapshotVersion(Lg.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Rw(),c=Bw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(II(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(Lg.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Zg.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(gg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?gg(r.pa):e.removedDocuments.size>0&&(gg(r.pa),r.pa=!1))})),await IT(n,e,t)}catch(e){await Xg(e)}}function dT(e,t,n){const r=vg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=vg(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&WE(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fT(e,t,n){const r=vg(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new Qv(jg.comparator);e=e.insert(s,Ly.newNoDocument(s,Lg.min()));const n=Bw().add(s),i=new Ub(Lg.min(),new Map,new Qv(Dg),e,n);await hT(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),ST(r)}else await kI(r.localStore,t,!1).then((()=>yT(r,t,n))).catch(Xg)}async function pT(e,t){const n=vg(e),r=t.batch.batchId;try{const e=await function(e,t){const n=vg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Zg.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);gg(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);vT(n,r,null),gT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await IT(n,e)}catch(e){await Xg(e)}}async function mT(e,t,n){const r=vg(e);try{const e=await function(e,t){const n=vg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(gg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);vT(r,t,n),gT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await IT(r,e)}catch(n){await Xg(n)}}function gT(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function vT(e,t,n){const r=vg(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function yT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||wT(e,t)}))}function wT(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(lE(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),ST(e))}function bT(e,t,n){for(const r of n)r instanceof ZE?(e.va.addReference(r.key,t),_T(e,r)):r instanceof eT?(hg("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||wT(e,r.key)):mg()}function _T(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(hg("SyncEngine","New document in limbo: "+n),e.ba.add(r),ST(e))}function ST(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new jg(Fg.fromString(t)),r=e.xa.next();e.Ca.set(r,new rT(n)),e.Da=e.Da.insert(n,r),cE(e.remoteStore,new C_(bw(gw(n.path)),r,"TargetPurposeLimboResolution",hv._e))}}async function IT(e,t,n){const r=vg(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=gI.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=vg(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Zg.forEach(t,(t=>Zg.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Zg.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!iv(e))throw e;hg("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function ET(e,t){const n=vg(e);if(!n.currentUser.isEqual(t)){hg("SyncEngine","User change. New user:",t.toKey());const e=await _I(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new wg(yg.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await IT(n,e.us)}}function TT(e,t){const n=vg(e),r=n.Ca.get(t);if(r&&r.pa)return Bw().add(r.key);{let e=Bw();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function kT(e,t){const n=vg(e),r=await CI(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&bT(n,t.targetId,i.Va),i}async function CT(e,t){const n=vg(e);return AI(n.localStore,t).then((e=>IT(n,e)))}async function xT(e,t,n,r){const i=vg(e),s=await function(e,t){const n=vg(e),r=vg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Zg.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await _E(i.remoteStore):"acknowledged"===n||"rejected"===n?(vT(i,t,r||null),gT(i,t),function(e,t){vg(vg(e).mutationQueue).Mn(t)}(i.localStore,t)):mg(),await IT(i,s)):hg("SyncEngine","Cannot apply mutation batch with id: "+t)}async function AT(e,t,n){const r=vg(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await TI(r.localStore,bw(t[0]));for(const e of t){const t=r.wa.get(e),n=await kT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await xI(r.localStore,o);e=await TI(r.localStore,t),await cT(r,NT(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function NT(e){return mw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function DT(e){return function(e){return vg(vg(e).persistence).Bi()}(vg(e).localStore)}async function PT(e,t,n,r){const i=vg(e);if(i.Oa)return void hg("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await AI(i.localStore,xw(s[0])),r=Ub.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ny.EMPTY_BYTE_STRING);await IT(i,e,r);break}case"rejected":await kI(i.localStore,t,!0),yT(i,t,r);break;default:mg()}}async function RT(e,t,n){const r=OT(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){hg("SyncEngine","Adding an already active target "+e);continue}const t=await xI(r.localStore,e),n=await TI(r.localStore,t);await cT(r,NT(t),n.targetId,!1,n.resumeToken),cE(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await kI(r.localStore,e,!1).then((()=>{lE(r.remoteStore,e),yT(r,e)})).catch(Xg)}}function OT(e){const t=vg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fT.bind(null,t),t.ya.u_=qE.bind(null,t.eventManager),t.ya.La=KE.bind(null,t.eventManager),t}function LT(e){const t=vg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mT.bind(null,t),t}class MT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=XI(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bI(this.persistence,new yI,e.initialUser,this.serializer)}createPersistence(e){return new oI(cI.Hr,this.serializer)}createSharedClientState(e){return new zI}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class FT extends MT{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await LT(this.ka.syncEngine),await _E(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return bI(this.persistence,new yI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new MS(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new uv(t,this.persistence);return new lv(e.asyncQueue,n)}createPersistence(e){const t=mI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_S.withCacheSize(this.cacheSizeBytes):_S.DEFAULT;return new dI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,$I(),JI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zI}}class UT extends FT{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof jI&&(this.sharedClientState.syncEngine={Zs:xT.bind(null,t),Xs:PT.bind(null,t),eo:RT.bind(null,t),Bi:DT.bind(null,t),Ys:CT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=vg(e);if(OT(n),LT(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await AT(n,e.toArray());n.Oa=!0,await DE(n.remoteStore,!0);for(const r of t)cE(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(yT(n,i),kI(n.localStore,i,!0)))),lE(n.remoteStore,i)})),await t,await AT(n,e),function(e){const t=vg(e);t.Ca.forEach(((e,n)=>{lE(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new Qv(jg.comparator)}(n),n.Oa=!1,await DE(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=$I();if(!jI.D(t))throw new wg(yg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=mI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class VT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ET.bind(null,this.syncEngine),await DE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jE}createDatastore(e){const t=XI(e.databaseInfo.databaseId),n=function(e){return new YI(e)}(e.databaseInfo);return function(e,t,n,r){return new rE(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new sE(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>dT(this.syncEngine,e,0)),qI.D()?new qI:new BI)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new iT(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=vg(e);hg("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await aE(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function jT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class zT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):dg("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class BT{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new bg,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new YE(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class qT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new wg(yg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=vg(e),r={documents:t.map((e=>s_(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Fg.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){gg(!!t.found),t.found.name,t.found.updateTime;const n=o_(e,t.found.name),r=t_(t.found.updateTime),i=t.found.createTime?t_(t.found.createTime):Lg.min(),s=new Ry({mapValue:{fields:t.found.fields}});return Ly.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){gg(!!t.missing),gg(!!t.readTime);const n=o_(e,t.missing),r=t_(t.readTime);return Ly.newNoDocument(n,r)}(e,t):mg()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());gg(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new _b(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=jg.fromPath(t);this.mutations.push(new Sb(n,this.precondition(n)))})),await async function(e,t){const n=vg(e),r={writes:t.map((e=>f_(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Fg.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mg();t=Lg.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wg(yg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lg.min())?cb.exists(!1):cb.updateTime(t):cb.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lg.min()))throw new wg(yg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cb.updateTime(t)}return cb.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class KT{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new ZI(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new qT(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!dv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ab(t)}return!1}}class WT{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ag.UNAUTHENTICATED,this.clientId=Ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{hg("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(hg("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wg(yg.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=LE(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function GT(e,t){e.asyncQueue.verifyOperationInProgress(),hg("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await _I(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function HT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await YT(e);hg("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>NE(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>NE(t.remoteStore,n))),e._onlineComponents=t}function QT(e){return"FirebaseError"===e.name?e.code===yg.FAILED_PRECONDITION||e.code===yg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function YT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){hg("FirestoreClient","Using user provided OfflineComponentProvider");try{await GT(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!QT(n))throw n;fg("Error using user provided cache. Falling back to memory cache: "+n),await GT(e,new MT)}}else hg("FirestoreClient","Using default OfflineComponentProvider"),await GT(e,new MT);return e._offlineComponents}async function $T(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(hg("FirestoreClient","Using user provided OnlineComponentProvider"),await HT(e,e._uninitializedComponentsProvider._online)):(hg("FirestoreClient","Using default OnlineComponentProvider"),await HT(e,new VT))),e._onlineComponents}function JT(e){return YT(e).then((e=>e.persistence))}function XT(e){return YT(e).then((e=>e.localStore))}function ZT(e){return $T(e).then((e=>e.remoteStore))}function ek(e){return $T(e).then((e=>e.syncEngine))}function tk(e){return $T(e).then((e=>e.datastore))}async function nk(e){const t=await $T(e),n=t.eventManager;return n.onListen=sT.bind(null,t.syncEngine),n.onUnlisten=lT.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=oT.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uT.bind(null,t.syncEngine),n}function rk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zT({next:s=>{t.enqueueAndForget((()=>BE(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new wg(yg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new wg(yg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new QE(gw(n.path),s,{includeMetadataChanges:!0,ta:!0});return zE(e,o)}(await nk(e),e.asyncQueue,t,n,r))),r.promise}function ik(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zT({next:n=>{t.enqueueAndForget((()=>BE(e,o))),n.fromCache&&"server"===r.source?i.reject(new wg(yg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new QE(n,s,{includeMetadataChanges:!0,ta:!0});return zE(e,o)}(await nk(e),e.asyncQueue,t,n,r))),r.promise}function sk(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Pb().encode(e):e,function(e,t){return new BT(e,t)}(function(e,t){if(e instanceof Uint8Array)return jT(e,t);if(e instanceof ArrayBuffer)return jT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,XI(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=vg(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=vg(e),r=t_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(XE(r));const i=new JE(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await IT(e,o.aa,void 0),await function(e,t){const n=vg(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return fg("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ek(e),i,r)}))}function ok(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ak=new Map;function ck(e,t,n){if(!n)throw new wg(yg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function lk(e,t,n,r){if(!0===t&&!0===r)throw new wg(yg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function uk(e){if(!jg.isDocumentKey(e))throw new wg(yg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hk(e){if(jg.isDocumentKey(e))throw new wg(yg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":mg()}function fk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wg(yg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dk(e);throw new wg(yg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pk(e,t){if(t<=0)throw new wg(yg.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class mk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new wg(yg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wg(yg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ok(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new wg(yg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new wg(yg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new wg(yg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wg(yg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wg(yg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sg;switch(e.type){case"firstParty":return new kg(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new wg(yg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ak.get(e);t&&(hg("ComponentProvider","Removing Datastore"),ak.delete(e),t.terminate())}(this),Promise.resolve()}}function vk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=fk(e,gk))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&fg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ag.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Mi(JSON.stringify({alg:"none",type:"JWT"})),Mi(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new wg(yg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ag(s)}e._authCredentials=new Ig(new _g(t,n))}}class yk{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yk(this.firestore,e,this._query)}}class wk{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wk(this.firestore,e,this._key)}}class bk extends yk{constructor(e,t,n){super(e,t,gw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wk(this.firestore,null,new jg(e))}withConverter(e){return new bk(this.firestore,e,this._path)}}function _k(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ls(e),ck("collection","path",t),e instanceof gk){const n=Fg.fromString(t,...r);return hk(n),new bk(e,null,n)}{if(!(e instanceof wk||e instanceof bk))throw new wg(yg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fg.fromString(t,...r));return hk(n),new bk(e.firestore,null,n)}}function Sk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ls(e),1===arguments.length&&(t=Ng.newId()),ck("doc","path",t),e instanceof gk){const n=Fg.fromString(t,...r);return uk(n),new wk(e,null,new jg(n))}{if(!(e instanceof wk||e instanceof bk))throw new wg(yg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fg.fromString(t,...r));return uk(n),new wk(e.firestore,e instanceof bk?e.converter:null,new jg(n))}}function Ik(e,t){return e=ls(e),t=ls(t),(e instanceof wk||e instanceof bk)&&(t instanceof wk||t instanceof bk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ek(e,t){return e=ls(e),t=ls(t),e instanceof yk&&t instanceof yk&&e.firestore===t.firestore&&Ew(e._query,t._query)&&e.converter===t.converter}class Tk{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new ZI(this,"async_queue_retry"),this.cu=()=>{const e=JI();e&&hg("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=JI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=JI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new bg;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(LA){if(!iv(LA))throw LA;hg("AsyncQueue","Operation failed with retryable error: "+LA)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dg("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=OE.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&mg()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function kk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ck{constructor(){this._progressObserver={},this._taskCompletionResolver=new bg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xk extends gk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nk(this),this._firestoreClient.terminate()}}function Ak(e){return e._firestoreClient||Nk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nk(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new uy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ok(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new WT(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Dk(e,t,n){const r=new bg;return e.asyncQueue.enqueue((async()=>{try{await GT(e,n),await HT(e,t),r.resolve()}catch(e){const n=e;if(!QT(n))throw n;fg("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Pk(e){return function(e){const t=new bg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=vg(e);pE(n.remoteStore)||hg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=vg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=LE(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ek(e),t))),t.promise}(Ak(e=fk(e,xk)))}function Rk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await JT(e),n=await ZT(e);return t.setNetworkEnabled(!0),function(e){const t=vg(e);return t.v_.delete(0),oE(t)}(n)}))}(Ak(e=fk(e,xk)))}function Ok(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await JT(e),n=await ZT(e);return t.setNetworkEnabled(!1),async function(e){const t=vg(e);t.v_.add(0),await aE(t),t.x_.set("Offline")}(n)}))}(Ak(e=fk(e,xk)))}function Lk(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=vg(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await XT(e),t)))}(Ak(e=fk(e,xk)),t).then((t=>t?new yk(e,null,t.query):null))}function Mk(e){if(e._initialized||e._terminated)throw new wg(yg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fk{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fk(ny.fromBase64String(e))}catch(e){throw new wg(yg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fk(ny.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new wg(yg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vk{constructor(e){this._methodName=e}}class jk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wg(yg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wg(yg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dg(this._lat,e._lat)||Dg(this._long,e._long)}}const zk=/^__.*__$/;class Bk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new vb(e,this.data,this.fieldMask,t,this.fieldTransforms):new gb(e,this.data,t,this.fieldTransforms)}}class qk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new vb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mg()}}class Wk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Wk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return hC(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Kk(this.Vu)&&zk.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Gk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||XI(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wk({Vu:e,methodName:t,Du:n,path:Vg.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hk(e){const t=e._freezeSettings(),n=XI(e._databaseId);return new Gk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qk(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);aC("Data must be an object, but it was:",o,r);const a=sC(r,o);let c,l;if(s.merge)c=new ey(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=cC(t,r,n);if(!o.contains(i))throw new wg(yg.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));dC(e,i)||e.push(i)}c=new ey(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Bk(new Ry(a),c,l)}class Yk extends Vk{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yk}}function $k(e,t,n){return new Wk({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Jk extends Vk{_toFieldTransform(e){return new ob(e.path,new Xw)}isEqual(e){return e instanceof Jk}}class Xk extends Vk{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=$k(this,e,!0),n=this.vu.map((e=>iC(e,t))),r=new Zw(n);return new ob(e.path,r)}isEqual(e){return e instanceof Xk&&ts(this.vu,e.vu)}}class Zk extends Vk{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=$k(this,e,!0),n=this.vu.map((e=>iC(e,t))),r=new tb(n);return new ob(e.path,r)}isEqual(e){return e instanceof Zk&&ts(this.vu,e.vu)}}class eC extends Vk{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new rb(e.serializer,Hw(e.serializer,this.Fu));return new ob(e.path,t)}isEqual(e){return e instanceof eC&&this.Fu===e.Fu}}function tC(e,t,n,r){const i=e.Cu(1,t,n);aC("Data must be an object, but it was:",i,r);const s=[],o=Ry.empty();Gv(r,((e,r)=>{const a=uC(t,e,n);r=ls(r);const c=i.yu(a);if(r instanceof Yk)s.push(a);else{const e=iC(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ey(s);return new qk(o,a,i.fieldTransforms)}function nC(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[cC(t,r,n)],c=[i];if(s.length%2!=0)throw new wg(yg.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(cC(t,s[d])),c.push(s[d+1]);const l=[],u=Ry.empty();for(let d=a.length-1;d>=0;--d)if(!dC(l,a[d])){const e=a[d];let t=c[d];t=ls(t);const n=o.yu(e);if(t instanceof Yk)l.push(e);else{const r=iC(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new ey(l);return new qk(u,h,o.fieldTransforms)}function rC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return iC(n,e.Cu(r?4:3,t))}function iC(e,t){if(oC(e=ls(e)))return aC("Unsupported field value:",t,e),sC(e,t);if(e instanceof Vk)return function(e,t){if(!Kk(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=iC(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ls(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Og.fromDate(e);return{timestampValue:Xb(t.serializer,n)}}if(e instanceof Og){const n=new Og(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xb(t.serializer,n)}}if(e instanceof jk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fk)return{bytesValue:Zb(t.serializer,e._byteString)};if(e instanceof wk){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:n_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(dk(e)))}(e,t)}function sC(e,t){const n={};return Hv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gv(e,((e,r)=>{const i=iC(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function oC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Og||e instanceof jk||e instanceof Fk||e instanceof wk||e instanceof Vk)}function aC(e,t,n){if(!oC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=dk(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function cC(e,t,n){if((t=ls(t))instanceof Uk)return t._internalPath;if("string"==typeof t)return uC(e,t);throw hC("Field path arguments must be of type string or ",e,!1,void 0,n)}const lC=new RegExp("[~\\*/\\[\\]]");function uC(e,t,n){if(t.search(lC)>=0)throw hC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Uk(...t.split("."))._internalPath}catch(Zh){throw hC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hC(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new wg(yg.INVALID_ARGUMENT,a+e+c)}function dC(e,t){return e.some((e=>e.isEqual(t)))}class fC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pC extends fC{data(){return super.data()}}function mC(e,t){return"string"==typeof t?uC(e,t):t instanceof Uk?t._internalPath:t._delegate._internalPath}function gC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wg(yg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vC{}class yC extends vC{}function wC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof vC&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof _C)).length,n=e.filter((e=>e instanceof bC)).length;if(t>1||t>0&&n>0)throw new wg(yg.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class bC extends yC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new bC(e,t,n)}_apply(e){const t=this._parse(e);return AC(e._query,t),new yk(e.firestore,e.converter,Sw(e._query,t))}_parse(e){const t=Hk(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new wg(yg.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){xC(o,s);const t=[];for(const n of o)t.push(CC(r,e,n));a={arrayValue:{values:t}}}else a=CC(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||xC(o,s),a=rC(n,t,o,"in"===s||"not-in"===s);return By.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class _C extends vC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _C(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:qy.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)AC(n,i),n=Sw(n,i)}(e._query,t),new yk(e.firestore,e.converter,Sw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class SC extends yC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new SC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new wg(yg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wg(yg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vy(t,n)}(e._query,this._field,this._direction);return new yk(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new pw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class IC extends yC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new IC(e,t,n)}_apply(e){return new yk(e.firestore,e.converter,Iw(e._query,this._limit,this._limitType))}}class EC extends yC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new EC(e,t,n)}_apply(e){const t=kC(e,this.type,this._docOrFields,this._inclusive);return new yk(e.firestore,e.converter,function(e,t){return new pw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class TC extends yC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new TC(e,t,n)}_apply(e){const t=kC(e,this.type,this._docOrFields,this._inclusive);return new yk(e.firestore,e.converter,function(e,t){return new pw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function kC(e,t,n,r){if(n[0]=ls(n[0]),n[0]instanceof fC)return function(e,t,n,r,i){if(!r)throw new wg(yg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of ww(e))if(o.field.isKeyField())s.push(_y(t,r.key));else{const e=r.data.field(o.field);if(ay(e))throw new wg(yg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new wg(yg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new My(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Hk(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new wg(yg.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new wg(yg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!yw(e)&&-1!==s.indexOf("/"))throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Fg.fromString(s));if(!jg.isDocumentKey(n))throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new jg(n);a.push(_y(t,i))}else{const e=rC(n,r,s);a.push(e)}}return new My(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function CC(e,t,n){if("string"==typeof(n=ls(n))){if(""===n)throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yw(t)&&-1!==n.indexOf("/"))throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Fg.fromString(n));if(!jg.isDocumentKey(r))throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return _y(e,new jg(r))}if(n instanceof wk)return _y(e,n._key);throw new wg(yg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dk(n),"."))}function xC(e,t){if(!Array.isArray(e)||0===e.length)throw new wg(yg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function AC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new wg(yg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wg(yg.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class NC{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(py(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mg()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Gv(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new jk(sy(e.latitude),sy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=cy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ly(e));default:return null}}convertTimestamp(e){const t=iy(e);return new Og(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fg.fromString(e);gg(k_(n));const r=new hy(n.get(1),n.get(3)),i=new jg(n.popFirst(5));return r.isEqual(t)||dg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function DC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class PC extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wk(this.firestore,null,t)}}class RC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OC extends fC{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new LC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class LC extends OC{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class MC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new RC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new LC(this._firestore,this._userDataWriter,n.key,n,new RC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wg(yg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new LC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new RC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new LC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:FC(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function FC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mg()}}function UC(e,t){return e instanceof OC&&t instanceof OC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof MC&&t instanceof MC&&e._firestore===t._firestore&&Ek(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class VC extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wk(this.firestore,null,t)}}function jC(e){e=fk(e,wk);const t=fk(e.firestore,xk),n=Ak(t),r=new VC(t);return function(e,t){const n=new bg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=vg(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new wg(yg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=LE(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await XT(e),t,n))),n.promise}(n,e._key).then((n=>new OC(t,r,e._key,n,new RC(null!==n&&n.hasLocalMutations,!0),e.converter)))}function zC(e){e=fk(e,yk);const t=fk(e.firestore,xk),n=Ak(t),r=new VC(t);return function(e,t){const n=new bg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await CI(e,t,!0),i=new tT(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=LE(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await XT(e),t,n))),n.promise}(n,e._query).then((n=>new MC(t,r,e,n)))}function BC(e,t,n){e=fk(e,wk);const r=fk(e.firestore,xk),i=DC(e.converter,t,n);return GC(r,[Qk(Hk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cb.none())])}function qC(e,t,n){e=fk(e,wk);const r=fk(e.firestore,xk),i=Hk(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=ls(t))||t instanceof Uk?nC(i,"updateDoc",e._key,t,n,a):tC(i,"updateDoc",e._key,t),GC(r,[s.toMutation(e._key,cb.exists(!0))])}function KC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=ls(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||kk(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(kk(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof wk)h=fk(e.firestore,xk),d=gw(e._key.path),u={next:t=>{n[c]&&n[c](HC(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=fk(e,yk);h=fk(t.firestore,xk),d=t._query;const r=new VC(h);u={next:e=>{n[c]&&n[c](new MC(h,r,t,e))},error:n[c+1],complete:n[c+2]},gC(e._query)}return function(e,t,n,r){const i=new zT(r),s=new QE(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>zE(await nk(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>BE(await nk(e),s)))}}(Ak(h),d,l,u)}function WC(e,t){return function(e,t){const n=new zT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){vg(e).W_.add(t),t.next()}(await nk(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){vg(e).W_.delete(t)}(await nk(e),n)))}}(Ak(e=fk(e,xk)),kk(t)?t:{next:t})}function GC(e,t){return function(e,t){const n=new bg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=LT(e);try{const e=await function(e,t){const n=vg(e),r=Og.now(),i=t.reduce(((e,t)=>e.add(t.key)),Bw());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Rw(),c=Bw();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=pb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new vb(e.key,t,Oy(t.value.mapValue),cb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Mw(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new Qv(Dg)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await IT(r,e.changes),await _E(r.remoteStore)}catch(e){const t=LE(e,"Failed to persist write");n.reject(t)}}(await ek(e),t,n))),n.promise}(Ak(e),t)}function HC(e,t,n){const r=n.docs.get(t._key),i=new VC(e);return new OC(e,i,t._key,r,new RC(n.hasPendingWrites,n.fromCache),t.converter)}const QC={maxAttempts:5};class YC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hk(e)}set(e,t,n){this._verifyNotCommitted();const r=$C(e,this._firestore),i=DC(r.converter,t,n),s=Qk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,cb.none())),this}update(e,t,n){this._verifyNotCommitted();const r=$C(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ls(t))||t instanceof Uk?nC(this._dataReader,"WriteBatch.update",r._key,t,n,o):tC(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,cb.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$C(e,this._firestore);return this._mutations=this._mutations.concat(new _b(t._key,cb.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wg(yg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $C(e,t){if((e=ls(e)).firestore!==t)throw new wg(yg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class JC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hk(e)}get(e){const t=$C(e,this._firestore),n=new PC(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return mg();const r=e[0];if(r.isFoundDocument())return new fC(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new fC(this._firestore,n,t._key,null,t.converter);throw mg()}))}set(e,t,n){const r=$C(e,this._firestore),i=DC(r.converter,t,n),s=Qk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=$C(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ls(t))||t instanceof Uk?nC(this._dataReader,"Transaction.update",r._key,t,n,o):tC(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=$C(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$C(e,this._firestore),n=new VC(this._firestore);return super.get(e).then((e=>new OC(this._firestore,n,t._key,e._document,new RC(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cg=e}(so),$s(new us("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new xk(new Eg(e.getProvider("auth-internal")),new xg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wg(yg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hy(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ho(og,"4.6.0",e),ho(og,"4.6.0","esm2017")}();function XC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ZC(){if("undefined"===typeof Uint8Array)throw new wg("unimplemented","Uint8Arrays are not available in this environment.")}function ex(){if("undefined"==typeof atob)throw new wg("unimplemented","Blobs are unavailable in Firestore in this environment.")}class tx{constructor(e){this._delegate=e}static fromBase64String(e){return ex(),new tx(Fk.fromBase64String(e))}static fromUint8Array(e){return ZC(),new tx(Fk.fromUint8Array(e))}toBase64(){return ex(),this._delegate.toBase64()}toUint8Array(){return ZC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rx{enableIndexedDbPersistence(e,t){return function(e,t){Mk(e=fk(e,xk));const n=Ak(e);if(n._uninitializedComponentsProvider)throw new wg(yg.FAILED_PRECONDITION,"SDK cache is already specified.");fg("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new VT;return Dk(n,i,new FT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Mk(e=fk(e,xk));const t=Ak(e);if(t._uninitializedComponentsProvider)throw new wg(yg.FAILED_PRECONDITION,"SDK cache is already specified.");fg("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new VT;return Dk(t,r,new UT(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new wg(yg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new bg;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!tv.D())return Promise.resolve();const t=e+"main";await tv.delete(t)}(mI(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class ix{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof hy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||fg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vk(this._delegate,e,t,n)}enableNetwork(){return Rk(this._delegate)}disableNetwork(){return Ok(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,lk("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Pk(this._delegate)}onSnapshotsInSync(e){return WC(this._delegate,e)}get app(){if(!this._appCompat)throw new wg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yx(this,_k(this._delegate,e))}catch(LA){throw ux(LA,"collection()","Firestore.collection()")}}doc(e){try{return new lx(this,Sk(this._delegate,e))}catch(LA){throw ux(LA,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mx(this,function(e,t){if(e=fk(e,gk),ck("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wg(yg.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yk(e,null,function(e){return new pw(Fg.emptyPath(),e)}(t))}(this._delegate,e))}catch(LA){throw ux(LA,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=fk(e,xk);const r=Object.assign(Object.assign({},QC),n);return function(e){if(e.maxAttempts<1)throw new wg(yg.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new bg;return e.asyncQueue.enqueueAndForget((async()=>{const i=await tk(e);new KT(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(Ak(e),(n=>t(new JC(e,n))),r)}(this._delegate,(t=>e(new ox(this,t))))}batch(){return Ak(this._delegate),new ax(new YC(this._delegate,(e=>GC(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Ak(e=fk(e,xk)),r=new Ck;return sk(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Lk(this._delegate,e).then((e=>e?new mx(this,e):null))}}class sx extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new tx(new Fk(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return lx.forKey(t,this.firestore,null)}}class ox{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sx(e)}get(e){const t=wx(e);return this._delegate.get(t).then((e=>new fx(this._firestore,new OC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=wx(e);return n?(XC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=wx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=wx(e);return this._delegate.delete(t),this}}class ax{constructor(e){this._delegate=e}set(e,t,n){const r=wx(e);return n?(XC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=wx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=wx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new LC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new px(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=cx.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new cx(e,new sx(e),t),r.set(t,i)),i}}cx.INSTANCES=new WeakMap;class lx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sx(e)}static forPath(e,t,n){if(e.length%2!==0)throw new wg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new lx(t,new wk(t._delegate,n,new jg(e)))}static forKey(e,t,n){return new lx(t,new wk(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new yx(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yx(this.firestore,_k(this._delegate,e))}catch(LA){throw ux(LA,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ls(e))instanceof wk&&Ik(this._delegate,e)}set(e,t){t=XC("DocumentReference.set",t);try{return t?BC(this._delegate,e,t):BC(this._delegate,e)}catch(LA){throw ux(LA,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qC(this._delegate,e):qC(this._delegate,e,t,...r)}catch(LA){throw ux(LA,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return GC(fk(e.firestore,xk),[new _b(e._key,cb.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=hx(t),i=dx(t,(e=>new fx(this.firestore,new OC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return KC(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?jC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fk(e,wk);const t=fk(e.firestore,xk);return rk(Ak(t),e._key,{source:"server"}).then((n=>HC(t,e,n)))}(this._delegate):function(e){e=fk(e,wk);const t=fk(e.firestore,xk);return rk(Ak(t),e._key).then((n=>HC(t,e,n)))}(this._delegate),t.then((e=>new fx(this.firestore,new OC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new lx(this.firestore,e?this._delegate.withConverter(cx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ux(e,t,n){return e.message=e.message.replace(t,n),e}function hx(e){for(const t of e)if("object"===typeof t&&!nx(t))return t;return{}}function dx(e,t){var n,r;let i;return i=nx(e[0])?e[0]:nx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UC(this._delegate,e._delegate)}}class px extends fx{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||mg()}(void 0!==t),t}}class mx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sx(e)}where(e,t,n){try{return new mx(this.firestore,wC(this._delegate,function(e,t,n){const r=t,i=mC("where",e);return bC._create(i,r,n)}(e,t,n)))}catch(LA){throw ux(LA,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mx(this.firestore,wC(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mC("orderBy",e);return SC._create(n,t)}(e,t)))}catch(LA){throw ux(LA,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mx(this.firestore,wC(this._delegate,function(e){return pk("limit",e),IC._create("limit",e,"F")}(e)))}catch(LA){throw ux(LA,"limit()","Query.limit()")}}limitToLast(e){try{return new mx(this.firestore,wC(this._delegate,function(e){return pk("limitToLast",e),IC._create("limitToLast",e,"L")}(e)))}catch(LA){throw ux(LA,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new mx(this.firestore,wC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return EC._create("startAt",t,!0)}(...arguments)))}catch(LA){throw ux(LA,"startAt()","Query.startAt()")}}startAfter(){try{return new mx(this.firestore,wC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return EC._create("startAfter",t,!1)}(...arguments)))}catch(LA){throw ux(LA,"startAfter()","Query.startAfter()")}}endBefore(){try{return new mx(this.firestore,wC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return TC._create("endBefore",t,!1)}(...arguments)))}catch(LA){throw ux(LA,"endBefore()","Query.endBefore()")}}endAt(){try{return new mx(this.firestore,wC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return TC._create("endAt",t,!0)}(...arguments)))}catch(LA){throw ux(LA,"endAt()","Query.endAt()")}}isEqual(e){return Ek(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?zC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fk(e,yk);const t=fk(e.firestore,xk),n=Ak(t),r=new VC(t);return ik(n,e._query,{source:"server"}).then((n=>new MC(t,r,e,n)))}(this._delegate):function(e){e=fk(e,yk);const t=fk(e.firestore,xk),n=Ak(t),r=new VC(t);return gC(e._query),ik(n,e._query).then((n=>new MC(t,r,e,n)))}(this._delegate),t.then((e=>new vx(this.firestore,new MC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=hx(t),i=dx(t,(e=>new vx(this.firestore,new MC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return KC(this._delegate,r,i)}withConverter(e){return new mx(this.firestore,e?this._delegate.withConverter(cx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class gx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new px(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new px(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new gx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new px(this._firestore,n))}))}isEqual(e){return UC(this._delegate,e._delegate)}}class yx extends mx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new lx(this.firestore,e):null}doc(e){try{return new lx(this.firestore,void 0===e?Sk(this._delegate):Sk(this._delegate,e))}catch(LA){throw ux(LA,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=fk(e.firestore,xk),r=Sk(e),i=DC(e.converter,t);return GC(n,[Qk(Hk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cb.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new lx(this.firestore,e)))}isEqual(e){return Ik(this._delegate,e._delegate)}withConverter(e){return new yx(this.firestore,e?this._delegate.withConverter(cx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wx(e){return fk(e,wk)}class bx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Uk(...t)}static documentId(){return new bx(Vg.keyField().canonicalString())}isEqual(e){return(e=ls(e))instanceof Uk&&this._delegate._internalPath.isEqual(e._internalPath)}}class _x{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Jk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new _x(e)}static delete(){const e=new Yk("deleteField");return e._methodName="FieldValue.delete",new _x(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xk("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new _x(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new _x(e)}static increment(e){const t=function(e){return new eC("increment",e)}(e);return t._methodName="FieldValue.increment",new _x(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Sx={Firestore:ix,GeoPoint:jk,Timestamp:Og,Blob:tx,Transaction:ox,WriteBatch:ax,DocumentReference:lx,DocumentSnapshot:fx,Query:mx,QueryDocumentSnapshot:px,QuerySnapshot:vx,CollectionReference:yx,FieldPath:bx,FieldValue:_x,setLogLevel:function(e){!function(e){lg.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new us("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Sx)))}(e,((e,t)=>new ix(e,t,new rx))),e.registerVersion("@firebase/firestore-compat","0.3.29")}(Do);const Ix=Do.initializeApp({apiKey:"AIzaSyBiwRRlybrVRuSn6PYBxoVPP1ki_0aR1Gw",authDomain:"miniblog-71b35.firebaseapp.com",projectId:"miniblog-71b35",storageBucket:"miniblog-71b35.appspot.com",messagingSenderId:"291310754916",appId:"1:291310754916:web:7b9bb7b02556b1d0a55371"}).firestore();var Ex,Tx,kx,Cx,xx,Ax,Nx,Dx;const Px=fr.div(Ex||(Ex=_e(["\n    padding: 0px 20px;\n    width: 360px;\n    height: 800px;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    background-color: #39393B;\n    color: #fff;\n    max-height: 800px;\n    position: relative;\n    top:50px;\n    border-radius: 20px;\n"]))),Rx=fr.div(Tx||(Tx=_e(["\n    width: 100%;\n    max-width: 320px;\n    height: 600px;\n    overflow-y: auto;\n    padding-bottom: 20px;\n    overflow-x: hidden; /* \uac00\ub85c \uc2a4\ud06c\ub864\ubc14 \uc228\uae40 */\n    &::-webkit-scrollbar {\n        display: none; /* \uc2a4\ud06c\ub864\ubc14 \uc228\uae40 */\n    }\n"]))),Ox=fr.div(kx||(kx=_e(["\n    background-color: #48484A;\n    padding: 20px 12px;\n    border-radius: 12px;\n    box-sizing: border-box;\n    margin-bottom: 24px;\n"]))),Lx=fr.p(Cx||(Cx=_e(["\n    font-size: 16px;\n    font-weight: 700;\n    margin-bottom: 12px;\n    padding-top: 12px;\n    border-top: 1px solid #757575;\n    font-weight: 700;\n"]))),Mx=fr.p(xx||(xx=_e(["\n    font-size: 12px;\n    line-height: 19px;\n    white-space: pre-wrap;\n    margin: 0px;\n    font-weight: 400;\n"]))),Fx=fr.div(Ax||(Ax=_e(["\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n"]))),Ux=fr.p(Nx||(Nx=_e(["\n    width: 320px;\n    font-size: 16px;\n    font-weight: 500;\n    display: flex;\n    flex-direction: row;\n    align-items: flex-end;\n    margin:0;\n    margin-bottom: 8px;\n"]))),Vx=fr.p(Dx||(Dx=_e(["\n    box-sizing: border-box;\n    font-size: 12px;\n    margin: 0px;\n    margin-left:4px;\n"]))),jx={PostUserId:{borderBottom:"1px solid #757575",paddingBottom:12,marginBottom:12}};const zx=function(e){ee();const t=function(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}().id,[n,i]=(0,r.useState)({id:0,title:"",content:"",comments:[]});(0,r.useEffect)((function(){Ix.collection("post").doc(t).get().then((function(e){i(e.data())}))}),[]);const[s,o]=(0,r.useState)("");return(0,wr.jsxs)(Px,{children:[(0,wr.jsx)(ui,{title:"\uac8c\uc2dc\uae00",img:"/back.png"}),(0,wr.jsxs)(Rx,{children:[(0,wr.jsxs)(Ox,{children:[(0,wr.jsx)(Er,{style:jx.PostUserId}),(0,wr.jsx)(Lx,{children:n.title}),(0,wr.jsx)(Mx,{children:n.content})]}),(0,wr.jsxs)(Ux,{children:["\ub313\uae00",(0,wr.jsx)(Vx,{children:n.comments.length})]}),(0,wr.jsxs)(Fx,{children:[(0,wr.jsx)(Jr,{height:48,placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694.","margin-bottom":16,value:s,onChange:e=>o(e.target.value),focuscolor:"#01C859",outline:"none"}),(0,wr.jsx)(Hr,{icon:"/./plus_small.png",title:"",onClick:function(){let e=(new Date).getTime().toString(),r=n.comments;r.push({id:t+"_"+e,content:s}),Ix.collection("post").doc(t).update({comments:r}).then((function(){o("")}))},backcolor:"#01C859",border:"none",position:"relative",bottom:"40px",right:"12px"}),(0,wr.jsx)(qr,{comments:n.comments,userid:n.userid,position:"relative",top:"20px"})]})]}),(0,wr.jsx)(Pi,{})]})};var Bx,qx,Kx,Wx,Gx,Hx;const Qx=fr.div(Bx||(Bx=_e(["\n    box-sizing : border-box;\n    width: 320px;\n    padding: 0px 12px;\n    display: flex;\n    flex-direction: column;\n    aligin-items: flex-start;\n    justify-content: center;\n    border-bottom: 1px solid rgba(117, 117, 117, 0.5);\n    cusor: pointer;\n    background: #39393B;\n    &:hover {\n        background-color: #48484A;\n    }\n"]))),Yx=fr.p(qx||(qx=_e(["\n    font-size: 16px;\n    font-weight: 500;\n    margin-top: 20px;\n    margin-bottom: 12px;\n    color: #fff;\n    font-weight: 700;\n"]))),$x=fr.div(Kx||(Kx=_e(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 11px;\n    height: 16px;\n"]))),Jx=fr.p(Wx||(Wx=_e(["\n    font-size: 12px;\n    color: #757575;\n"]))),Xx=fr.div(Gx||(Gx=_e(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    color: #757575;\n    font-size: 12px;\n"]))),Zx=fr.img(Hx||(Hx=_e(["\n  margin-right: 4px;\n"])));const eA=function(e){const{post:t,onClick:n}=e;return(0,wr.jsxs)(Qx,{onClick:n,children:[(0,wr.jsx)(Yx,{children:t.title}),(0,wr.jsxs)($x,{children:[(0,wr.jsx)(Jx,{children:t.date}),(0,wr.jsxs)(Xx,{children:[(0,wr.jsx)(Zx,{src:"/./icons_chat.png",alt:"ChatIcon"}),t.commentCount]})]})]})};var tA,nA,rA;const iA=fr.div(tA||(tA=_e(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    // &>*{\n    //     :not(:last-child){\n    //         margin-bottom: 0px;\n    //     }\n    }\n"]))),sA=fr.div(nA||(nA=_e(["\n    box-sizing : border-box;\n    background-color : #48484A;\n    width:320px;\n    color : #fff;\n    font-size: 16px;\n    display : flex;\n    align-items: center;\n    padding-left: 12px;\n    height: 32px;\n    border-radius : 8px 8px 0px 0px;\n    margin-bottom: 8px;\n"]))),oA=fr.div(rA||(rA=_e(["\n    display: flex;\n    flex-direction: column-reverse;\n"])));const aA=function(e){const{posts:t,onClickItem:n}=e;return(0,wr.jsxs)(iA,{children:[(0,wr.jsx)(sA,{children:e.title}),(0,wr.jsx)(oA,{children:t.map(((e,t)=>(0,wr.jsx)(eA,{post:e,onClick:()=>n(e)},e.id)))})]})};var cA,lA,uA,hA,dA;const fA=fr.div(cA||(cA=_e(["\n    display: flex;\n    flex-direction: column;\n    width: 360px;\n    height: 84px;\n    box-sizing: border-box;\n    margin-bottom: 20px;\n"]))),pA=fr.img(lA||(lA=_e(["\n    width: 360px;\n    height : 24px;\n"]))),mA=fr.div(uA||(uA=_e(["\n    height:60px;\n    display: flex;\n    justify-content: space-between;\n    padding: 0 20px;\n    align-items: center;\n"]))),gA=fr.img(hA||(hA=_e(["\n    width : 24px;\n    height: 24px;\n"]))),vA=fr.img(dA||(dA=_e(["\n    width: 120px;\n    height:32px;\n"])));const yA=function(e){return(0,wr.jsxs)(fA,{children:[(0,wr.jsx)(pA,{src:"Android Big Status Bar.png"}),(0,wr.jsxs)(mA,{children:[(0,wr.jsx)(vA,{src:"logo.png"}),(0,wr.jsx)(gA,{src:"./Icon/bell.png"})]})]})};var wA,bA;const _A=fr.div(wA||(wA=_e(["\n    height: 800px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: #39393B;\n    color: #fff;\n    position: relative;\n    top:50px;\n    border-radius: 20px;\n"]))),SA=fr.div(bA||(bA=_e(["\n    width: 100%;\n    max-width: 320px;\n    margin-bottom: 24px;\n"])));const IA=function(e){const[t,n]=(0,r.useState)([]);(0,r.useEffect)((function(){(()=>{const e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();"".concat(t,"-").concat(n<10?"0"+n:n,"-").concat(r<10?"0"+r:r)})();let e=[];Ix.collection("post").get().then((function(t){t.forEach((function(t){const n=t.data();e.push({...n,commentCount:s(n)})})),n(e)}))}),[]);const i=ee(),s=e=>e.comments?e.comments.length:0;return(0,wr.jsxs)(_A,{children:[(0,wr.jsx)(yA,{}),(0,wr.jsx)(SA,{children:(0,wr.jsx)(aA,{title:"\ub098\uc758 \uae00",posts:t,onClickItem:e=>{i("/post/"+e.id)}})}),(0,wr.jsx)(Pi,{})]})};var EA,TA,kA,CA,xA;const AA=fr.div(EA||(EA=_e(["\n    background-color: #39393B;\n    height: 800px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    top:50px;\n    border-radius: 20px;\n"]))),NA=fr.div(TA||(TA=_e(["\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n"]))),DA=fr.div(kA||(kA=_e(["\n    display: flex;\n    flex-direction: column;\n"]))),PA=fr.p(CA||(CA=_e(["\n    margin-bottom: 8px;\n    font-size: 16px;\n    color: #fff;\n    margin-top:","px;\n"])),(e=>e.margin_top)),RA=fr.p(xA||(xA=_e(["\n    display: flex;\n    height: 20px;\n    flex-direction: row-reverse;\n    align-items: center;\n    padding-right: 16px;\n    position: relative;\n    font-size: 12px;\n    color: #ADADAD;\n    right: 0;\n    bottom: 28px;\n"])));const OA=function(e){const[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),o=ee(),a=()=>{const e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return"".concat(t,". ").concat(n<10?"0"+n:n,". ").concat(r<10?"0"+r:r)};return(0,wr.jsxs)(AA,{children:[(0,wr.jsx)(ui,{title:"\uae00 \uc791\uc131"}),(0,wr.jsxs)(NA,{children:[(0,wr.jsxs)(DA,{children:[(0,wr.jsx)(PA,{children:"\uc81c\ubaa9"}),(0,wr.jsx)(Jr,{height:48,placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:t,onChange:e=>n(e.target.value),focuscolor:"#01C859",outline:"none"}),(0,wr.jsx)(PA,{margin_top:"16",children:"\ub0b4\uc6a9"}),(0,wr.jsx)(Jr,{height:354,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:i,onChange:e=>s(e.target.value),focuscolor:"#01C859",outline:"none"}),(0,wr.jsx)(RA,{children:a()})]}),(0,wr.jsx)(Hr,{as:Gr,title:"\uac8c\uc2dc\ud558\uae30",onClick:function(){let e=(new Date).getTime().toString();const n=a();Ix.collection("post").doc(e).set({id:e,title:t,content:i,date:n,comments:[]}).then((function(){o("/")}))},backcolor:"#48484a",border:"2px solid #01C859"})]}),(0,wr.jsx)(Pi,{})]})};s.createRoot(document.getElementById("root")).render((0,wr.jsx)(ye,{children:(0,wr.jsxs)(me,{children:[(0,wr.jsx)(fe,{index:!0,element:(0,wr.jsx)(IA,{})}),(0,wr.jsx)(fe,{path:"write",element:(0,wr.jsx)(OA,{})}),(0,wr.jsx)(fe,{path:"post/:id",element:(0,wr.jsx)(zx,{})})]})}))})()})();
//# sourceMappingURL=main.81c7ce8a.js.map